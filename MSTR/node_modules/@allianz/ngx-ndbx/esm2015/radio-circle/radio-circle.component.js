/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChildren, EventEmitter, forwardRef, Input, Output, QueryList, Renderer2 } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { NxRadioCircleButton } from './radio-circle-button';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
/** @type {?} */
let nextId = 0;
/**
 * @deprecated Use `nx-circle-toggle-group` instead
 * \@deletion-target 8.0.0
 */
export class NxRadioCircleComponent {
    /**
     * @param {?} renderer
     */
    constructor(renderer) {
        this.renderer = renderer;
        this._id = nextId++;
        this._responsive = true;
        /**
         * An event emitted when the selection changes.
         */
        this.valueChange = new EventEmitter();
        /**
         * Whether the radio circle is disabled.
         */
        this.disabled = false;
        this.onTouchedCallback = (/**
         * @param {?} option
         * @return {?}
         */
        (option) => {
        });
        this.onChangeCallback = (/**
         * @param {?} option
         * @return {?}
         */
        (option) => {
        });
        console.warn('`nx-radio-circle` is deprecated. Use `nx-circle-toggle-group` instead.');
    }
    /**
     * Whether the toggle behavior is disabled.
     *
     * @deprecated Use `nxResponsive` instead
     * \@deletion-target 7.0.0
     * @param {?} value
     * @return {?}
     */
    set responsiveToggle(value) {
        console.warn('`nxResponsiveToggle` is deprecated. Use `nxResponsive` instead.');
        this.responsive = value;
    }
    /**
     * Whether the radio circle should have a responsive behavior.
     *
     * On false the circles will stay even on mobile viewports.
     * Default: true.
     * @param {?} value
     * @return {?}
     */
    set responsive(value) {
        /** @type {?} */
        const newValue = coerceBooleanProperty(value);
        if (newValue !== this.responsive) {
            this._responsive = newValue;
        }
    }
    /**
     * @return {?}
     */
    get responsive() {
        return this._responsive;
    }
    /**
     * Sets the value of the radio circle.
     * @param {?} value
     * @return {?}
     */
    set value(value) {
        this.writeValue(value);
    }
    /**
     * @return {?}
     */
    get value() {
        return this._selectedButton ? this._selectedButton.value : null;
    }
    /**
     * \@docs-private
     * @deprecated Use `responsive` getter
     * \@deletion-target 7.0.0
     * @return {?}
     */
    getResposiveToggle() {
        console.warn('The method `getResponsiveToggle is deprecated. Use the `responsive` getter instead');
        return this._responsive;
    }
    /**
     * The id of the radio circle.
     * @return {?}
     */
    get radioCircleId() {
        return `radio-circle-${this._id}`;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this.renderer.addClass(this._buttons.first.labelElement.nativeElement, `nx-radio-circle__label--first`);
        this.renderer.addClass(this._buttons.last.labelElement.nativeElement, `nx-radio-circle__label--last`);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        if (this._buttons) {
            this._selectedButton = this._buttons.find((/**
             * @param {?} button
             * @return {?}
             */
            (button) => button.value === value));
        }
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    registerOnChange(callback) {
        this.onChangeCallback = callback;
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    registerOnTouched(callback) {
        this.onTouchedCallback = callback;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @param {?} button
     * @return {?}
     */
    set selectedButton(button) {
        if (this.disabled) {
            return;
        }
        this._selectedButton = button;
        this.onChangeCallback(this.value);
        this.valueChange.emit(this.value);
    }
    /**
     * \@docs-private
     * @return {?}
     */
    get selectedButton() {
        return this._selectedButton;
    }
    /**
     * \@docs-private
     * @return {?}
     */
    get buttons() {
        return this._buttons;
    }
}
NxRadioCircleComponent.decorators = [
    { type: Component, args: [{
                selector: 'nx-radio-circle',
                template: "<div [id]=\"radioCircleId\" class=\"nx-radio-circle\" role=\"radiogroup\" [attr.aria-label]=\"name\">\n  <ng-content></ng-content>\n</div>\n",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => NxRadioCircleComponent)),
                        multi: true
                    }
                ],
                host: {
                    '[class.is-responsive]': 'responsive',
                    '[class.is-disabled]': 'disabled',
                    '[attr.aria-disabled]': 'disabled',
                },
                styles: [":host{display:block;position:relative}@media (max-width:703px){:host-context(.is-responsive) .nx-radio-circle{flex-direction:column}:host-context(.is-responsive) .nx-radio-circle__label{flex-direction:row;border:2px solid #007ab3;border-top-width:0;font-size:16px;padding:8px 40px 8px 15px}:host-context(.is-responsive) .nx-radio-circle__label--first{border-top-width:2px;border-radius:5px 5px 0 0}:host-context(.is-responsive) .nx-radio-circle__label--last{border-radius:0 0 5px 5px}:host-context(.is-responsive) .nx-radio-circle__circle{display:none}:host-context(.is-responsive) .nx-radio-circle__label-info{color:#007ab3;margin-left:10px;margin-top:0;line-height:16px;font-size:14px}:host-context(.is-responsive) .nx-radio-circle__mobile-check{display:inline-block;opacity:0;line-height:1;margin-right:10px}:host-context(.is-responsive) .nx-radio-circle--checked .nx-radio-circle__mobile-check{opacity:1}:host-context(.is-responsive) .nx-radio-circle--checked{background-color:#007ab3;color:#fff}:host-context(.is-responsive) .nx-radio-circle--checked .nx-radio-circle__label-info,:host-context(.is-responsive) .nx-radio-circle--checked .nx-radio-circle__label-text{color:#fff}:host(:not(.is-responsive)) ::ng-deep nx-radio-circle-icon-button,:host(:not(.is-responsive)) ::ng-deep nx-radio-circle-svg-button{flex:1 0 auto;min-width:33.3%}}.nx-radio-circle{display:flex;flex-direction:row;justify-content:space-around;flex-wrap:wrap}.nx-radio-circle__input{opacity:0;position:absolute}.nx-radio-circle__label{cursor:pointer;display:flex;flex-direction:column;justify-content:center;text-align:center;align-items:center;font-size:16px;font-weight:600;padding:0;position:relative;transition:background-color .2s,border-color .2s,color .2s;vertical-align:middle}@media (min-width:704px){:host:hover .nx-radio-circle__circle{background-color:#006192;border-color:transparent;box-shadow:none;color:#fff}.nx-radio-circle__label{line-height:8rem;min-height:8rem;min-width:8rem;max-width:8rem;padding:0}}.nx-radio-circle__label-text{line-height:20px;z-index:1;color:#414141}@media (max-width:703px){.nx-radio-circle__label-text{color:#007ab3}}.nx-radio-circle__input:focus+.nx-radio-circle__label{color:#fff}.nx-radio-circle__input:focus+.nx-radio-circle__label:after{background-color:#006192;border-color:transparent}.nx-radio-circle__mobile-check{font-size:24px;display:none;z-index:1}.nx-radio-circle--checked .nx-radio-circle__circle{color:#fff;background-color:#007ab3}.nx-radio-circle--checked{color:#fff}.nx-radio-circle--checked:hover{cursor:default}@media screen and (-ms-high-contrast:active){.nx-radio-circle__label-text{color:#fff}.nx-radio-circle--checked .nx-radio-circle__circle{background-color:#ff0;border-color:#ff0}.nx-radio-circle--checked,.nx-radio-circle--checked .nx-radio-circle__label-text{color:#000}.nx-radio-circle--checked .nx-radio-circle__label-text{color:#fff}}.nx-radio-circle__circle{display:flex;justify-content:center;align-items:center;border-radius:50%;min-width:8rem;min-height:8rem;max-width:8rem;max-height:8rem;width:8rem;height:8rem;border:2px solid #007ab3;margin-bottom:1.5rem;color:#007ab3}:host.is-disabled *{color:#c2c2c2}:host.is-disabled .nx-radio-circle__circle{border:2px solid #c2c2c2}:host.is-disabled .nx-radio-circle--checked .nx-radio-circle__circle{background-color:#c2c2c2;border:2px solid #c2c2c2}:host.is-disabled .nx-radio-circle--checked .nx-radio-circle__label--icon{color:#fff!important}@media (max-width:703px){:host.is-disabled .nx-radio-circle__label{border:2px solid #c2c2c2}:host.is-disabled .nx-radio-circle__label-info{color:#c2c2c2}:host.is-disabled .nx-icon--check:before{color:#fff}:host.is-disabled .nx-radio-circle--checked{background-color:#c2c2c2}:host.is-disabled .nx-radio-circle--checked .nx-radio-circle__label-info{color:#fff}}:host.is-disabled:hover{cursor:not-allowed}:host.is-disabled:hover .nx-radio-circle__circle{background-color:transparent;cursor:not-allowed}.nx-radio-circle__label--icon{pointer-events:none;z-index:1;display:flex;text-align:center;align-items:center;justify-content:center;font-size:4rem;font-weight:400;position:relative}.nx-radio-circle__label--icon.nx-icon--auto{font-size:4rem}.nx-radio-circle__label-info{color:#fff;display:inline-block;font-weight:300;line-height:22px;font-size:18px;margin-top:4px;transition:color .2s;z-index:1}@media screen and (-ms-high-contrast:active){.nx-radio-circle__label-info{color:#fff}}.nx-radio-circle__label-info:before{content:'(';display:inline-block}@media (min-width:704px){.nx-radio-circle__label-info{color:#767676;display:block;width:16rem}.nx-radio-circle__label-info:before{content:''}}.nx-radio-circle__label-info:after{content:')';display:inline-block}@media (min-width:704px){.nx-radio-circle__label-info:after{content:''}}:host-context([data-whatinput=keyboard]) .nx-radio-circle__input:focus+.nx-radio-circle__label .nx-radio-circle__circle{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6}"]
            }] }
];
/** @nocollapse */
NxRadioCircleComponent.ctorParameters = () => [
    { type: Renderer2 }
];
NxRadioCircleComponent.propDecorators = {
    _buttons: [{ type: ContentChildren, args: [NxRadioCircleButton,] }],
    valueChange: [{ type: Output, args: ['nxValueChange',] }],
    name: [{ type: Input, args: ['nxName',] }],
    disabled: [{ type: Input, args: ['disabled',] }],
    responsiveToggle: [{ type: Input, args: ['nxResponsiveToggle',] }],
    responsive: [{ type: Input, args: ['nxResponsive',] }],
    value: [{ type: Input, args: ['nxValue',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype._id;
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype._buttons;
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype._selectedButton;
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype._responsive;
    /**
     * An event emitted when the selection changes.
     * @type {?}
     */
    NxRadioCircleComponent.prototype.valueChange;
    /**
     * Sets the name of the radio circle, which is used for accessibility.
     * @type {?}
     */
    NxRadioCircleComponent.prototype.name;
    /**
     * Whether the radio circle is disabled.
     * @type {?}
     */
    NxRadioCircleComponent.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype.onTouchedCallback;
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    NxRadioCircleComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFkaW8tY2lyY2xlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGxpYW56L25neC1uZGJ4LyIsInNvdXJjZXMiOlsicmFkaW8tY2lyY2xlL3JhZGlvLWNpcmNsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFFTCxTQUFTLEVBQ1QsZUFBZSxFQUNmLFlBQVksRUFDWixVQUFVLEVBQ1YsS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1QsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBdUIsaUJBQWlCLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RSxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMscUJBQXFCLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQzs7SUFFeEQsTUFBTSxHQUFHLENBQUM7Ozs7O0FBdUJkLE1BQU0sT0FBTyxzQkFBc0I7Ozs7SUFxRGpDLFlBQW9CLFFBQW1CO1FBQW5CLGFBQVEsR0FBUixRQUFRLENBQVc7UUFuRC9CLFFBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQztRQU9mLGdCQUFXLEdBQVksSUFBSSxDQUFDOzs7O1FBSXBDLGdCQUFXLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFRN0MsYUFBUSxHQUFHLEtBQUssQ0FBQztRQXdEaEIsc0JBQWlCOzs7O1FBQUcsQ0FBQyxNQUFXLEVBQUUsRUFBRTtRQUM1QyxDQUFDLEVBQUE7UUFFTyxxQkFBZ0I7Ozs7UUFBRyxDQUFDLE1BQVcsRUFBRSxFQUFFO1FBQzNDLENBQUMsRUFBQTtRQTNCQyxPQUFPLENBQUMsSUFBSSxDQUFDLHdFQUF3RSxDQUFDLENBQUM7SUFDekYsQ0FBQzs7Ozs7Ozs7O0lBMUJELElBQ0ksZ0JBQWdCLENBQUMsS0FBYztRQUNqQyxPQUFPLENBQUMsSUFBSSxDQUFDLGlFQUFpRSxDQUFDLENBQUM7UUFDaEYsSUFBSSxDQUFD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LEtBQUssRUFBRSxJQUFJO3FCQUNaO2lCQUNGO2dCQUNELElBQUksRUFBRTtvQkFDSix1QkFBdUIsRUFBRSxZQUFZO29CQUNyQyxxQkFBcUIsRUFBRSxVQUFVO29CQUNqQyxzQkFBc0IsRUFBRSxVQUFVO2lCQUNuQzs7YUFDRjs7OztZQTVCQyxTQUFTOzs7dUJBaUNSLGVBQWUsU0FBQyxtQkFBbUI7MEJBUW5DLE1BQU0sU0FBQyxlQUFlO21CQUl0QixLQUFLLFNBQUMsUUFBUTt1QkFJZCxLQUFLLFNBQUMsVUFBVTsrQkFTaEIsS0FBSyxTQUFDLG9CQUFvQjt5QkFZMUIsS0FBSyxTQUFDLGNBQWM7b0JBaUJwQixLQUFLLFNBQUMsU0FBUzs7Ozs7OztJQXhEaEIscUNBQXVCOzs7OztJQUV2QiwwQ0FDaUQ7Ozs7O0lBRWpELGlEQUE2Qzs7Ozs7SUFFN0MsNkNBQW9DOzs7OztJQUdwQyw2Q0FDb0Q7Ozs7O0lBR3BELHNDQUNhOzs7OztJQUdiLDBDQUN3Qjs7Ozs7SUF3RHhCLG1EQUNDOzs7OztJQUVELGtEQUNDOzs7OztJQTVCVywwQ0FBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlckNvbnRlbnRJbml0LFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgRXZlbnRFbWl0dGVyLFxuICBmb3J3YXJkUmVmLFxuICBJbnB1dCwgT25Jbml0LFxuICBPdXRwdXQsXG4gIFF1ZXJ5TGlzdCxcbiAgUmVuZGVyZXIyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1J9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7TnhSYWRpb0NpcmNsZUJ1dHRvbn0gZnJvbSAnLi9yYWRpby1jaXJjbGUtYnV0dG9uJztcbmltcG9ydCB7Y29lcmNlQm9vbGVhblByb3BlcnR5fSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuXG5sZXQgbmV4dElkID0gMDtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgYG54LWNpcmNsZS10b2dnbGUtZ3JvdXBgIGluc3RlYWRcbiAqIEBkZWxldGlvbi10YXJnZXQgOC4wLjBcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbngtcmFkaW8tY2lyY2xlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3JhZGlvLWNpcmNsZS5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vcmFkaW8tY2lyY2xlLWJ1dHRvbi5zY3NzJ10sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTnhSYWRpb0NpcmNsZUNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MuaXMtcmVzcG9uc2l2ZV0nOiAncmVzcG9uc2l2ZScsXG4gICAgJ1tjbGFzcy5pcy1kaXNhYmxlZF0nOiAnZGlzYWJsZWQnLFxuICAgICdbYXR0ci5hcmlhLWRpc2FibGVkXSc6ICdkaXNhYmxlZCcsXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgTnhSYWRpb0NpcmNsZUNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBBZnRlckNvbnRlbnRJbml0IHtcblxuICBwcml2YXRlIF9pZCA9IG5leHRJZCsrO1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oTnhSYWRpb0NpcmNsZUJ1dHRvbilcbiAgcHJpdmF0ZSBfYnV0dG9uczogUXVlcnlMaXN0PE54UmFkaW9DaXJjbGVCdXR0b24+O1xuXG4gIHByaXZhdGUgX3NlbGVjdGVkQnV0dG9uOiBOeFJhZGlvQ2lyY2xlQnV0dG9uO1xuXG4gIHByaXZhdGUgX3Jlc3BvbnNpdmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8qKiBBbiBldmVudCBlbWl0dGVkIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLiAqL1xuICBAT3V0cHV0KCdueFZhbHVlQ2hhbmdlJylcbiAgdmFsdWVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8qKiBTZXRzIHRoZSBuYW1lIG9mIHRoZSByYWRpbyBjaXJjbGUsIHdoaWNoIGlzIHVzZWQgZm9yIGFjY2Vzc2liaWxpdHkuICovXG4gIEBJbnB1dCgnbnhOYW1lJylcbiAgbmFtZTogc3RyaW5nO1xuXG4gIC8qKiBXaGV0aGVyIHRoZSByYWRpbyBjaXJjbGUgaXMgZGlzYWJsZWQuICovXG4gIEBJbnB1dCgnZGlzYWJsZWQnKVxuICBwdWJsaWMgZGlzYWJsZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgdG9nZ2xlIGJlaGF2aW9yIGlzIGRpc2FibGVkLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYG54UmVzcG9uc2l2ZWAgaW5zdGVhZFxuICAgKiBAZGVsZXRpb24tdGFyZ2V0IDcuMC4wXG4gICAqL1xuICBASW5wdXQoJ254UmVzcG9uc2l2ZVRvZ2dsZScpXG4gIHNldCByZXNwb25zaXZlVG9nZ2xlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgY29uc29sZS53YXJuKCdgbnhSZXNwb25zaXZlVG9nZ2xlYCBpcyBkZXByZWNhdGVkLiBVc2UgYG54UmVzcG9uc2l2ZWAgaW5zdGVhZC4nKTtcbiAgICB0aGlzLnJlc3BvbnNpdmUgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSByYWRpbyBjaXJjbGUgc2hvdWxkIGhhdmUgYSByZXNwb25zaXZlIGJlaGF2aW9yLlxuICAgKlxuICAgKiBPbiBmYWxzZSB0aGUgY2lyY2xlcyB3aWxsIHN0YXkgZXZlbiBvbiBtb2JpbGUgdmlld3BvcnRzLlxuICAgKiBEZWZhdWx0OiB0cnVlLlxuICAgKi9cbiAgQElucHV0KCdueFJlc3BvbnNpdmUnKVxuICBzZXQgcmVzcG9uc2l2ZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICBpZiAobmV3VmFsdWUgIT09IHRoaXMucmVzcG9uc2l2ZSkge1xuICAgICAgdGhpcy5fcmVzcG9uc2l2ZSA9IG5ld1ZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldCByZXNwb25zaXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9yZXNwb25zaXZlO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyKSB7XG4gICAgY29uc29sZS53YXJuKCdgbngtcmFkaW8tY2lyY2xlYCBpcyBkZXByZWNhdGVkLiBVc2UgYG54LWNpcmNsZS10b2dnbGUtZ3JvdXBgIGluc3RlYWQuJyk7XG4gIH1cblxuICAvKiogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIHJhZGlvIGNpcmNsZS4gKi9cbiAgQElucHV0KCdueFZhbHVlJylcbiAgc2V0IHZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLndyaXRlVmFsdWUodmFsdWUpO1xuICB9XG5cbiAgZ2V0IHZhbHVlKCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkQnV0dG9uID8gdGhpcy5fc2VsZWN0ZWRCdXR0b24udmFsdWUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkb2NzLXByaXZhdGVcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGByZXNwb25zaXZlYCBnZXR0ZXJcbiAgICogQGRlbGV0aW9uLXRhcmdldCA3LjAuMFxuICAgKi9cbiAgZ2V0UmVzcG9zaXZlVG9nZ2xlKCk6IGFueSB7XG4gICAgY29uc29sZS53YXJuKCdUaGUgbWV0aG9kIGBnZXRSZXNwb25zaXZlVG9nZ2xlIGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYHJlc3BvbnNpdmVgIGdldHRlciBpbnN0ZWFkJyk7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNpdmU7XG4gIH1cblxuICBwcml2YXRlIG9uVG91Y2hlZENhbGxiYWNrID0gKG9wdGlvbjogYW55KSA9PiB7XG4gIH1cblxuICBwcml2YXRlIG9uQ2hhbmdlQ2FsbGJhY2sgPSAob3B0aW9uOiBhbnkpID0+IHtcbiAgfVxuXG4gIC8qKiBUaGUgaWQgb2YgdGhlIHJhZGlvIGNpcmNsZS4gKi9cbiAgZ2V0IHJhZGlvQ2lyY2xlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHJhZGlvLWNpcmNsZS0ke3RoaXMuX2lkfWA7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLl9idXR0b25zLmZpcnN0LmxhYmVsRWxlbWVudC5uYXRpdmVFbGVtZW50LCBgbngtcmFkaW8tY2lyY2xlX19sYWJlbC0tZmlyc3RgKTtcbiAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuX2J1dHRvbnMubGFzdC5sYWJlbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgYG54LXJhZGlvLWNpcmNsZV9fbGFiZWwtLWxhc3RgKTtcbiAgfVxuXG4gIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9idXR0b25zKSB7XG4gICAgICB0aGlzLl9zZWxlY3RlZEJ1dHRvbiA9IHRoaXMuX2J1dHRvbnMuZmluZCgoYnV0dG9uKSA9PiBidXR0b24udmFsdWUgPT09IHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGNhbGxiYWNrOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGNhbGxiYWNrOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgc2VsZWN0ZWRCdXR0b24oYnV0dG9uOiBOeFJhZGlvQ2lyY2xlQnV0dG9uKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc2VsZWN0ZWRCdXR0b24gPSBidXR0b247XG4gICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMudmFsdWUpO1xuICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnZhbHVlKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGdldCBzZWxlY3RlZEJ1dHRvbigpOiBOeFJhZGlvQ2lyY2xlQnV0dG9uIHtcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRCdXR0b247XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBnZXQgYnV0dG9ucygpOiBRdWVyeUxpc3Q8TnhSYWRpb0NpcmNsZUJ1dHRvbj4ge1xuICAgIHJldHVybiB0aGlzLl9idXR0b25zO1xuICB9XG59XG5cbiJdfQ==