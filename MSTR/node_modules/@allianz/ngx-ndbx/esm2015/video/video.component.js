/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
// note that this currently only supports youtube videos
export class NxVideoComponent {
    /**
     * @param {?} sanitizer
     * @param {?} _changeDetectorRef
     */
    constructor(sanitizer, _changeDetectorRef) {
        this.sanitizer = sanitizer;
        this._changeDetectorRef = _changeDetectorRef;
        this._videoId = null;
        this._altText = '';
        this._playButtonAriaLabel = '';
        this._previewImageSrc = null;
        this._showPlayerControls = true;
        this._allowFullScreen = true;
        this._interfaceLanguage = null;
        /**
         * \@docs-private
         */
        this.showPlayer = false;
    }
    /**
     * Sets the id of the YouTube video.
     * @param {?} value
     * @return {?}
     */
    set videoId(value) {
        if (this._videoId !== value) {
            this._videoId = value;
            this._changeDetectorRef.markForCheck();
        }
    }
    /**
     * @return {?}
     */
    get videoId() {
        return this._videoId;
    }
    /**
     * Sets the value of the alt attribute for the preview image.
     * @param {?} value
     * @return {?}
     */
    set altText(value) {
        if (this._altText !== value) {
            this._altText = value;
            this._changeDetectorRef.markForCheck();
        }
    }
    /**
     * @return {?}
     */
    get altText() {
        return this._altText;
    }
    /**
     * Sets the value of the aria-label attribute on the play button (Default: Play Video).
     * @param {?} value
     * @return {?}
     */
    set nxPlayButtonAriaLabel(value) {
        if (this._playButtonAriaLabel !== value) {
            this._playButtonAriaLabel = value;
            this._changeDetectorRef.markForCheck();
        }
    }
    /**
     * @return {?}
     */
    get nxPlayButtonAriaLabel() {
        return this._playButtonAriaLabel;
    }
    /**
     * Sets the preview image. If this is not provided, an image from YouTube will be used as default.
     * @param {?} value
     * @return {?}
     */
    set previewImageSrc(value) {
        if (this._previewImageSrc !== value) {
            this._previewImageSrc = value;
            this._changeDetectorRef.markForCheck();
        }
    }
    /**
     * @return {?}
     */
    get previewImageSrc() {
        return this._previewImageSrc;
    }
    /**
     * Sets player controls. If set to false, player controls are not available.
     * @param {?} value
     * @return {?}
     */
    set showPlayerControls(value) {
        this._showPlayerControls = coerceBooleanProperty(value);
        this._changeDetectorRef.markForCheck();
    }
    /**
     * @return {?}
     */
    get showPlayerControls() {
        return this._showPlayerControls;
    }
    /**
     * Sets fullscreen option. If set to false, fullscreen option is not available.
     * @param {?} value
     * @return {?}
     */
    set allowFullScreen(value) {
        this._allowFullScreen = coerceBooleanProperty(value);
        this._changeDetectorRef.markForCheck();
    }
    /**
     * @return {?}
     */
    get allowFullScreen() {
        return this._allowFullScreen;
    }
    /**
     * Sets interface language. Can be used to override the interface language determined by YouTube.
     * @param {?} value
     * @return {?}
     */
    set interfaceLanguage(value) {
        if (this._interfaceLanguage !== value) {
            this._interfaceLanguage = value;
            this._changeDetectorRef.markForCheck();
        }
    }
    /**
     * @return {?}
     */
    get interfaceLanguage() {
        return this._interfaceLanguage;
    }
    /**
     * \@docs-private
     * @return {?}
     */
    select() {
        this.showPlayer = true;
        this._changeDetectorRef.markForCheck();
    }
    /**
     * Returns the safe resource URL of the YouTube video, given video id.
     * @return {?}
     */
    get videoSrc() {
        /** @type {?} */
        let url = `https://www.youtube.com/embed/${this.videoId}?rel=0&showinfo=0&autoplay=1`;
        if (!this.showPlayerControls) {
            url += '&controls=0';
        }
        if (!this.allowFullScreen) {
            url += '&fs=0';
        }
        if (this.interfaceLanguage) {
            url += `&hl=${this.interfaceLanguage}`;
        }
        return this.sanitizer.bypassSecurityTrustResourceUrl(url);
    }
    /**
     * Returns the preview image source URL, given video id.
     * @return {?}
     */
    get imgSrc() {
        return this.previewImageSrc ? this.previewImageSrc : `https://img.youtube.com/vi/${this.videoId}/sddefault.jpg`;
    }
    /**
     * Returns the labels for the control buttons.
     * @return {?}
     */
    get playButtonAriaLabel() {
        /** @type {?} */
        const defaultLabel = this.altText ? `${this.altText} - Play Video` : 'Play Video';
        return this.nxPlayButtonAriaLabel ? this.nxPlayButtonAriaLabel : defaultLabel;
    }
}
NxVideoComponent.decorators = [
    { type: Component, args: [{
                selector: 'nx-video',
                template: "<div class=\"nx-video\">\n  <div class=\"nx-video__iframe\">\n\n    <div *ngIf=\"!showPlayer\">\n\n      <button class=\"nx-video__play-button\"\n              (click)=\"select()\"\n              [attr.aria-label]=\"playButtonAriaLabel\"\n              (keydown.enter)=\"select()\">\n      </button>\n      <img [src]=\"imgSrc\" class=\"nx-video__thumbnail\"\n           [alt]=\"altText\"\n           (click)=\"select()\"\n           (keydown.enter)=\"select()\">\n\n    </div>\n    <div *ngIf=\"videoId && showPlayer\">\n      <iframe title=\"video\" class=\"nx-video__iframe\" [attr.allowfullscreen]=\"allowFullScreen\" [src]=\"videoSrc\"></iframe>\n    </div>\n\n  </div>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [".nx-video{position:relative;padding-bottom:56.25%;overflow:hidden;width:100%;height:auto}.nx-video__iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:none}.nx-video__thumbnail{position:absolute;cursor:pointer;width:100%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:.7}.nx-video__play-button{border:none;background:url(play-button.svg) center no-repeat;cursor:pointer;position:absolute;width:88px;height:56px;z-index:1}.nx-video__play-button::-moz-focus-inner{border:0}.nx-video__play-button,.nx-video__play-button:before{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}"]
            }] }
];
/** @nocollapse */
NxVideoComponent.ctorParameters = () => [
    { type: DomSanitizer },
    { type: ChangeDetectorRef }
];
NxVideoComponent.propDecorators = {
    videoId: [{ type: Input, args: ['nxVideoId',] }],
    altText: [{ type: Input, args: ['nxAltText',] }],
    nxPlayButtonAriaLabel: [{ type: Input, args: ['nxPlayButtonAriaLabel',] }],
    previewImageSrc: [{ type: Input, args: ['nxPreviewImageSrc',] }],
    showPlayerControls: [{ type: Input, args: ['nxShowPlayerControls',] }],
    allowFullScreen: [{ type: Input, args: ['nxAllowFullScreen',] }],
    interfaceLanguage: [{ type: Input, args: ['nxInterfaceLanguage',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._videoId;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._altText;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._playButtonAriaLabel;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._previewImageSrc;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._showPlayerControls;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._allowFullScreen;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._interfaceLanguage;
    /**
     * \@docs-private
     * @type {?}
     */
    NxVideoComponent.prototype.showPlayer;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype.sanitizer;
    /**
     * @type {?}
     * @private
     */
    NxVideoComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlkZW8uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsbGlhbnovbmd4LW5kYngvIiwic291cmNlcyI6WyJ2aWRlby92aWRlby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzlELE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLHVCQUF1QixFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdGLE9BQU8sRUFBRSxZQUFZLEVBQW1CLE1BQU0sMkJBQTJCLENBQUM7QUFTMUUsd0RBQXdEO0FBQ3hELE1BQU0sT0FBTyxnQkFBZ0I7Ozs7O0lBbUczQixZQUFvQixTQUF1QixFQUFVLGtCQUFxQztRQUF0RSxjQUFTLEdBQVQsU0FBUyxDQUFjO1FBQVUsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQWpHbEYsYUFBUSxHQUFXLElBQUksQ0FBQztRQWN4QixhQUFRLEdBQVcsRUFBRSxDQUFDO1FBY3RCLHlCQUFvQixHQUFXLEVBQUUsQ0FBQztRQWNsQyxxQkFBZ0IsR0FBVyxJQUFJLENBQUM7UUFjaEMsd0JBQW1CLEdBQVksSUFBSSxDQUFDO1FBWXBDLHFCQUFnQixHQUFZLElBQUksQ0FBQztRQVlqQyx1QkFBa0IsR0FBVyxJQUFJLENBQUM7Ozs7UUFlMUMsZUFBVSxHQUFHLEtBQUssQ0FBQztJQUUwRSxDQUFDOzs7Ozs7SUE5RjlGLElBQ0ksT0FBTyxDQUFDLEtBQWE7UUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLEtBQUssRUFBRTtZQUMzQixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDeEM7SUFDSCxDQUFDOzs7O0lBQ0QsSUFBSSxPQUFPO1FBQ1QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7Ozs7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QUFJLE1BQU07UUFDUixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLDhCQUE4QixJQUFJLENBQUMsT0FBTyxnQkFBZ0IsQ0FBQztJQUNsSCxDQUFDOzs7OztJQUdELElBQUksbUJBQW1COztjQUNmLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLGVBQWUsQ0FBQyxDQUFDLENBQUMsWUFBWTtRQUNqRixPQUFPLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7SUFDaEYsQ0FBQzs7O1lBM0lGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsVUFBVTtnQkFDcEIsd3JCQUFtQztnQkFDbkMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07O2FBRWhEOzs7O1lBUFEsWUFBWTtZQUQrQixpQkFBaUI7OztzQkFnQmxFLEtBQUssU0FBQyxXQUFXO3NCQWNqQixLQUFLLFNBQUMsV0FBVztvQ0FjakIsS0FBSyxTQUFDLHVCQUF1Qjs4QkFjN0IsS0FBSyxTQUFDLG1CQUFtQjtpQ0FjekIsS0FBSyxTQUFDLHNCQUFzQjs4QkFZNUIsS0FBSyxTQUFDLG1CQUFtQjtnQ0FZekIsS0FBSyxTQUFDLHFCQUFxQjs7Ozs7OztJQW5GNUIsb0NBQWdDOzs7OztJQWNoQyxvQ0FBOEI7Ozs7O0lBYzlCLGdEQUEwQzs7Ozs7SUFjMUMsNENBQXdDOzs7OztJQWN4QywrQ0FBNEM7Ozs7O0lBWTVDLDRDQUF5Qzs7Ozs7SUFZekMsOENBQTBDOzs7OztJQWUxQyxzQ0FBbUI7Ozs7O0lBRVAscUNBQStCOzs7OztJQUFFLDhDQUE2QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERvbVNhbml0aXplciwgU2FmZVJlc291cmNlVXJsIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ254LXZpZGVvJyxcbiAgdGVtcGxhdGVVcmw6ICd2aWRlby5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBzdHlsZVVybHM6IFsgJy4vdmlkZW8uY29tcG9uZW50LnNjc3MnIF0sXG59KVxuXG4vLyBub3RlIHRoYXQgdGhpcyBjdXJyZW50bHkgb25seSBzdXBwb3J0cyB5b3V0dWJlIHZpZGVvc1xuZXhwb3J0IGNsYXNzIE54VmlkZW9Db21wb25lbnQge1xuXG4gIHByaXZhdGUgX3ZpZGVvSWQ6IHN0cmluZyA9IG51bGw7XG5cbiAgLyoqIFNldHMgdGhlIGlkIG9mIHRoZSBZb3VUdWJlIHZpZGVvLiAqL1xuICBASW5wdXQoJ254VmlkZW9JZCcpXG4gIHNldCB2aWRlb0lkKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fdmlkZW9JZCAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX3ZpZGVvSWQgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgdmlkZW9JZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl92aWRlb0lkO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWx0VGV4dDogc3RyaW5nID0gJyc7XG5cbiAgLyoqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBhbHQgYXR0cmlidXRlIGZvciB0aGUgcHJldmlldyBpbWFnZS4gKi9cbiAgQElucHV0KCdueEFsdFRleHQnKVxuICBzZXQgYWx0VGV4dCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX2FsdFRleHQgIT09IHZhbHVlKSB7XG4gICAgICB0aGlzLl9hbHRUZXh0ID0gdmFsdWU7XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGFsdFRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fYWx0VGV4dDtcbiAgfVxuXG4gIHByaXZhdGUgX3BsYXlCdXR0b25BcmlhTGFiZWw6IHN0cmluZyA9ICcnO1xuXG4gIC8qKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgYXJpYS1sYWJlbCBhdHRyaWJ1dGUgb24gdGhlIHBsYXkgYnV0dG9uIChEZWZhdWx0OiBQbGF5IFZpZGVvKS4gKi9cbiAgQElucHV0KCdueFBsYXlCdXR0b25BcmlhTGFiZWwnKVxuICBzZXQgbnhQbGF5QnV0dG9uQXJpYUxhYmVsKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fcGxheUJ1dHRvbkFyaWFMYWJlbCAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX3BsYXlCdXR0b25BcmlhTGFiZWwgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgbnhQbGF5QnV0dG9uQXJpYUxhYmVsKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3BsYXlCdXR0b25BcmlhTGFiZWw7XG4gIH1cblxuICBwcml2YXRlIF9wcmV2aWV3SW1hZ2VTcmM6IHN0cmluZyA9IG51bGw7XG5cbiAgLyoqIFNldHMgdGhlIHByZXZpZXcgaW1hZ2UuIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkLCBhbiBpbWFnZSBmcm9tIFlvdVR1YmUgd2lsbCBiZSB1c2VkIGFzIGRlZmF1bHQuICovXG4gIEBJbnB1dCgnbnhQcmV2aWV3SW1hZ2VTcmMnKVxuICBzZXQgcHJldmlld0ltYWdlU3JjKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fcHJldmlld0ltYWdlU3JjICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fcHJldmlld0ltYWdlU3JjID0gdmFsdWU7XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgZ2V0IHByZXZpZXdJbWFnZVNyYygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9wcmV2aWV3SW1hZ2VTcmM7XG4gIH1cblxuICBwcml2YXRlIF9zaG93UGxheWVyQ29udHJvbHM6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8qKiBTZXRzIHBsYXllciBjb250cm9scy4gSWYgc2V0IHRvIGZhbHNlLCBwbGF5ZXIgY29udHJvbHMgYXJlIG5vdCBhdmFpbGFibGUuICovXG4gIEBJbnB1dCgnbnhTaG93UGxheWVyQ29udHJvbHMnKVxuICBzZXQgc2hvd1BsYXllckNvbnRyb2xzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2hvd1BsYXllckNvbnRyb2xzID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgc2hvd1BsYXllckNvbnRyb2xzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zaG93UGxheWVyQ29udHJvbHM7XG4gIH1cblxuICBwcml2YXRlIF9hbGxvd0Z1bGxTY3JlZW46IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8qKiBTZXRzIGZ1bGxzY3JlZW4gb3B0aW9uLiBJZiBzZXQgdG8gZmFsc2UsIGZ1bGxzY3JlZW4gb3B0aW9uIGlzIG5vdCBhdmFpbGFibGUuICovXG4gIEBJbnB1dCgnbnhBbGxvd0Z1bGxTY3JlZW4nKVxuICBzZXQgYWxsb3dGdWxsU2NyZWVuKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fYWxsb3dGdWxsU2NyZWVuID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgYWxsb3dGdWxsU2NyZWVuKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hbGxvd0Z1bGxTY3JlZW47XG4gIH1cblxuICBwcml2YXRlIF9pbnRlcmZhY2VMYW5ndWFnZTogc3RyaW5nID0gbnVsbDtcblxuICAvKiogU2V0cyBpbnRlcmZhY2UgbGFuZ3VhZ2UuIENhbiBiZSB1c2VkIHRvIG92ZXJyaWRlIHRoZSBpbnRlcmZhY2UgbGFuZ3VhZ2UgZGV0ZXJtaW5lZCBieSBZb3VUdWJlLiAqL1xuICBASW5wdXQoJ254SW50ZXJmYWNlTGFuZ3VhZ2UnKVxuICBzZXQgaW50ZXJmYWNlTGFuZ3VhZ2UodmFsdWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLl9pbnRlcmZhY2VMYW5ndWFnZSAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX2ludGVyZmFjZUxhbmd1YWdlID0gdmFsdWU7XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGludGVyZmFjZUxhbmd1YWdlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyZmFjZUxhbmd1YWdlO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgc2hvd1BsYXllciA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc2FuaXRpemVyOiBEb21TYW5pdGl6ZXIsIHByaXZhdGUgX2NoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge31cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBzZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5zaG93UGxheWVyID0gdHJ1ZTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gICAvKiogUmV0dXJucyB0aGUgc2FmZSByZXNvdXJjZSBVUkwgb2YgdGhlIFlvdVR1YmUgdmlkZW8sIGdpdmVuIHZpZGVvIGlkLiAgKi9cbiAgZ2V0IHZpZGVvU3JjKCk6IFNhZmVSZXNvdXJjZVVybCB7XG4gICAgbGV0IHVybCA9IGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8ke3RoaXMudmlkZW9JZH0/cmVsPTAmc2hvd2luZm89MCZhdXRvcGxheT0xYDtcbiAgICBpZiAoIXRoaXMuc2hvd1BsYXllckNvbnRyb2xzKSB7XG4gICAgICB1cmwgKz0gJyZjb250cm9scz0wJztcbiAgICB9XG4gICAgaWYgKCF0aGlzLmFsbG93RnVsbFNjcmVlbikge1xuICAgICAgdXJsICs9ICcmZnM9MCc7XG4gICAgfVxuICAgIGlmICh0aGlzLmludGVyZmFjZUxhbmd1YWdlKSB7XG4gICAgICB1cmwgKz0gYCZobD0ke3RoaXMuaW50ZXJmYWNlTGFuZ3VhZ2V9YDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RSZXNvdXJjZVVybCh1cmwpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIHByZXZpZXcgaW1hZ2Ugc291cmNlIFVSTCwgZ2l2ZW4gdmlkZW8gaWQuICovXG4gIGdldCBpbWdTcmMoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJldmlld0ltYWdlU3JjID8gdGhpcy5wcmV2aWV3SW1hZ2VTcmMgOiBgaHR0cHM6Ly9pbWcueW91dHViZS5jb20vdmkvJHt0aGlzLnZpZGVvSWR9L3NkZGVmYXVsdC5qcGdgO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIGxhYmVscyBmb3IgdGhlIGNvbnRyb2wgYnV0dG9ucy4gKi9cbiAgZ2V0IHBsYXlCdXR0b25BcmlhTGFiZWwoKSB7XG4gICAgY29uc3QgZGVmYXVsdExhYmVsID0gdGhpcy5hbHRUZXh0ID8gYCR7dGhpcy5hbHRUZXh0fSAtIFBsYXkgVmlkZW9gIDogJ1BsYXkgVmlkZW8nO1xuICAgIHJldHVybiB0aGlzLm54UGxheUJ1dHRvbkFyaWFMYWJlbCA/IHRoaXMubnhQbGF5QnV0dG9uQXJpYUxhYmVsIDogZGVmYXVsdExhYmVsO1xuICB9XG59XG4iXX0=