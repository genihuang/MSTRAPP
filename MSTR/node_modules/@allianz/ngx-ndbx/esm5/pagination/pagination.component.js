/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Inject, Input, Optional, Output, } from '@angular/core';
import { DefaultPaginationTexts, NX_PAGINATION_TEXTS } from './pagination-texts';
import { NxPaginationUtils } from './pagination-utils';
/**
 * \@docs-private
 * @record
 */
export function Page() { }
if (false) {
    /** @type {?} */
    Page.prototype.label;
    /** @type {?} */
    Page.prototype.value;
    /** @type {?} */
    Page.prototype.class;
}
var NxPaginationComponent = /** @class */ (function () {
    function NxPaginationComponent(paginationTexts, paginationUtilsService, _changeDetectorRef) {
        this.paginationUtilsService = paginationUtilsService;
        this._changeDetectorRef = _changeDetectorRef;
        this._type = 'simple';
        /**
         * \@docs-private
         */
        this.totalNumberPages = 0;
        /**
         * An event emitted when the previous page button is clicked.
         */
        this.nxGoPrev = new EventEmitter();
        /**
         * An event emitted when the next page button is clicked
         */
        this.nxGoNext = new EventEmitter();
        /**
         * An event emitted when a page number is clicked.
         * Provides the number of the page as parameter.
         */
        this.nxGoPage = new EventEmitter();
        this.paginationTexts = paginationTexts || DefaultPaginationTexts;
    }
    Object.defineProperty(NxPaginationComponent.prototype, "page", {
        get: /**
         * @return {?}
         */
        function () { return this._page; },
        /** Sets the current page. */
        set: /**
         * Sets the current page.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._page = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxPaginationComponent.prototype, "count", {
        get: /**
         * @return {?}
         */
        function () { return this._count; },
        /** Number of total items over all pages. */
        set: /**
         * Number of total items over all pages.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._count = value;
            this.totalNumberPages = this.calculateTotalPages();
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxPaginationComponent.prototype, "perPage", {
        get: /**
         * @return {?}
         */
        function () { return this._perPage; },
        /** Sets the number of items you want to show per page. */
        set: /**
         * Sets the number of items you want to show per page.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._perPage = value;
            this.totalNumberPages = this.calculateTotalPages();
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxPaginationComponent.prototype, "type", {
        get: /**
         * @return {?}
         */
        function () { return this._type; },
        /**
         * Determines the type of pagination.
         *
         * Values: simple | advanced, default: simple.
         */
        set: /**
         * Determines the type of pagination.
         *
         * Values: simple | advanced, default: simple.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._type = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.totalNumberPages = this.calculateTotalPages();
    };
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        if (this.type === 'advanced' && (!this.paginationTexts.last || !this.paginationTexts.first)) {
            console.warn('Please define aria labels for the last and first arrows.');
        }
    };
    /** Returns the number of the first page. */
    /**
     * Returns the number of the first page.
     * @return {?}
     */
    NxPaginationComponent.prototype.getMin = /**
     * Returns the number of the first page.
     * @return {?}
     */
    function () {
        return ((this._perPage * this._page) - this._perPage) + 1;
    };
    /** Returns the number of the last page. */
    /**
     * Returns the number of the last page.
     * @return {?}
     */
    NxPaginationComponent.prototype.getMax = /**
     * Returns the number of the last page.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var max = this._perPage * this._page;
        if (max > this._count) {
            max = this._count;
        }
        return max;
    };
    /** Returns the total number of pages */
    /**
     * Returns the total number of pages
     * @return {?}
     */
    NxPaginationComponent.prototype.calculateTotalPages = /**
     * Returns the total number of pages
     * @return {?}
     */
    function () {
        return Math.ceil(this._count / this._perPage) || 0;
    };
    /** Directs to the page with number n. */
    /**
     * Directs to the page with number n.
     * @param {?} n
     * @return {?}
     */
    NxPaginationComponent.prototype.onPage = /**
     * Directs to the page with number n.
     * @param {?} n
     * @return {?}
     */
    function (n) {
        this.nxGoPage.emit(n);
    };
    /** Directs to the previous page. */
    /**
     * Directs to the previous page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onPrev = /**
     * Directs to the previous page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationPreviousDisabled()) {
            this.nxGoPrev.emit();
        }
    };
    /** Directs to the next page. */
    /**
     * Directs to the next page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onNext = /**
     * Directs to the next page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationNextDisabled()) {
            this.nxGoNext.emit();
        }
    };
    /** Directs to the first page. */
    /**
     * Directs to the first page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onFirst = /**
     * Directs to the first page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationPreviousDisabled()) {
            this.onPage(1);
        }
    };
    /** Directs to the last page. */
    /**
     * Directs to the last page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onLast = /**
     * Directs to the last page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationNextDisabled()) {
            this.onPage(this.totalNumberPages);
        }
    };
    /** Returns if the current page is the last page. */
    /**
     * Returns if the current page is the last page.
     * @return {?}
     */
    NxPaginationComponent.prototype.lastPage = /**
     * Returns if the current page is the last page.
     * @return {?}
     */
    function () {
        return this._perPage * this._page >= this._count;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxPaginationComponent.prototype.getPages = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.paginationUtilsService.getPages(this._page, this.totalNumberPages);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    NxPaginationComponent.prototype.getPaginationItemClasses = /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    function (page) {
        /** @type {?} */
        var classes = {
            'is-ellipsis': page.label === '...',
            'nx-pagination__item--expanded-view': page.class === 'expanded-view'
        };
        return classes;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    NxPaginationComponent.prototype.getPaginationNumberClasses = /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    function (page) {
        /** @type {?} */
        var classes = {
            'is-active': page.value === this.page,
            'nx-pagination__ellipsis': page.label === '...',
            'nx-pagination__link': page.label !== '...'
        };
        return classes;
    };
    /** Returns true, if `nxCount` is greater than 0, else false. */
    /**
     * Returns true, if `nxCount` is greater than 0, else false.
     * @return {?}
     */
    NxPaginationComponent.prototype.isPaginationVisible = /**
     * Returns true, if `nxCount` is greater than 0, else false.
     * @return {?}
     */
    function () {
        return this.count > 0;
    };
    /** Returns true, if `nxCount` is greater than 0 and the type of pagination is 'simple', else false. */
    /**
     * Returns true, if `nxCount` is greater than 0 and the type of pagination is 'simple', else false.
     * @return {?}
     */
    NxPaginationComponent.prototype.isPaginationCompactVisible = /**
     * Returns true, if `nxCount` is greater than 0 and the type of pagination is 'simple', else false.
     * @return {?}
     */
    function () {
        return this.type.includes('simple') && this.count > 0;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxPaginationComponent.prototype.isPaginationContainerVisible = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.type.includes('advanced');
    };
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype._isPaginationPreviousDisabled = /**
     * @return {?}
     */
    function () {
        return this.page === this.getMin();
    };
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype._isPaginationNextDisabled = /**
     * @return {?}
     */
    function () {
        return this.page === this.totalNumberPages;
    };
    NxPaginationComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-pagination',
                    template: "<nav *ngIf=\"isPaginationVisible()\"  aria-label=\"Page navigation\" class=\"nx-pagination\" >\n  <ul *ngIf=\"isPaginationContainerVisible()\"  [attr.aria-label]=\"paginationTexts.ariaLabel\" class=\"nx-pagination__container\">\n    <li class=\"nx-pagination__item\">\n      <button\n        [attr.aria-label]=\"paginationTexts.first\"\n        [class.is-disabled]=\"_isPaginationPreviousDisabled()\"\n        [tabindex]=\"_isPaginationPreviousDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--first\"\n        (click)=\"onFirst()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-first\"></nx-icon>\n      </button>\n    </li>\n    <li class=\"nx-pagination__item nx-pagination__item-previous\">\n      <button\n        [attr.aria-label]=\"paginationTexts.previous\"\n        [class.is-disabled]=\"_isPaginationPreviousDisabled()\"\n        [tabindex]=\"_isPaginationPreviousDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--previous\"\n        (click)=\"onPrev()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-left\"></nx-icon>\n      </button>\n    </li>\n    <li *ngFor=\"let pageNum of getPages()\" class=\"nx-pagination__item\" [ngClass]=\"getPaginationItemClasses(pageNum)\">\n      <button class=\"nx-pagination--number\"\n        *ngIf=\"pageNum.label !== '...'\"\n        (click)=\"onPage(pageNum.value)\"\n        [attr.aria-curent]=\"pageNum.value === page\"\n        [ngClass]=\"getPaginationNumberClasses(pageNum)\">\n        {{ pageNum.label }}\n      </button>\n      <span *ngIf=\"pageNum.label === '...'\">\n        {{ pageNum.label }}\n      </span>\n    </li>\n    <li class=\"nx-pagination__item nx-pagination__item-next\">\n      <button\n        [attr.aria-label]=\"paginationTexts.next\"\n        [class.is-disabled]=\"_isPaginationNextDisabled()\"\n        [tabindex]=\"_isPaginationNextDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--next\"\n        (click)=\"onNext()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-right\"></nx-icon>\n      </button>\n    </li>\n    <li class=\"nx-pagination__item\">\n      <button\n        [attr.aria-label]=\"paginationTexts.last\"\n        [class.is-disabled]=\"_isPaginationNextDisabled()\"\n        [tabindex]=\"_isPaginationNextDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--last\"\n        (click)=\"onLast()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-last\"></nx-icon>\n      </button>\n    </li>\n  </ul>\n</nav>\n<nav *ngIf=\"isPaginationCompactVisible()\" [attr.aria-label]=\"paginationTexts.ariaLabel\" class=\"nx-pagination-compact\" >\n  <button [attr.aria-label]=\"paginationTexts.previous\"\n    class=\"nx-pagination-compact__previous\"\n    [class.is-disabled]=\"_isPaginationPreviousDisabled()\"\n    [tabindex]=\"_isPaginationPreviousDisabled() ? -1 : 0\"\n\n    (click)=\"onPrev()\">\n    <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-left\"></nx-icon>\n    <span class=\"nx-pagination-compact__direction-label\">\n      {{ paginationTexts.previous }}\n    </span>\n  </button>\n  <div class=\"nx-pagination-compact__display\">\n      <span class=\"nx-pagination-compact__current-page\">{{ page }}</span>\n      <span class=\"nx-pagination-compact__page-separator\"> {{ paginationTexts.ofLabel }} </span>\n      <span class=\"nx-pagination-compact__total-pages\">{{ totalNumberPages }}</span>\n  </div>\n  <button\n    class=\"nx-pagination-compact__next\"\n    [class.is-disabled]=\"_isPaginationNextDisabled()\"\n    [tabindex]=\"_isPaginationNextDisabled() ? -1 : 0\"\n    [attr.aria-label]=\"paginationTexts.next\"\n    (click)=\"onNext()\">\n    <span class=\"nx-pagination-compact__direction-label\"> {{ paginationTexts.next }} </span>\n    <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-right\"></nx-icon>\n  </button>\n</nav>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [":host button:focus{outline:0}:host button::-moz-focus-inner{border:0}.nx-pagination__container{display:flex;font-size:16px;margin:8px 0;padding:0}@media (min-width:704px){.nx-pagination__container{margin:8px 0 40px}}.nx-pagination__item{margin:0 16px;list-style:none}.nx-pagination__item:first-child,.nx-pagination__item:last-child{margin:0}.nx-pagination__item.is-ellipsis{font-weight:700}.nx-pagination__item--expanded-view{display:block}.nx-pagination__link{color:#006192;font-weight:600;padding:0;text-decoration:none;background-color:#fff;border:0;cursor:pointer}.nx-pagination__link.is-active{color:#414141;font-weight:700;cursor:default}nx-icon.nx-pagination__arrow{font-size:24px}.nx-pagination-compact{display:flex;font-size:16px;margin:16px 0;padding:0}@media (min-width:704px){.nx-pagination-compact{margin:40px 0}}.nx-pagination-compact__display{color:#414141;display:flex;line-height:24px}.nx-pagination-compact__current-page{font-weight:700;margin-right:8px}.nx-pagination-compact__total-pages{margin-left:8px}.nx-pagination-compact__next,.nx-pagination-compact__previous,.nx-pagination__arrow-first,.nx-pagination__arrow-last{color:#006192;font-weight:600;text-decoration:none;text-transform:uppercase;display:flex;align-items:center;padding:0;background-color:#fff;cursor:pointer;border:0}.nx-pagination-compact__previous{margin-right:32px}.nx-pagination-compact__next{margin-left:32px}.nx-pagination-compact__direction-label{display:block;letter-spacing:1px}.nx-pagination-compact__direction-label:first-child{margin-right:8px}.nx-pagination-compact__direction-label:last-child{margin-left:8px}.nx-pagination-compact__next.is-disabled,.nx-pagination-compact__previous.is-disabled,.nx-pagination__link.is-disabled{color:rgba(0,97,146,.4);cursor:not-allowed}:host-context([data-whatinput=keyboard]) .nx-pagination--number:focus,:host-context([data-whatinput=keyboard]) .nx-pagination-compact__next:focus,:host-context([data-whatinput=keyboard]) .nx-pagination-compact__previous:focus,:host-context([data-whatinput=keyboard]) .nx-pagination__link:focus{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;border-radius:4px}.nx-pagination__link--first,.nx-pagination__link--last,.nx-pagination__link--next,.nx-pagination__link--previous{display:flex;align-items:center}.nx-pagination__item-next{margin-right:8px}.nx-pagination__item-previous{margin-left:8px}"]
                }] }
    ];
    /** @nocollapse */
    NxPaginationComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [NX_PAGINATION_TEXTS,] }] },
        { type: NxPaginationUtils },
        { type: ChangeDetectorRef }
    ]; };
    NxPaginationComponent.propDecorators = {
        page: [{ type: Input, args: ['nxPage',] }],
        count: [{ type: Input, args: ['nxCount',] }],
        perPage: [{ type: Input, args: ['nxPerPage',] }],
        type: [{ type: Input, args: ['nxType',] }],
        nxGoPrev: [{ type: Output }],
        nxGoNext: [{ type: Output }],
        nxGoPage: [{ type: Output }]
    };
    return NxPaginationComponent;
}());
export { NxPaginationComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._page;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._count;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._perPage;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._type;
    /**
     * \@docs-private
     * @type {?}
     */
    NxPaginationComponent.prototype.paginationTexts;
    /**
     * \@docs-private
     * @type {?}
     */
    NxPaginationComponent.prototype.totalNumberPages;
    /**
     * An event emitted when the previous page button is clicked.
     * @type {?}
     */
    NxPaginationComponent.prototype.nxGoPrev;
    /**
     * An event emitted when the next page button is clicked
     * @type {?}
     */
    NxPaginationComponent.prototype.nxGoNext;
    /**
     * An event emitted when a page number is clicked.
     * Provides the number of the page as parameter.
     * @type {?}
     */
    NxPaginationComponent.prototype.nxGoPage;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype.paginationUtilsService;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuei9uZ3gtbmRieC8iLCJzb3VyY2VzIjpbInBhZ2luYXRpb24vcGFnaW5hdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxZQUFZLEVBQ1osTUFBTSxFQUNOLEtBQUssRUFFTCxRQUFRLEVBQ1IsTUFBTSxHQUVQLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxzQkFBc0IsRUFBb0IsbUJBQW1CLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNuRyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQzs7Ozs7QUFHdkQsMEJBSUM7OztJQUhDLHFCQUFjOztJQUNkLHFCQUFXOztJQUNYLHFCQUFjOztBQUdoQjtJQXNFRSwrQkFDNkMsZUFBaUMsRUFDbEUsc0JBQXlDLEVBQ3pDLGtCQUFxQztRQURyQywyQkFBc0IsR0FBdEIsc0JBQXNCLENBQW1CO1FBQ3pDLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBbUI7UUE5RHpDLFVBQUssR0FBVyxRQUFRLENBQUM7Ozs7UUFNakMscUJBQWdCLEdBQVcsQ0FBQyxDQUFDOzs7O1FBMENuQixhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQzs7OztRQUdwQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQzs7Ozs7UUFNcEMsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7UUFNOUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLElBQUksc0JBQXNCLENBQUM7SUFDbEUsQ0FBQztJQXhERixzQkFBSSx1Q0FBSTs7OztRQUFSLGNBQXFCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFFekMsNkJBQTZCOzs7Ozs7UUFDN0IsVUFDUyxLQUFhO1lBQ3BCLElBQUksQ0FB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ZCxLQUFLLFNBQUMsU0FBUzswQkFTZixLQUFLLFNBQUMsV0FBVzt1QkFhakIsS0FBSyxTQUFDLFFBQVE7MkJBT2QsTUFBTTsyQkFHTixNQUFNOzJCQU1OLE1BQU07O0lBMEhULDRCQUFDO0NBQUEsQUE5TEQsSUE4TEM7U0F2TFkscUJBQXFCOzs7Ozs7SUFDaEMsc0NBQXNCOzs7OztJQUN0Qix1Q0FBdUI7Ozs7O0lBQ3ZCLHlDQUF5Qjs7Ozs7SUFDekIsc0NBQWlDOzs7OztJQUdqQyxnREFBa0M7Ozs7O0lBR2xDLGlEQUE2Qjs7Ozs7SUEwQzdCLHlDQUE4Qzs7Ozs7SUFHOUMseUNBQThDOzs7Ozs7SUFNOUMseUNBQWdEOzs7OztJQUk1Qyx1REFBaUQ7Ozs7O0lBQ2pELG1EQUE2QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFdmVudEVtaXR0ZXIsXG4gIEluamVjdCxcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3B0aW9uYWwsXG4gIE91dHB1dCxcbiAgQWZ0ZXJDb250ZW50SW5pdCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IERlZmF1bHRQYWdpbmF0aW9uVGV4dHMsIElQYWdpbmF0aW9uVGV4dHMsIE5YX1BBR0lOQVRJT05fVEVYVFMgfSBmcm9tICcuL3BhZ2luYXRpb24tdGV4dHMnO1xuaW1wb3J0IHsgTnhQYWdpbmF0aW9uVXRpbHMgfSBmcm9tICcuL3BhZ2luYXRpb24tdXRpbHMnO1xuXG4vKiogQGRvY3MtcHJpdmF0ZSAqL1xuZXhwb3J0IGludGVyZmFjZSBQYWdlIHtcbiAgbGFiZWw6IHN0cmluZztcbiAgdmFsdWU6IGFueTtcbiAgY2xhc3M6IHN0cmluZztcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbngtcGFnaW5hdGlvbicsXG4gIHRlbXBsYXRlVXJsOiAnLi9wYWdpbmF0aW9uLmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0eWxlVXJsczogWyAnLi9wYWdpbmF0aW9uLmNvbXBvbmVudC5zY3NzJyBdLFxufSlcblxuZXhwb3J0IGNsYXNzIE54UGFnaW5hdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCB7XG4gIHByaXZhdGUgX3BhZ2U6IG51bWJlcjtcbiAgcHJpdmF0ZSBfY291bnQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBfcGVyUGFnZTogbnVtYmVyO1xuICBwcml2YXRlIF90eXBlOiBzdHJpbmcgPSAnc2ltcGxlJztcblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBwYWdpbmF0aW9uVGV4dHM6IElQYWdpbmF0aW9uVGV4dHM7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgdG90YWxOdW1iZXJQYWdlczogbnVtYmVyID0gMDtcblxuICBnZXQgcGFnZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fcGFnZTsgfVxuXG4gIC8qKiBTZXRzIHRoZSBjdXJyZW50IHBhZ2UuICovXG4gIEBJbnB1dCgnbnhQYWdlJykgLy8gdGhlIGN1cnJlbnQgcGFnZVxuICBzZXQgcGFnZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fcGFnZSA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBjb3VudCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY291bnQ7IH1cblxuICAvKiogTnVtYmVyIG9mIHRvdGFsIGl0ZW1zIG92ZXIgYWxsIHBhZ2VzLiAqL1xuICBASW5wdXQoJ254Q291bnQnKSAvLyBob3cgbWFueSB0b3RhbCBpdGVtcyB0aGVyZSBhcmUgaW4gYWxsIHBhZ2VzXG4gIHNldCBjb3VudCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY291bnQgPSB2YWx1ZTtcbiAgICB0aGlzLnRvdGFsTnVtYmVyUGFnZXMgPSAgdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzKCk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHBlclBhZ2UoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3BlclBhZ2U7IH1cblxuICAvKiogU2V0cyB0aGUgbnVtYmVyIG9mIGl0ZW1zIHlvdSB3YW50IHRvIHNob3cgcGVyIHBhZ2UuICovXG4gIEBJbnB1dCgnbnhQZXJQYWdlJykgLy8gaG93IG1hbnkgaXRlbXMgd2Ugd2FudCB0byBzaG93IHBlciBwYWdlXG4gIHNldCBwZXJQYWdlKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9wZXJQYWdlID0gdmFsdWU7XG4gICAgdGhpcy50b3RhbE51bWJlclBhZ2VzID0gIHRoaXMuY2FsY3VsYXRlVG90YWxQYWdlcygpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCB0eXBlKCk6IHN0cmluZyB7IHJldHVybiB0aGlzLl90eXBlOyB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIHR5cGUgb2YgcGFnaW5hdGlvbi5cbiAgICpcbiAgICogVmFsdWVzOiBzaW1wbGUgfMKgYWR2YW5jZWQsIGRlZmF1bHQ6IHNpbXBsZS5cbiAgICovXG4gIEBJbnB1dCgnbnhUeXBlJylcbiAgc2V0IHR5cGUodmFsdWU6IHN0cmluZykgeyAvLyB0eXBlIGFkdmFuY2VkIG9yIHNpbXBsZVxuICAgIHRoaXMuX3R5cGUgPSB2YWx1ZTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKiBBbiBldmVudCBlbWl0dGVkIHdoZW4gdGhlIHByZXZpb3VzIHBhZ2UgYnV0dG9uIGlzIGNsaWNrZWQuICovXG4gIEBPdXRwdXQoKSBueEdvUHJldiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICAvKiogQW4gZXZlbnQgZW1pdHRlZCB3aGVuIHRoZSBuZXh0IHBhZ2UgYnV0dG9uIGlzIGNsaWNrZWQgKi9cbiAgQE91dHB1dCgpIG54R29OZXh0ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIC8qKlxuICAgKiBBbiBldmVudCBlbWl0dGVkIHdoZW4gYSBwYWdlIG51bWJlciBpcyBjbGlja2VkLlxuICAgKiBQcm92aWRlcyB0aGUgbnVtYmVyIG9mIHRoZSBwYWdlIGFzIHBhcmFtZXRlci5cbiAgICovXG4gIEBPdXRwdXQoKSBueEdvUGFnZSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgQE9wdGlvbmFsKCkgQEluamVjdChOWF9QQUdJTkFUSU9OX1RFWFRTKSBwYWdpbmF0aW9uVGV4dHM6IElQYWdpbmF0aW9uVGV4dHMsXG4gICAgICBwcml2YXRlIHBhZ2luYXRpb25VdGlsc1NlcnZpY2U6IE54UGFnaW5hdGlvblV0aWxzLFxuICAgICAgcHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgdGhpcy5wYWdpbmF0aW9uVGV4dHMgPSBwYWdpbmF0aW9uVGV4dHMgfHwgRGVmYXVsdFBhZ2luYXRpb25UZXh0cztcbiAgIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnRvdGFsTnVtYmVyUGFnZXMgPSAgdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzKCk7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ2FkdmFuY2VkJyAmJiAoIXRoaXMucGFnaW5hdGlvblRleHRzLmxhc3QgfHwgIXRoaXMucGFnaW5hdGlvblRleHRzLmZpcnN0KSkge1xuICAgICAgY29uc29sZS53YXJuKCdQbGVhc2UgZGVmaW5lIGFyaWEgbGFiZWxzIGZvciB0aGUgbGFzdCBhbmQgZmlyc3QgYXJyb3dzLicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIGZpcnN0IHBhZ2UuICovXG4gIGdldE1pbigpOiBudW1iZXIge1xuICAgIHJldHVybiAoKHRoaXMuX3BlclBhZ2UgKiB0aGlzLl9wYWdlKSAtIHRoaXMuX3BlclBhZ2UpICsgMTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIGxhc3QgcGFnZS4gKi9cbiAgZ2V0TWF4KCk6IG51bWJlciB7XG4gICAgbGV0IG1heCA9IHRoaXMuX3BlclBhZ2UgKiB0aGlzLl9wYWdlO1xuICAgIGlmIChtYXggPiB0aGlzLl9jb3VudCkge1xuICAgICAgbWF4ID0gdGhpcy5fY291bnQ7XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIHBhZ2VzICovXG4gIGNhbGN1bGF0ZVRvdGFsUGFnZXMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuX2NvdW50IC8gdGhpcy5fcGVyUGFnZSkgfHwgMDtcbiAgfVxuXG4gIC8qKiBEaXJlY3RzIHRvIHRoZSBwYWdlIHdpdGggbnVtYmVyIG4uICovXG4gIG9uUGFnZShuOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm54R29QYWdlLmVtaXQobik7XG4gIH1cblxuICAvKiogRGlyZWN0cyB0byB0aGUgcHJldmlvdXMgcGFnZS4gKi9cbiAgb25QcmV2KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5faXNQYWdpbmF0aW9uUHJldmlvdXNEaXNhYmxlZCgpKSB7XG4gICAgICB0aGlzLm54R29QcmV2LmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICAvKiogRGlyZWN0cyB0byB0aGUgbmV4dCBwYWdlLiAqL1xuICBvbk5leHQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pc1BhZ2luYXRpb25OZXh0RGlzYWJsZWQoKSkge1xuICAgICAgdGhpcy5ueEdvTmV4dC5lbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIERpcmVjdHMgdG8gdGhlIGZpcnN0IHBhZ2UuICovXG4gIG9uRmlyc3QoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1BhZ2luYXRpb25QcmV2aW91c0Rpc2FibGVkKCkpIHtcbiAgICAgIHRoaXMub25QYWdlKDEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBEaXJlY3RzIHRvIHRoZSBsYXN0IHBhZ2UuICovXG4gIG9uTGFzdCgpIHtcbiAgICBpZiAoIXRoaXMuX2lzUGFnaW5hdGlvbk5leHREaXNhYmxlZCgpKSB7XG4gICAgICB0aGlzLm9uUGFnZSh0aGlzLnRvdGFsTnVtYmVyUGFnZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgdGhlIGxhc3QgcGFnZS4gKi9cbiAgbGFzdFBhZ2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3BlclBhZ2UgKiB0aGlzLl9wYWdlID49IHRoaXMuX2NvdW50O1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZ2V0UGFnZXMoKTogUGFnZVtdIHtcbiAgICByZXR1cm4gdGhpcy5wYWdpbmF0aW9uVXRpbHNTZXJ2aWNlLmdldFBhZ2VzKHRoaXMuX3BhZ2UsIHRoaXMudG90YWxOdW1iZXJQYWdlcyk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBnZXRQYWdpbmF0aW9uSXRlbUNsYXNzZXMocGFnZTogUGFnZSk6IE9iamVjdCB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHtcbiAgICAgICdpcy1lbGxpcHNpcyc6IHBhZ2UubGFiZWwgPT09ICcuLi4nLFxuICAgICAgJ254LXBhZ2luYXRpb25fX2l0ZW0tLWV4cGFuZGVkLXZpZXcnOiBwYWdlLmNsYXNzID09PSAnZXhwYW5kZWQtdmlldydcbiAgICB9O1xuICAgIHJldHVybiBjbGFzc2VzO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZ2V0UGFnaW5hdGlvbk51bWJlckNsYXNzZXMocGFnZTogUGFnZSk6IE9iamVjdCB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHtcbiAgICAgICdpcy1hY3RpdmUnOiBwYWdlLnZhbHVlID09PSB0aGlzLnBhZ2UsXG4gICAgICAnbngtcGFnaW5hdGlvbl9fZWxsaXBzaXMnOiBwYWdlLmxhYmVsID09PSAnLi4uJyxcbiAgICAgICdueC1wYWdpbmF0aW9uX19saW5rJzogcGFnZS5sYWJlbCAhPT0gJy4uLidcbiAgICB9O1xuICAgIHJldHVybiBjbGFzc2VzO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdHJ1ZSwgaWYgYG54Q291bnRgIGlzIGdyZWF0ZXIgdGhhbiAwLCBlbHNlIGZhbHNlLiAqL1xuICBpc1BhZ2luYXRpb25WaXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvdW50ID4gMDtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRydWUsIGlmIGBueENvdW50YCBpcyBncmVhdGVyIHRoYW4gMCBhbmQgdGhlIHR5cGUgb2YgcGFnaW5hdGlvbiBpcyAnc2ltcGxlJywgZWxzZSBmYWxzZS4gKi9cbiAgaXNQYWdpbmF0aW9uQ29tcGFjdFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudHlwZS5pbmNsdWRlcygnc2ltcGxlJykgJiYgdGhpcy5jb3VudCA+IDA7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBpc1BhZ2luYXRpb25Db250YWluZXJWaXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnR5cGUuaW5jbHVkZXMoJ2FkdmFuY2VkJyk7XG4gIH1cblxuICBfaXNQYWdpbmF0aW9uUHJldmlvdXNEaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlID09PSB0aGlzLmdldE1pbigpO1xuICB9XG5cbiAgX2lzUGFnaW5hdGlvbk5leHREaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlID09PSB0aGlzLnRvdGFsTnVtYmVyUGFnZXM7XG4gIH1cbn1cbiJdfQ==