/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { NxNumberStepperIntl } from './number-stepper-intl';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { mapClassNames, pad } from '@allianz/ngx-ndbx/utils';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, Input, Output, Renderer2, ViewChild } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';
import { MappedStyles } from '@allianz/ngx-ndbx/core';
import { NxAutoResizeDirective } from './auto-resize.directive';
import { Decimal } from 'decimal.js';
/** @type {?} */
var SIZE_MAPPING = {
    big: 'nx-stepper--big',
    normal: ''
};
/** @type {?} */
var STYLE_MAPPING = {
    regular: '',
    bold: 'nx-stepper__input--bold',
    light: 'nx-stepper__input--light'
};
/** @type {?} */
var DEFAULT_CLASSES = ['nx-stepper'];
/** @type {?} */
var INPUT_CLASSES = ['nx-stepper__input'];
/** @type {?} */
var ALLOWED_CHARACTERS = new RegExp(/^-?[0-9]\d*(\.\d+)?$/g);
/** @type {?} */
var CUSTOM_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return NxNumberStepperComponent; })),
    multi: true
};
/** @type {?} */
var CUSTOM_VALIDATOR = {
    provide: NG_VALIDATORS,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return NxNumberStepperComponent; })),
    multi: true
};
/** @type {?} */
var nextUniqueId = 0;
var NxNumberStepperComponent = /** @class */ (function (_super) {
    tslib_1.__extends(NxNumberStepperComponent, _super);
    function NxNumberStepperComponent(_changeDetectorRef, _renderer, _elementRef, _intl) {
        var _this = _super.call(this, SIZE_MAPPING, DEFAULT_CLASSES, _elementRef, _renderer) || this;
        _this._changeDetectorRef = _changeDetectorRef;
        _this._intl = _intl;
        _this._step = 1;
        _this._min = 0;
        _this._max = 100;
        _this._value = 0;
        _this._label = null;
        _this._resize = false;
        _this._negative = false;
        _this._leadingZero = true;
        /**
         * \@docs-private
         */
        _this.inputClassNames = mapClassNames('regular', INPUT_CLASSES, STYLE_MAPPING);
        /**
         * \@docs-private
         */
        _this.inputId = "nx-number-stepper-" + nextUniqueId++;
        /**
         * \@docs-private
         */
        _this.ariaDescribedBy = null;
        /**
         * An event emitted on value change.
         */
        _this.valueChange = new EventEmitter();
        _this.onChangeCallback = (/**
         * @param {?} _
         * @return {?}
         */
        function (_) { });
        _this.onTouchedCallback = (/**
         * @return {?}
         */
        function () { });
        _this._intlSubscription = _this._intl.changes.subscribe((/**
         * @return {?}
         */
        function () { return _this._changeDetectorRef.markForCheck(); }));
        return _this;
    }
    Object.defineProperty(NxNumberStepperComponent.prototype, "resize", {
        get: /**
         * @return {?}
         */
        function () {
            return this._resize;
        },
        /** Whether the input should be resized. Default: false */
        set: /**
         * Whether the input should be resized. Default: false
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._resize = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "label", {
        get: /**
         * @return {?}
         */
        function () {
            return this._label;
        },
        /** Defines the the label shown above the stepper input. */
        set: /**
         * Defines the the label shown above the stepper input.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._label !== value) {
                this._label = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "style", {
        get: /**
         * @return {?}
         */
        function () {
            return this._style;
        },
        /**
         * Defines the font weight of the input.
         *
         * Possible values: regular, bold, light. Default value: regular
         *
         * @deprecated The style input is not available anymore, only default font-weight should be used.
         * @deletion-target 8.0.0
         */
        set: /**
         * Defines the font weight of the input.
         *
         * Possible values: regular, bold, light. Default value: regular
         *
         * @deprecated The style input is not available anymore, only default font-weight should be used.
         * \@deletion-target 8.0.0
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._style === value) {
                return;
            }
            this._style = value;
            this.inputClassNames = mapClassNames(value, INPUT_CLASSES, STYLE_MAPPING);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "step", {
        get: /**
         * @return {?}
         */
        function () {
            return this._step;
        },
        /** Sets the step size. Default: 1 */
        set: /**
         * Sets the step size. Default: 1
         * @param {?} value
         * @return {?}
         */
        function (value) {
            // only internal changes no need to call markForCheck
            this._step = Number(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "min", {
        get: /**
         * @return {?}
         */
        function () {
            return this._min;
        },
        /** Sets the minimum accepted number. Default: 0 */
        set: /**
         * Sets the minimum accepted number. Default: 0
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._min = Number(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "max", {
        get: /**
         * @return {?}
         */
        function () {
            return this._max;
        },
        /** Sets the maximum accepted number. Default: 100 */
        set: /**
         * Sets the maximum accepted number. Default: 100
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._max = Number(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        /** Sets the value of the number-stepper. */
        set: /**
         * Sets the value of the number-stepper.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._value = value;
            if (this._value !== null) {
                this.setInputValue(this._value);
            }
            else {
                this.setInputValue(0);
            }
            this.triggerResize();
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "negative", {
        get: /**
         * @return {?}
         */
        function () {
            return this._negative;
        },
        /** Whether the negative set of styling should be used. */
        set: /**
         * Whether the negative set of styling should be used.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._negative !== value) {
                this._negative = coerceBooleanProperty(value);
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxNumberStepperComponent.prototype, "leadingZero", {
        get: /**
         * @return {?}
         */
        function () {
            return this._leadingZero;
        },
        /** Whether the number stepper value should have a leading zero.
         *
         * Default value is true.
         */
        set: /**
         * Whether the number stepper value should have a leading zero.
         *
         * Default value is true.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._leadingZero !== value) {
                this._leadingZero = coerceBooleanProperty(value);
                this.setInputValue(this.value);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NxNumberStepperComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.setInputValue(this._value);
    };
    /**
     * @return {?}
     */
    NxNumberStepperComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // defer to prevent checked after change errors
        if (this.resize) {
            setTimeout((/**
             * @return {?}
             */
            function () { return _this.triggerResize(); }));
        }
        if (this.ngContentWrapper) {
            this.ariaDescribedBy = this.ngContentWrapper.nativeElement.children.length > 0 ? "label-for-" + this.inputId : null;
        }
    };
    /**
     * @return {?}
     */
    NxNumberStepperComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._intlSubscription.unsubscribe();
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxNumberStepperComponent.prototype.setInputValue = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.leadingZero) {
            this.numberInput.nativeElement.value = pad(value.toString(), 2);
        }
        else {
            this.numberInput.nativeElement.value = value.toString();
        }
    };
    /* ControlValueAccessor Implementations */
    /* ControlValueAccessor Implementations */
    /**
     * @param {?} value
     * @return {?}
     */
    NxNumberStepperComponent.prototype.writeValue = /* ControlValueAccessor Implementations */
    /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.value = value;
    };
    /**
     * @param {?} onChange
     * @return {?}
     */
    NxNumberStepperComponent.prototype.registerOnChange = /**
     * @param {?} onChange
     * @return {?}
     */
    function (onChange) {
        this.onChangeCallback = onChange;
    };
    /**
     * @param {?} onTouched
     * @return {?}
     */
    NxNumberStepperComponent.prototype.registerOnTouched = /**
     * @param {?} onTouched
     * @return {?}
     */
    function (onTouched) {
        this.onTouchedCallback = onTouched;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    NxNumberStepperComponent.prototype.onInputChange = /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!this.validateUserInput(event.target.value)) {
            this._value = null;
        }
        else {
            this._value = Number(event.target.value);
        }
        this.valueChange.emit(this._value);
        this.onChangeCallback(this._value);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} input
     * @return {?}
     */
    NxNumberStepperComponent.prototype.validateUserInput = /**
     * \@docs-private
     * @param {?} input
     * @return {?}
     */
    function (input) {
        return !!input.match(ALLOWED_CHARACTERS);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxNumberStepperComponent.prototype.increment = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newValue;
        if (this.isBetweenLimits(this._value)) {
            newValue = this.getNextGreaterValue(this._value);
        }
        else {
            newValue = this.enforceLimits(this._value);
        }
        this.value = newValue;
        this.valueChange.emit(this._value);
        this.onChangeCallback(this._value);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxNumberStepperComponent.prototype.triggerResize = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        if (this.resize) {
            this.autoResize.updateInputWidth();
            this._changeDetectorRef.markForCheck();
        }
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxNumberStepperComponent.prototype.decrement = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newValue;
        if (this.isBetweenLimits(this._value)) {
            newValue = this.getNextLowerValue(this._value);
        }
        else {
            newValue = this.enforceLimits(this._value);
        }
        this.value = newValue;
        this.valueChange.emit(this._value);
        this.onChangeCallback(this._value);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxNumberStepperComponent.prototype.enforceLimits = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value > this._max) {
            return this._max;
        }
        else if (value < this._min) {
            return this._min;
        }
        return value;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} start
     * @return {?}
     */
    NxNumberStepperComponent.prototype.getNextLowerValue = /**
     * \@docs-private
     * @param {?} start
     * @return {?}
     */
    function (start) {
        // if there is an invalid input start is null
        if (!start) {
            start = 0;
        }
        /** @type {?} */
        var next;
        if (this.isValidStep(start)) {
            next = (new Decimal(start).minus(new Decimal(this._step))).toNumber();
        }
        else {
            next = new Decimal(start).toNearest(this._step, Decimal.ROUND_DOWN).toNumber();
        }
        return this.enforceLimits(next);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} start
     * @return {?}
     */
    NxNumberStepperComponent.prototype.getNextGreaterValue = /**
     * \@docs-private
     * @param {?} start
     * @return {?}
     */
    function (start) {
        /** @type {?} */
        var next;
        if (!start) {
            start = 0;
        }
        if (this.isValidStep(start)) {
            next = (new Decimal(start).plus(new Decimal(this._step))).toNumber();
        }
        else {
            next = new Decimal(start).toNearest(this._step, Decimal.ROUND_UP).toNumber();
        }
        return this.enforceLimits(next);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxNumberStepperComponent.prototype.isBetweenLimits = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value <= this._max && value >= this._min;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxNumberStepperComponent.prototype.isMinimum = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this._value === this._min;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxNumberStepperComponent.prototype.isMaximum = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this._value === this._max;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxNumberStepperComponent.prototype.isValidStep = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === null) {
            value = new Decimal(0);
        }
        /** @type {?} */
        var min = new Decimal(this._min);
        /** @type {?} */
        var valueDec = new Decimal(value);
        /** @type {?} */
        var checkValue = (min.minus(valueDec)).mod(new Decimal(this._step)).toNumber();
        if (this.isBetweenLimits(value) && ((this.isMinimum() || this.isMaximum()) ||
            checkValue === 0)) {
            return true;
        }
        return false;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxNumberStepperComponent.prototype.userInputToNumber = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var current = value === '' ? 0 : value;
        return parseInt(current, 10);
    };
    /**
     * @return {?}
     */
    NxNumberStepperComponent.prototype._validateFn = /**
     * @return {?}
     */
    function () {
        // the manual user input must match min + n * step, e.g. minimum 1 step 2: 1, 3, 5, 7 etc.
        if (!this.isValidStep(this._value)) {
            return { nxNumberStepperStepError: 'Value is not a valid step' };
        }
        else if (this._value === null) {
            return { nxNumberStepperFormatError: 'Not a valid number' };
        }
        return null;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} c
     * @return {?}
     */
    NxNumberStepperComponent.prototype.validate = /**
     * \@docs-private
     * @param {?} c
     * @return {?}
     */
    function (c) {
        return this._validateFn();
    };
    Object.defineProperty(NxNumberStepperComponent.prototype, "_buttonType", {
        get: /**
         * @return {?}
         */
        function () {
            return 'secondary' + (this.negative ? ' negative' : '');
        },
        enumerable: true,
        configurable: true
    });
    NxNumberStepperComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-number-stepper',
                    template: "<div *ngIf=\"label\" class=\"nx-stepper__label\">\n  <label [for]=\"inputId\">\n    {{label}}\n  </label>\n</div>\n<div #customLabel *ngIf=\"!label\" [id]=\"ariaDescribedBy\">\n  <ng-content></ng-content>\n</div>\n<div class=\"nx-stepper__input-container\">\n  <button\n    [attr.aria-label]=\"_intl.decrementAriaLabel\"\n    [nxButton]=\"_buttonType\"\n    class=\"nx-stepper__down nx-stepper__control\"\n    (click)=\"decrement()\"\n    [disabled]=\"value <= min\">\n    <nx-icon name=\"minus\" size=\"s\"></nx-icon>\n  </button>\n  <div class=\"nx-stepper__input-wrapper\">\n    <div class=\"nx-stepper__inner-wrapper\">\n        <ng-content select=\"nx-number-stepper-prefix\"></ng-content>\n\n        <input #numberInput [nxAutoResize]=\"resize\"\n        [attr.aria-describedby]=\"ariaDescribedBy\"\n        [id]=\"inputId\" [ngClass]=\"inputClassNames\"\n        (input)=\"onInputChange($event)\"\n        (keydown.arrowup)=\"increment()\"\n        (keydown.arrowdown)=\"decrement()\"/>\n\n        <ng-content select=\"nx-number-stepper-suffix\"></ng-content>\n    </div>\n    <div class=\"nx-stepper__input-underline\"></div>\n  </div>\n\n  <button\n    [attr.aria-label]=\"_intl.incrementAriaLabel\"\n    [nxButton]=\"_buttonType\"\n    class=\"nx-stepper__up nx-stepper__control\"\n    (click)=\"increment()\"\n    [disabled]=\"value >= max\">\n    <nx-icon name=\"plus\" size=\"s\"></nx-icon>\n  </button>\n</div>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    inputs: ['classNames: nxSize'],
                    host: {
                        '[class.is-negative]': 'negative'
                    },
                    providers: [CUSTOM_VALUE_ACCESSOR, CUSTOM_VALIDATOR],
                    styles: [":host{display:block}:host input{padding:0}.nx-stepper__input-container{align-items:flex-end;display:flex;margin-top:12px}.nx-stepper__label{display:flex;font-size:20px;line-height:28px}.nx-stepper__control{width:32px;height:32px;min-height:32px;font-size:24px;margin:0;padding:0}.nx-stepper__control:disabled{background-color:rgba(255,255,255,.4);border-color:#006192;color:#006192;opacity:.4}.nx-stepper__input{width:56px;min-width:56px}.nx-stepper__input,::ng-deep .nx-stepper__prefix,::ng-deep .nx-stepper__suffix{background:0 0;outline:0;border:0;text-align:center;color:#414141;font-size:20px;line-height:28px;height:28px}::ng-deep .nx-stepper__suffix{margin-left:4px}::ng-deep .nx-stepper__prefix{margin-right:4px}.nx-stepper__input-wrapper{display:flex;align-items:center;flex-direction:column;margin:0 16px}.nx-stepper__inner-wrapper{height:28px;display:flex;align-items:baseline}.nx-stepper__input-underline{width:100%;margin-top:2px;height:2px;background:#414141}:host.nx-stepper--big .nx-stepper__control{width:72px;min-height:48px;margin-bottom:0}:host.nx-stepper--big .nx-stepper__input{width:72px;min-width:72px}:host.nx-stepper--big .nx-stepper__input,:host.nx-stepper--big ::ng-deep .nx-stepper__prefix,:host.nx-stepper--big ::ng-deep .nx-stepper__suffix{color:#414141;font-size:40px;line-height:48px;height:48px;letter-spacing:.3px;padding:0;margin-bottom:0}:host.nx-stepper--big .nx-stepper__input-wrapper{margin:0 24px}:host.nx-stepper--big .nx-stepper__input-underline{margin-top:-2px}:host.nx-stepper--big .nx-stepper__inner-wrapper{height:48px}:host.is-negative .nx-stepper__label{color:#fff}:host.is-negative .nx-stepper__input{color:#fff}:host.is-negative .nx-stepper__input-underline{background:#fff}"]
                }] }
    ];
    /** @nocollapse */
    NxNumberStepperComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: Renderer2 },
        { type: ElementRef },
        { type: NxNumberStepperIntl }
    ]; };
    NxNumberStepperComponent.propDecorators = {
        numberInput: [{ type: ViewChild, args: ['numberInput',] }],
        ngContentWrapper: [{ type: ViewChild, args: ['customLabel',] }],
        autoResize: [{ type: ViewChild, args: [NxAutoResizeDirective,] }],
        valueChange: [{ type: Output, args: ['nxValueChange',] }],
        resize: [{ type: Input, args: ['nxResize',] }],
        label: [{ type: Input, args: ['nxLabel',] }],
        style: [{ type: Input, args: ['nxStyle',] }],
        step: [{ type: Input, args: ['nxStep',] }],
        min: [{ type: Input, args: ['nxMin',] }],
        max: [{ type: Input, args: ['nxMax',] }],
        value: [{ type: Input, args: ['nxValue',] }],
        negative: [{ type: Input }],
        leadingZero: [{ type: Input }]
    };
    return NxNumberStepperComponent;
}(MappedStyles));
export { NxNumberStepperComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._step;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._min;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._max;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._value;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._label;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._resize;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._intlSubscription;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._negative;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._leadingZero;
    /**
     * Defines the size of the number stepper.
     *
     * Values: big | normal. Default: normal
     * @type {?}
     */
    NxNumberStepperComponent.prototype.classNames;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.inputClassNames;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._style;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.inputId;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.inputWidth;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.ariaDescribedBy;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.numberInput;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.ngContentWrapper;
    /**
     * \@docs-private
     * @type {?}
     */
    NxNumberStepperComponent.prototype.autoResize;
    /**
     * An event emitted on value change.
     * @type {?}
     */
    NxNumberStepperComponent.prototype.valueChange;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype.onTouchedCallback;
    /**
     * @type {?}
     * @private
     */
    NxNumberStepperComponent.prototype._changeDetectorRef;
    /** @type {?} */
    NxNumberStepperComponent.prototype._intl;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnVtYmVyLXN0ZXBwZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsbGlhbnovbmd4LW5kYngvIiwic291cmNlcyI6WyJudW1iZXItc3RlcHBlci9udW1iZXItc3RlcHBlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsYUFBYSxFQUFvQixHQUFHLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUMvRSxPQUFPLEVBRUwsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixVQUFVLEVBQ1YsS0FBSyxFQUVMLE1BQU0sRUFDTixTQUFTLEVBQ1QsU0FBUyxFQUVWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBcUMsYUFBYSxFQUFFLGlCQUFpQixFQUFhLE1BQU0sZ0JBQWdCLENBQUM7QUFFaEgsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxZQUFZLENBQUM7O0lBRS9CLFlBQVksR0FBRztJQUNuQixHQUFHLEVBQUUsaUJBQWlCO0lBQ3RCLE1BQU0sRUFBRSxFQUFFO0NBQ1g7O0lBQ0ssYUFBYSxHQUFHO0lBQ3BCLE9BQU8sRUFBRSxFQUFFO0lBQ1gsSUFBSSxFQUFFLHlCQUF5QjtJQUMvQixLQUFLLEVBQUUsMEJBQTBCO0NBQ2xDOztJQUNLLGVBQWUsR0FBRyxDQUFDLFlBQVksQ0FBQzs7SUFDaEMsYUFBYSxHQUFHLENBQUMsbUJBQW1CLENBQUM7O0lBRXJDLGtCQUFrQixHQUFHLElBQUksTUFBTSxDQUFDLHVCQUF1QixD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UTtzQkFXZCxLQUFLLFNBQUMsT0FBTztzQkFVYixLQUFLLFNBQUMsT0FBTzt3QkFjYixLQUFLLFNBQUMsU0FBUzsyQkFhZixLQUFLOzhCQWVMLEtBQUs7O0lBb05SLCtCQUFDO0NBQUEsQUE1WEQsQ0FXOEMsWUFBWSxHQWlYekQ7U0FqWFksd0JBQXdCOzs7Ozs7SUFFbkMseUNBQTBCOzs7OztJQUMxQix3Q0FBeUI7Ozs7O0lBQ3pCLHdDQUEyQjs7Ozs7SUFDM0IsMENBQTJCOzs7OztJQUMzQiwwQ0FBc0I7Ozs7O0lBQ3RCLDJDQUFpQzs7Ozs7SUFDakMscURBQXdDOzs7OztJQUN4Qyw2Q0FBbUM7Ozs7O0lBQ25DLGdEQUFxQzs7Ozs7OztJQU9yQyw4Q0FBbUI7Ozs7O0lBR25CLG1EQUlFOzs7OztJQUNGLDBDQUF1Qjs7Ozs7SUFHdkIsMkNBQXVEOzs7OztJQUd2RCw4Q0FBa0I7Ozs7O0lBR2xCLG1EQUE4Qjs7Ozs7SUFHOUIsK0NBQWtEOzs7OztJQUdsRCxvREFBdUQ7Ozs7O0lBR3ZELDhDQUFvRTs7Ozs7SUFHcEUsK0NBQWtFOzs7OztJQW9LbEUsb0RBQTJDOzs7OztJQU0zQyxxREFBc0M7Ozs7O0lBL0NwQyxzREFBNkM7O0lBRzdDLHlDQUFpQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTnhOdW1iZXJTdGVwcGVySW50bCB9IGZyb20gJy4vbnVtYmVyLXN0ZXBwZXItaW50bCc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHsgbWFwQ2xhc3NOYW1lcywgbnVtYmVyT2ZEZWNpbWFscywgcGFkIH0gZnJvbSAnQGFsbGlhbnovbmd4LW5kYngvdXRpbHMnO1xuaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBSZW5kZXJlcjIsXG4gIFZpZXdDaGlsZCxcbiAgT25EZXN0cm95XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEZvcm1Db250cm9sLCBOR19WQUxJREFUT1JTLCBOR19WQUxVRV9BQ0NFU1NPUiwgVmFsaWRhdG9yIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBNYXBwZWRTdHlsZXMgfSBmcm9tICdAYWxsaWFuei9uZ3gtbmRieC9jb3JlJztcbmltcG9ydCB7IE54QXV0b1Jlc2l6ZURpcmVjdGl2ZSB9IGZyb20gJy4vYXV0by1yZXNpemUuZGlyZWN0aXZlJztcbmltcG9ydCB7IERlY2ltYWwgfSBmcm9tICdkZWNpbWFsLmpzJztcblxuY29uc3QgU0laRV9NQVBQSU5HID0ge1xuICBiaWc6ICdueC1zdGVwcGVyLS1iaWcnLFxuICBub3JtYWw6ICcnXG59O1xuY29uc3QgU1RZTEVfTUFQUElORyA9IHtcbiAgcmVndWxhcjogJycsXG4gIGJvbGQ6ICdueC1zdGVwcGVyX19pbnB1dC0tYm9sZCcsXG4gIGxpZ2h0OiAnbngtc3RlcHBlcl9faW5wdXQtLWxpZ2h0J1xufTtcbmNvbnN0IERFRkFVTFRfQ0xBU1NFUyA9IFsnbngtc3RlcHBlciddO1xuY29uc3QgSU5QVVRfQ0xBU1NFUyA9IFsnbngtc3RlcHBlcl9faW5wdXQnXTtcblxuY29uc3QgQUxMT1dFRF9DSEFSQUNURVJTID0gbmV3IFJlZ0V4cCgvXi0/WzAtOV1cXGQqKFxcLlxcZCspPyQvZyk7XG5jb25zdCBDVVNUT01fVkFMVUVfQUNDRVNTT1IgPSB7XG4gIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOeE51bWJlclN0ZXBwZXJDb21wb25lbnQpLFxuICBtdWx0aTogdHJ1ZVxufTtcbmNvbnN0IENVU1RPTV9WQUxJREFUT1IgPSB7XG4gIHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsXG4gIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE54TnVtYmVyU3RlcHBlckNvbXBvbmVudCksXG4gIG11bHRpOiB0cnVlXG59O1xuXG5sZXQgbmV4dFVuaXF1ZUlkID0gMDtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbngtbnVtYmVyLXN0ZXBwZXInLFxuICB0ZW1wbGF0ZVVybDogJ251bWJlci1zdGVwcGVyLmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0eWxlVXJsczogWydudW1iZXItc3RlcHBlci5jb21wb25lbnQuc2NzcyddLFxuICBpbnB1dHM6IFsnY2xhc3NOYW1lczogbnhTaXplJ10sXG4gIGhvc3Q6IHtcbiAgICAnW2NsYXNzLmlzLW5lZ2F0aXZlXSc6ICduZWdhdGl2ZSdcbiAgfSxcbiAgcHJvdmlkZXJzOiBbQ1VTVE9NX1ZBTFVFX0FDQ0VTU09SLCBDVVNUT01fVkFMSURBVE9SXVxufSlcbmV4cG9ydCBjbGFzcyBOeE51bWJlclN0ZXBwZXJDb21wb25lbnQgZXh0ZW5kcyBNYXBwZWRTdHlsZXNcbiAgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBWYWxpZGF0b3IsIE9uRGVzdHJveSB7XG4gIHByaXZhdGUgX3N0ZXA6IG51bWJlciA9IDE7XG4gIHByaXZhdGUgX21pbjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbWF4OiBudW1iZXIgPSAxMDA7XG4gIHByaXZhdGUgX3ZhbHVlOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9sYWJlbCA9IG51bGw7XG4gIHByaXZhdGUgX3Jlc2l6ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9pbnRsU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgX25lZ2F0aXZlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2xlYWRpbmdaZXJvOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogRGVmaW5lcyB0aGUgc2l6ZSBvZiB0aGUgbnVtYmVyIHN0ZXBwZXIuXG4gICAqXG4gICAqIFZhbHVlczogYmlnIHwgbm9ybWFsLiBEZWZhdWx0OiBub3JtYWxcbiAgICovXG4gIGNsYXNzTmFtZXM6IHN0cmluZztcblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBwdWJsaWMgaW5wdXRDbGFzc05hbWVzOiBzdHJpbmcgPSBtYXBDbGFzc05hbWVzKFxuICAgICdyZWd1bGFyJyxcbiAgICBJTlBVVF9DTEFTU0VTLFxuICAgIFNUWUxFX01BUFBJTkdcbiAgKTtcbiAgcHJpdmF0ZSBfc3R5bGU6IHN0cmluZztcblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBwdWJsaWMgaW5wdXRJZCA9IGBueC1udW1iZXItc3RlcHBlci0ke25leHRVbmlxdWVJZCsrfWA7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgcHVibGljIGlucHV0V2lkdGg7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgcHVibGljIGFyaWFEZXNjcmliZWRCeSA9IG51bGw7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgQFZpZXdDaGlsZCgnbnVtYmVySW5wdXQnKSBudW1iZXJJbnB1dDogRWxlbWVudFJlZjtcblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBAVmlld0NoaWxkKCdjdXN0b21MYWJlbCcpIG5nQ29udGVudFdyYXBwZXI6IEVsZW1lbnRSZWY7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgQFZpZXdDaGlsZChOeEF1dG9SZXNpemVEaXJlY3RpdmUpIGF1dG9SZXNpemU6IE54QXV0b1Jlc2l6ZURpcmVjdGl2ZTtcblxuICAvKiogQW4gZXZlbnQgZW1pdHRlZCBvbiB2YWx1ZSBjaGFuZ2UuICovXG4gIEBPdXRwdXQoJ254VmFsdWVDaGFuZ2UnKSB2YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuXG4gIC8qKiBXaGV0aGVyIHRoZSBpbnB1dCBzaG91bGQgYmUgcmVzaXplZC4gRGVmYXVsdDogZmFsc2UgKi9cbiAgQElucHV0KCdueFJlc2l6ZScpXG4gIHNldCByZXNpemUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9yZXNpemUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCByZXNpemUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc2l6ZTtcbiAgfVxuXG4gIGdldCBsYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbDtcbiAgfVxuXG4gIC8qKiBEZWZpbmVzIHRoZSB0aGUgbGFiZWwgc2hvd24gYWJvdmUgdGhlIHN0ZXBwZXIgaW5wdXQuICovXG4gIEBJbnB1dCgnbnhMYWJlbCcpXG4gIHNldCBsYWJlbCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX2xhYmVsICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fbGFiZWwgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzdHlsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9zdHlsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHRoZSBmb250IHdlaWdodCBvZiB0aGUgaW5wdXQuXG4gICAqXG4gICAqIFBvc3NpYmxlIHZhbHVlczogcmVndWxhciwgYm9sZCwgbGlnaHQuIERlZmF1bHQgdmFsdWU6IHJlZ3VsYXJcbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVGhlIHN0eWxlIGlucHV0IGlzIG5vdCBhdmFpbGFibGUgYW55bW9yZSwgb25seSBkZWZhdWx0IGZvbnQtd2VpZ2h0IHNob3VsZCBiZSB1c2VkLlxuICAgKiBAZGVsZXRpb24tdGFyZ2V0IDguMC4wXG4gICAqL1xuICBASW5wdXQoJ254U3R5bGUnKVxuICBzZXQgc3R5bGUodmFsdWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLl9zdHlsZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc3R5bGUgPSB2YWx1ZTtcbiAgICB0aGlzLmlucHV0Q2xhc3NOYW1lcyA9IG1hcENsYXNzTmFtZXModmFsdWUsIElOUFVUX0NMQVNTRVMsIFNUWUxFX01BUFBJTkcpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqIFNldHMgdGhlIHN0ZXAgc2l6ZS4gRGVmYXVsdDogMSAqL1xuICBASW5wdXQoJ254U3RlcCcpXG4gIHNldCBzdGVwKHZhbHVlOiBudW1iZXIpIHtcbiAgICAvLyBvbmx5IGludGVybmFsIGNoYW5nZXMgbm8gbmVlZCB0byBjYWxsIG1hcmtGb3JDaGVja1xuICAgIHRoaXMuX3N0ZXAgPSBOdW1iZXIodmFsdWUpO1xuICB9XG5cbiAgZ2V0IHN0ZXAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc3RlcDtcbiAgfVxuXG4gIC8qKiBTZXRzIHRoZSBtaW5pbXVtIGFjY2VwdGVkIG51bWJlci4gRGVmYXVsdDogMCAqL1xuICBASW5wdXQoJ254TWluJylcbiAgc2V0IG1pbih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbWluID0gTnVtYmVyKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBtaW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWluO1xuICB9XG5cbiAgLyoqIFNldHMgdGhlIG1heGltdW0gYWNjZXB0ZWQgbnVtYmVyLiBEZWZhdWx0OiAxMDAgKi9cbiAgQElucHV0KCdueE1heCcpXG4gIHNldCBtYXgodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX21heCA9IE51bWJlcih2YWx1ZSk7XG4gIH1cblxuICBnZXQgbWF4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heDtcbiAgfVxuXG4gIGdldCB2YWx1ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIC8qKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgbnVtYmVyLXN0ZXBwZXIuICovXG4gIEBJbnB1dCgnbnhWYWx1ZScpXG4gIHNldCB2YWx1ZSh2YWx1ZTogbnVtYmVyIHwgbnVsbCkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuX3ZhbHVlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsdWUodGhpcy5fdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsdWUoMCk7XG4gICAgfVxuICAgIHRoaXMudHJpZ2dlclJlc2l6ZSgpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqIFdoZXRoZXIgdGhlIG5lZ2F0aXZlIHNldCBvZiBzdHlsaW5nIHNob3VsZCBiZSB1c2VkLiAqL1xuICBASW5wdXQoKVxuICBzZXQgbmVnYXRpdmUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5fbmVnYXRpdmUgIT09IHZhbHVlKSB7XG4gICAgICB0aGlzLl9uZWdhdGl2ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgZ2V0IG5lZ2F0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9uZWdhdGl2ZTtcbiAgfVxuXG4gIC8qKiBXaGV0aGVyIHRoZSBudW1iZXIgc3RlcHBlciB2YWx1ZSBzaG91bGQgaGF2ZSBhIGxlYWRpbmcgemVyby5cbiAgICpcbiAgICogRGVmYXVsdCB2YWx1ZSBpcyB0cnVlLlxuICAgKi9cbiAgQElucHV0KClcbiAgc2V0IGxlYWRpbmdaZXJvKHZhbHVlOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuX2xlYWRpbmdaZXJvICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fbGVhZGluZ1plcm8gPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMudmFsdWUpO1xuICAgIH1cbiAgfVxuICBnZXQgbGVhZGluZ1plcm8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2xlYWRpbmdaZXJvO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIF9yZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHB1YmxpYyBfaW50bDogTnhOdW1iZXJTdGVwcGVySW50bFxuICApIHtcbiAgICBzdXBlcihTSVpFX01BUFBJTkcsIERFRkFVTFRfQ0xBU1NFUywgX2VsZW1lbnRSZWYsIF9yZW5kZXJlcik7XG4gICAgdGhpcy5faW50bFN1YnNjcmlwdGlvbiA9IHRoaXMuX2ludGwuY2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4gdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCkpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMuX3ZhbHVlKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAvLyBkZWZlciB0byBwcmV2ZW50IGNoZWNrZWQgYWZ0ZXIgY2hhbmdlIGVycm9yc1xuICAgIGlmICh0aGlzLnJlc2l6ZSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyaWdnZXJSZXNpemUoKSk7XG4gICAgfVxuICAgIGlmICh0aGlzLm5nQ29udGVudFdyYXBwZXIpIHtcbiAgICAgIHRoaXMuYXJpYURlc2NyaWJlZEJ5ID0gdGhpcy5uZ0NvbnRlbnRXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGBsYWJlbC1mb3ItJHt0aGlzLmlucHV0SWR9YCA6IG51bGw7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5faW50bFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgc2V0SW5wdXRWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmxlYWRpbmdaZXJvKSB7XG4gICAgICB0aGlzLm51bWJlcklucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSBwYWQodmFsdWUudG9TdHJpbmcoKSwgMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubnVtYmVySW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgLyogQ29udHJvbFZhbHVlQWNjZXNzb3IgSW1wbGVtZW50YXRpb25zICovXG4gIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgb25DaGFuZ2VDYWxsYmFjayA9IChfOiBhbnkpID0+IHsgfTtcblxuICByZWdpc3Rlck9uQ2hhbmdlKG9uQ2hhbmdlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBvbkNoYW5nZTtcbiAgfVxuXG4gIHByaXZhdGUgb25Ub3VjaGVkQ2FsbGJhY2sgPSAoKSA9PiB7IH07XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQob25Ub3VjaGVkOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gb25Ub3VjaGVkO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgb25JbnB1dENoYW5nZShldmVudCkge1xuICAgIGlmICghdGhpcy52YWxpZGF0ZVVzZXJJbnB1dChldmVudC50YXJnZXQudmFsdWUpKSB7XG4gICAgICB0aGlzLl92YWx1ZSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3ZhbHVlID0gTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLl92YWx1ZSk7XG4gICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuX3ZhbHVlKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHZhbGlkYXRlVXNlcklucHV0KGlucHV0OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gISFpbnB1dC5tYXRjaChBTExPV0VEX0NIQVJBQ1RFUlMpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgaW5jcmVtZW50KCkge1xuICAgIGxldCBuZXdWYWx1ZTtcbiAgICBpZiAodGhpcy5pc0JldHdlZW5MaW1pdHModGhpcy5fdmFsdWUpKSB7XG4gICAgICBuZXdWYWx1ZSA9IHRoaXMuZ2V0TmV4dEdyZWF0ZXJWYWx1ZSh0aGlzLl92YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1ZhbHVlID0gdGhpcy5lbmZvcmNlTGltaXRzKHRoaXMuX3ZhbHVlKTtcbiAgICB9XG4gICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLl92YWx1ZSk7XG4gICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuX3ZhbHVlKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHRyaWdnZXJSZXNpemUoKSB7XG4gICAgaWYgKHRoaXMucmVzaXplKSB7XG4gICAgICB0aGlzLmF1dG9SZXNpemUudXBkYXRlSW5wdXRXaWR0aCgpO1xuICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZGVjcmVtZW50KCkge1xuICAgIGxldCBuZXdWYWx1ZTtcbiAgICBpZiAodGhpcy5pc0JldHdlZW5MaW1pdHModGhpcy5fdmFsdWUpKSB7XG4gICAgICBuZXdWYWx1ZSA9IHRoaXMuZ2V0TmV4dExvd2VyVmFsdWUodGhpcy5fdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdWYWx1ZSA9IHRoaXMuZW5mb3JjZUxpbWl0cyh0aGlzLl92YWx1ZSk7XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy5fdmFsdWUpO1xuICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLl92YWx1ZSk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBlbmZvcmNlTGltaXRzKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID4gdGhpcy5fbWF4KSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWF4O1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPCB0aGlzLl9taW4pIHtcbiAgICAgIHJldHVybiB0aGlzLl9taW47XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGdldE5leHRMb3dlclZhbHVlKHN0YXJ0KSB7XG4gICAgLy8gaWYgdGhlcmUgaXMgYW4gaW52YWxpZCBpbnB1dCBzdGFydCBpcyBudWxsXG4gICAgaWYgKCFzdGFydCkge1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cblxuICAgIGxldCBuZXh0O1xuICAgIGlmICh0aGlzLmlzVmFsaWRTdGVwKHN0YXJ0KSkge1xuICAgICAgbmV4dCA9IChuZXcgRGVjaW1hbChzdGFydCkubWludXMobmV3IERlY2ltYWwodGhpcy5fc3RlcCkpKS50b051bWJlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0ID0gbmV3IERlY2ltYWwoc3RhcnQpLnRvTmVhcmVzdCh0aGlzLl9zdGVwLCBEZWNpbWFsLlJPVU5EX0RPV04pLnRvTnVtYmVyKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVuZm9yY2VMaW1pdHMobmV4dCk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBnZXROZXh0R3JlYXRlclZhbHVlKHN0YXJ0KSB7XG4gICAgbGV0IG5leHQ7XG4gICAgaWYgKCFzdGFydCkge1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc1ZhbGlkU3RlcChzdGFydCkpIHtcbiAgICAgIG5leHQgPSAobmV3IERlY2ltYWwoc3RhcnQpLnBsdXMobmV3IERlY2ltYWwodGhpcy5fc3RlcCkpKS50b051bWJlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0ID0gbmV3IERlY2ltYWwoc3RhcnQpLnRvTmVhcmVzdCh0aGlzLl9zdGVwLCBEZWNpbWFsLlJPVU5EX1VQKS50b051bWJlcigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lbmZvcmNlTGltaXRzKG5leHQpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgaXNCZXR3ZWVuTGltaXRzKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIDw9IHRoaXMuX21heCAmJiB2YWx1ZSA+PSB0aGlzLl9taW47XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBpc01pbmltdW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlID09PSB0aGlzLl9taW47XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBpc01heGltdW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlID09PSB0aGlzLl9tYXg7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBpc1ZhbGlkU3RlcCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdmFsdWUgPSBuZXcgRGVjaW1hbCgwKTtcbiAgICB9XG4gICAgY29uc3QgbWluID0gbmV3IERlY2ltYWwodGhpcy5fbWluKTtcbiAgICBjb25zdCB2YWx1ZURlYyA9IG5ldyBEZWNpbWFsKHZhbHVlKTtcbiAgICBjb25zdCBjaGVja1ZhbHVlID0gKG1pbi5taW51cyh2YWx1ZURlYykpLm1vZChuZXcgRGVjaW1hbCh0aGlzLl9zdGVwKSkudG9OdW1iZXIoKTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNCZXR3ZWVuTGltaXRzKHZhbHVlKSAmJiAoKHRoaXMuaXNNaW5pbXVtKCkgfHwgdGhpcy5pc01heGltdW0oKSkgfHxcbiAgICAgIGNoZWNrVmFsdWUgPT09IDApXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgdXNlcklucHV0VG9OdW1iZXIodmFsdWUpOiBudW1iZXIge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB2YWx1ZSA9PT0gJycgPyAwIDogdmFsdWU7XG4gICAgcmV0dXJuIHBhcnNlSW50KGN1cnJlbnQsIDEwKTtcbiAgfVxuXG4gIF92YWxpZGF0ZUZuKCkge1xuICAgIC8vIHRoZSBtYW51YWwgdXNlciBpbnB1dCBtdXN0IG1hdGNoIG1pbiArIG4gKiBzdGVwLCBlLmcuIG1pbmltdW0gMSBzdGVwIDI6IDEsIDMsIDUsIDcgZXRjLlxuICAgIGlmICghdGhpcy5pc1ZhbGlkU3RlcCh0aGlzLl92YWx1ZSkpIHtcbiAgICAgIHJldHVybiB7IG54TnVtYmVyU3RlcHBlclN0ZXBFcnJvcjogJ1ZhbHVlIGlzIG5vdCBhIHZhbGlkIHN0ZXAnIH07XG4gICAgfSBlbHNlIGlmICh0aGlzLl92YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHsgbnhOdW1iZXJTdGVwcGVyRm9ybWF0RXJyb3I6ICdOb3QgYSB2YWxpZCBudW1iZXInIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgdmFsaWRhdGUoYzogRm9ybUNvbnRyb2wpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGVGbigpO1xuICB9XG5cbiAgZ2V0IF9idXR0b25UeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdzZWNvbmRhcnknICsgKHRoaXMubmVnYXRpdmUgPyAnIG5lZ2F0aXZlJyA6ICcnKTtcbiAgfVxufVxuIl19