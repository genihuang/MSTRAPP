/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, EventEmitter, forwardRef, Input, Output, ViewChild, Optional, HostListener, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { UniqueSelectionDispatcher } from '@angular/cdk/collections';
import { ToggleButton } from './toggle-button';
import { NxCircleToggleGroupComponent } from '../circle-toggle-group/circle-toggle-group.component';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { NxMobileToggleButtonComponent } from '../mobile-toggle-button/mobile-toggle-button.component';
var ToggleChangeEvent = /** @class */ (function () {
    function ToggleChangeEvent(button, value) {
        this.button = button;
        this.value = value;
    }
    return ToggleChangeEvent;
}());
export { ToggleChangeEvent };
if (false) {
    /**
     * A toggle button
     * @type {?}
     */
    ToggleChangeEvent.prototype.button;
    /**
     * The value of the toggle button that is sent with the event.
     * @type {?}
     */
    ToggleChangeEvent.prototype.value;
}
/** @type {?} */
var nextId = 0;
var NxCircleToggleComponent = /** @class */ (function (_super) {
    tslib_1.__extends(NxCircleToggleComponent, _super);
    function NxCircleToggleComponent(/** @docs-private */ toggleGroup, _checkedDispatcher, _changeDetectorRef) {
        var _this = _super.call(this) || this;
        _this.toggleGroup = toggleGroup;
        _this._checkedDispatcher = _checkedDispatcher;
        _this._changeDetectorRef = _changeDetectorRef;
        _this._id = "toggle-button-" + nextId++;
        /**
         * \@docs-private
         */
        _this.inGroup = false;
        _this._name = null;
        /**
         * An event that is emitted when the checked state fo the circle toggle changes.
         */
        _this.checkedChange = new EventEmitter();
        /**
         * An event that is emitted when the checked state of the circle toggle changes.
         * The event object contains the circle toggle itself and its value (see ToggleChangeEvent).
         */
        _this.selectionChange = new EventEmitter();
        _this._checked = false;
        _this._value = null;
        _this._iconName = null;
        _this._svg = null;
        _this._svgChecked = null;
        _this._label = null;
        _this._hint = null;
        _this._hover = false;
        /**
         * touched is set to true on touch devices.
         */
        _this._touched = false;
        _this._removeUniqueSelectionListener = (/**
         * @return {?}
         */
        function () { });
        _this.onChangeCallback = (/**
         * @param {?} checked
         * @return {?}
         */
        function (checked) { });
        _this.onTouchedCallback = (/**
         * @return {?}
         */
        function () { });
        if (_this.toggleGroup) {
            _this.name = _this.toggleGroup.name;
        }
        return _this;
    }
    Object.defineProperty(NxCircleToggleComponent.prototype, "id", {
        get: /**
         * @return {?}
         */
        function () {
            return this._id;
        },
        /**
         * Id of the circle toggle.
         *
         * If not set, the circle toggle gets an incremented value by default.
         */
        set: /**
         * Id of the circle toggle.
         *
         * If not set, the circle toggle gets an incremented value by default.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._id = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "name", {
        get: /**
         * @return {?}
         */
        function () {
            return this._name;
        },
        /** Name that is used for accessibility. */
        set: /**
         * Name that is used for accessibility.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._name = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "checked", {
        get: /**
         * @return {?}
         */
        function () {
            return this._checked;
        },
        /** Whether the circle toggle is checked. */
        set: /**
         * Whether the circle toggle is checked.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var newValue = coerceBooleanProperty(value);
            if (this.checked !== newValue) {
                this._checked = newValue;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        /** The value that is used in the model. */
        set: /**
         * The value that is used in the model.
         * @param {?} newValue
         * @return {?}
         */
        function (newValue) {
            this._value = newValue;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "iconName", {
        get: /**
         * @return {?}
         */
        function () {
            return this._iconName;
        },
        /** Id of the icon that should be displayed. */
        set: /**
         * Id of the icon that should be displayed.
         * @param {?} name
         * @return {?}
         */
        function (name) {
            this._iconName = name;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "svg", {
        get: /**
         * @return {?}
         */
        function () {
            return this._svg;
        },
        /** SVG that is displayed if the circle toggle is unchecked. */
        set: /**
         * SVG that is displayed if the circle toggle is unchecked.
         * @param {?} src
         * @return {?}
         */
        function (src) {
            this._svg = src;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "svgChecked", {
        get: /**
         * @return {?}
         */
        function () {
            return this._svgChecked;
        },
        /** SVG that is displayed if the circle toggle is checked. */
        set: /**
         * SVG that is displayed if the circle toggle is checked.
         * @param {?} src
         * @return {?}
         */
        function (src) {
            this._svgChecked = src;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "label", {
        get: /**
         * @return {?}
         */
        function () {
            return this._label;
        },
        /** Label displayed below the circle. */
        set: /**
         * Label displayed below the circle.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._label = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "hint", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hint;
        },
        /** Additional hint displayed below the label. */
        set: /**
         * Additional hint displayed below the label.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hint = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "negative", {
        get: /**
         * @return {?}
         */
        function () {
            return this._negative;
        },
        /** Whether the circle toggle uses the negative set of styling. */
        set: /**
         * Whether the circle toggle uses the negative set of styling.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var newValue = coerceBooleanProperty(value);
            if (this.negative !== newValue) {
                this._negative = newValue;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "responsive", {
        get: /**
         * @return {?}
         */
        function () {
            return this._responsive;
        },
        /** Whether the circle toggle has a responsive behavior. */
        set: /**
         * Whether the circle toggle has a responsive behavior.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var newValue = coerceBooleanProperty(value);
            if (this.responsive !== newValue) {
                this._responsive = newValue;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        /** Whether the circle toggle is disabled. */
        set: /**
         * Whether the circle toggle is disabled.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var newValue = coerceBooleanProperty(value);
            if (this.disabled !== newValue) {
                this._disabled = newValue;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxCircleToggleComponent.prototype.onMouseEnter = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        if (!this._touched) {
            this._hover = true;
        }
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxCircleToggleComponent.prototype.onMouseLeave = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        if (!this._touched) {
            this._hover = false;
        }
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxCircleToggleComponent.prototype.onTouchStart = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        this._touched = true;
    };
    /**
     * @return {?}
     */
    NxCircleToggleComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.toggleGroup) {
            this.attachListenerForGroup();
        }
    };
    /**
     * @return {?}
     */
    NxCircleToggleComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.toggleGroup) {
            Promise.resolve().then((/**
             * @return {?}
             */
            function () {
                _this.inGroup = true;
                _this.negative = _this.toggleGroup.negative;
                _this.disabled = _this.toggleGroup.disabled;
                _this.responsive = _this.toggleGroup.responsive;
                _this.id = _this.toggleGroup.id + ("-button-" + nextId++);
            }));
        }
    };
    /**
     * @return {?}
     */
    NxCircleToggleComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // function returned by the listener
        this._removeUniqueSelectionListener();
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxCircleToggleComponent.prototype.attachListenerForGroup = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        var _this = this;
        this._removeUniqueSelectionListener =
            this._checkedDispatcher.listen((/**
             * @param {?} groupId
             * @param {?} buttonId
             * @return {?}
             */
            function (groupId, buttonId) {
                if (_this.id !== buttonId && groupId === _this.toggleGroup.id) {
                    _this.checked = false;
                }
            }));
    };
    /**
     * @param {?} newValue
     * @return {?}
     */
    NxCircleToggleComponent.prototype.writeValue = /**
     * @param {?} newValue
     * @return {?}
     */
    function (newValue) {
        this.checked = newValue;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxCircleToggleComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChangeCallback = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxCircleToggleComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouchedCallback = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    NxCircleToggleComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    NxCircleToggleComponent.prototype.toggle = /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.preventDefault();
        event.stopPropagation();
        if ((this.toggleGroup && this.checked) || this.disabled) {
            return;
        }
        else {
            this.checked = !this.checked;
            this.onChangeCallback(this.checked);
            this.checkedChange.emit(this.checked);
            this.selectionChange.emit(new ToggleChangeEvent(this, this.value));
            if (this.toggleGroup) {
                this._checkedDispatcher.notify(this.toggleGroup.id, this.id);
            }
        }
    };
    /**
     * @docs-private
     *
     * method called by the group if the internal value of the group is changed programatically,
     * does not trigger change emission
     */
    /**
     * \@docs-private
     *
     * method called by the group if the internal value of the group is changed programatically,
     * does not trigger change emission
     * @return {?}
     */
    NxCircleToggleComponent.prototype.setGroupSelection = /**
     * \@docs-private
     *
     * method called by the group if the internal value of the group is changed programatically,
     * does not trigger change emission
     * @return {?}
     */
    function () {
        // propagate changes only if the value in the group is different than the button checked value
        if (!this.checked) {
            this.checked = !this.checked;
            this.onChangeCallback(this.checked);
            this._checkedDispatcher.notify(this.toggleGroup.id, this.id);
        }
    };
    Object.defineProperty(NxCircleToggleComponent.prototype, "svgButton", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () {
            return !!this.svg && !!this.svgChecked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "svgUrl", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var useFilledSvg = this.checked || (!this.disabled && this._hover);
            if (this.negative) {
                useFilledSvg = !useFilledSvg;
            }
            return useFilledSvg ? this.svgChecked : this.svg;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCircleToggleComponent.prototype, "type", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () {
            return this.toggleGroup ? 'radio' : 'checkbox';
        },
        enumerable: true,
        configurable: true
    });
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    NxCircleToggleComponent.prototype.handleEnterKey = /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!this.toggleGroup) {
            this.toggle(event);
        }
    };
    NxCircleToggleComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-circle-toggle',
                    template: "<input [id]=\"id + '-input'\"\n       class=\"nx-circle-toggle__input\"\n       [attr.aria-labelledby]=\"id + '-label'\"\n       [type]=\"type\"\n       [attr.name]=\"name\"\n       [checked]=\"checked\"\n       [disabled]= \"disabled\"\n       [attr.aria-checked]=\"checked\"\n       (keydown.enter)=\"handleEnterKey($event)\"\n       (click)=\"toggle($event)\">\n<label class=\"nx-circle-toggle__label\"\n  [for]=\"id + '-input'\"\n  [id]=\"id + '-label'\">\n    <nx-icon-toggle-button\n      [label]=\"label\"\n      [hint]=\"hint\"\n      [checked]=\"checked\"\n      [icon]=\"iconName\"\n      [negative]=\"negative\"\n      [svg]=\"svgUrl\"\n      [disabled]=\"disabled\"\n      [inGroup]=\"inGroup\"\n      [touched]=\"_touched\">\n    </nx-icon-toggle-button>\n    <!-- The mobile toggle button is needed for the responsive mobile version of the component.\n    The display swtich is handled in the css. -->\n    <nx-mobile-toggle-button\n      [label]=\"label\"\n      [hint]=\"hint\"\n      [checked]=\"checked\"\n      [negative]=\"negative\"\n      [disabled]=\"disabled\">\n    </nx-mobile-toggle-button>\n</label>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        {
                            provide: ToggleButton,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NxCircleToggleComponent; }))
                        },
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NxCircleToggleComponent; })),
                            multi: true
                        }
                    ],
                    host: {
                        '[class.nx-toggle-circle]': 'true',
                        '[class.in-group]': 'inGroup',
                        '[class.is-disabled]': 'disabled',
                        '[class.is-responsive]': 'responsive'
                    },
                    styles: [":host{display:inline-block;vertical-align:top;position:relative}:host:not(.is-responsive){opacity:.9999}:host .nx-circle-toggle__input{opacity:0;position:absolute}:host:not(.in-group){margin-right:64px}@media (max-width:703px){:host:not(.in-group){margin-right:48px}}:host-context([data-whatinput=keyboard]) .nx-circle-toggle__input:focus+.nx-circle-toggle__label ::ng-deep .nx-toggle-circle__check-focus,:host-context([data-whatinput=keyboard]) .nx-circle-toggle__input:focus+.nx-circle-toggle__label ::ng-deep .nx-toggle-circle__icon-wrapper{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6}:host-context([data-whatinput=keyboard]) .nx-circle-toggle__input:focus+.nx-circle-toggle__label ::ng-deep nx-mobile-toggle-button{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;z-index:1}"]
                }] }
    ];
    /** @nocollapse */
    NxCircleToggleComponent.ctorParameters = function () { return [
        { type: NxCircleToggleGroupComponent, decorators: [{ type: Optional }] },
        { type: UniqueSelectionDispatcher },
        { type: ChangeDetectorRef }
    ]; };
    NxCircleToggleComponent.propDecorators = {
        name: [{ type: Input }],
        checkedChange: [{ type: Output }],
        selectionChange: [{ type: Output }],
        checked: [{ type: Input }],
        value: [{ type: Input }],
        iconName: [{ type: Input, args: ['icon',] }],
        svg: [{ type: Input }],
        svgChecked: [{ type: Input }],
        label: [{ type: Input }],
        hint: [{ type: Input }],
        negative: [{ type: Input }],
        responsive: [{ type: Input }],
        disabled: [{ type: Input }],
        toggleButton: [{ type: ViewChild, args: [NxMobileToggleButtonComponent,] }],
        onMouseEnter: [{ type: HostListener, args: ['mouseenter',] }],
        onMouseLeave: [{ type: HostListener, args: ['mouseleave',] }],
        onTouchStart: [{ type: HostListener, args: ['touchstart',] }]
    };
    return NxCircleToggleComponent;
}(ToggleButton));
export { NxCircleToggleComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._id;
    /**
     * \@docs-private
     * @type {?}
     */
    NxCircleToggleComponent.prototype.inGroup;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._name;
    /**
     * An event that is emitted when the checked state fo the circle toggle changes.
     * @type {?}
     */
    NxCircleToggleComponent.prototype.checkedChange;
    /**
     * An event that is emitted when the checked state of the circle toggle changes.
     * The event object contains the circle toggle itself and its value (see ToggleChangeEvent).
     * @type {?}
     */
    NxCircleToggleComponent.prototype.selectionChange;
    /** @type {?} */
    NxCircleToggleComponent.prototype._checked;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._value;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._iconName;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._svg;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._svgChecked;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._label;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._hint;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._negative;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._responsive;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._disabled;
    /**
     * \@docs-private
     * @type {?}
     */
    NxCircleToggleComponent.prototype.toggleButton;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._hover;
    /**
     * touched is set to true on touch devices.
     * @type {?}
     */
    NxCircleToggleComponent.prototype._touched;
    /** @type {?} */
    NxCircleToggleComponent.prototype._removeUniqueSelectionListener;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype.onTouchedCallback;
    /**
     * \@docs-private
     * @type {?}
     */
    NxCircleToggleComponent.prototype.toggleGroup;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._checkedDispatcher;
    /**
     * @type {?}
     * @private
     */
    NxCircleToggleComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2lyY2xlLXRvZ2dsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuei9uZ3gtbmRieC8iLCJzb3VyY2VzIjpbImNpcmNsZS10b2dnbGUvY2lyY2xlLXRvZ2dsZS9jaXJjbGUtdG9nZ2xlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQW9DLFlBQVksRUFBRSxpQkFBaUIsRUFBRSx1QkFBdUIsRUFDL0gsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRXJFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQUNwRyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSx3REFBd0QsQ0FBQztBQUV2RztJQU9FLDJCQUFZLE1BQU0sRUFBRSxLQUFLO1FBQ3ZCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFYRCxJQVdDOzs7Ozs7O0lBVEMsbUNBQXFCOzs7OztJQUdyQixrQ0FBYzs7O0lBUVosTUFBTSxHQUFHLENBQUM7QUFFZDtJQXVCNkMsbURBQVk7SUFvTnZELGlDQUFZLG9CQUFvQixDQUFvQixXQUF5QyxFQUNuRixrQkFBNkMsRUFBVSxrQkFBcUM7UUFEdEcsWUFFRSxpQkFBTyxTQUtSO1FBUG1ELGlCQUFX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Szs2QkFZTCxLQUFLO3dCQVlMLEtBQUs7dUJBWUwsS0FBSzsyQkFZTCxLQUFLOzZCQWdCTCxLQUFLOzJCQWdCTCxLQUFLOytCQWNMLFNBQVMsU0FBQyw2QkFBNkI7K0JBU3ZDLFlBQVksU0FBQyxZQUFZOytCQU96QixZQUFZLFNBQUMsWUFBWTsrQkFPekIsWUFBWSxTQUFDLFlBQVk7O0lBNkg1Qiw4QkFBQztDQUFBLEFBL1ZELENBdUI2QyxZQUFZLEdBd1V4RDtTQXhVWSx1QkFBdUI7Ozs7OztJQUdsQyxzQ0FBa0Q7Ozs7O0lBR2xELDBDQUF5Qjs7Ozs7SUFlekIsd0NBQTZCOzs7OztJQWU3QixnREFDNEM7Ozs7OztJQU01QyxrREFDd0Q7O0lBRXhELDJDQUEwQjs7Ozs7SUFjMUIseUNBQThCOzs7OztJQVk5Qiw0Q0FBaUM7Ozs7O0lBV2pDLHVDQUE0Qjs7Ozs7SUFZNUIsOENBQW1DOzs7OztJQVluQyx5Q0FBOEI7Ozs7O0lBWTlCLHdDQUE2Qjs7Ozs7SUFZN0IsNENBQWtCOzs7OztJQWdCbEIsOENBQW9COzs7OztJQWdCcEIsNENBQTJCOzs7OztJQWlCM0IsK0NBQzRDOzs7OztJQUU1Qyx5Q0FBZ0M7Ozs7O0lBR2hDLDJDQUEwQjs7SUFxQjFCLGlFQUF1RDs7Ozs7SUFFdkQsbURBQXFEOzs7OztJQUNyRCxvREFBc0M7Ozs7O0lBRUwsOENBQTREOzs7OztJQUMzRixxREFBcUQ7Ozs7O0lBQUUscURBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIElucHV0LCBPdXRwdXQsIFZpZXdDaGlsZCwgT3B0aW9uYWwsIE9uSW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0LCBIb3N0TGlzdGVuZXIsIENoYW5nZURldGVjdG9yUmVmLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFVuaXF1ZVNlbGVjdGlvbkRpc3BhdGNoZXIgfSBmcm9tICdAYW5ndWxhci9jZGsvY29sbGVjdGlvbnMnO1xuXG5pbXBvcnQgeyBUb2dnbGVCdXR0b24gfSBmcm9tICcuL3RvZ2dsZS1idXR0b24nO1xuaW1wb3J0IHsgTnhDaXJjbGVUb2dnbGVHcm91cENvbXBvbmVudCB9IGZyb20gJy4uL2NpcmNsZS10b2dnbGUtZ3JvdXAvY2lyY2xlLXRvZ2dsZS1ncm91cC5jb21wb25lbnQnO1xuaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IE54TW9iaWxlVG9nZ2xlQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vbW9iaWxlLXRvZ2dsZS1idXR0b24vbW9iaWxlLXRvZ2dsZS1idXR0b24uY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIFRvZ2dsZUNoYW5nZUV2ZW50IHtcbiAgLyoqIEEgdG9nZ2xlIGJ1dHRvbiAqL1xuICBidXR0b246IFRvZ2dsZUJ1dHRvbjtcblxuICAvKiogVGhlIHZhbHVlIG9mIHRoZSB0b2dnbGUgYnV0dG9uIHRoYXQgaXMgc2VudCB3aXRoIHRoZSBldmVudC4gKi9cbiAgdmFsdWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihidXR0b24sIHZhbHVlKSB7XG4gICAgdGhpcy5idXR0b24gPSBidXR0b247XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG59XG5cbmxldCBuZXh0SWQgPSAwO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdueC1jaXJjbGUtdG9nZ2xlJyxcbiAgdGVtcGxhdGVVcmw6ICdjaXJjbGUtdG9nZ2xlLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJ2NpcmNsZS10b2dnbGUuY29tcG9uZW50LnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IFRvZ2dsZUJ1dHRvbixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE54Q2lyY2xlVG9nZ2xlQ29tcG9uZW50KVxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOeENpcmNsZVRvZ2dsZUNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MubngtdG9nZ2xlLWNpcmNsZV0nOiAndHJ1ZScsXG4gICAgJ1tjbGFzcy5pbi1ncm91cF0nOiAnaW5Hcm91cCcsXG4gICAgJ1tjbGFzcy5pcy1kaXNhYmxlZF0nOiAnZGlzYWJsZWQnLFxuICAgICdbY2xhc3MuaXMtcmVzcG9uc2l2ZV0nOiAncmVzcG9uc2l2ZSdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBOeENpcmNsZVRvZ2dsZUNvbXBvbmVudCBleHRlbmRzIFRvZ2dsZUJ1dHRvbiBpbXBsZW1lbnRzXG5PbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuXG4gIHByaXZhdGUgX2lkOiBzdHJpbmcgPSBgdG9nZ2xlLWJ1dHRvbi0ke25leHRJZCsrfWA7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgaW5Hcm91cDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJZCBvZiB0aGUgY2lyY2xlIHRvZ2dsZS5cbiAgICpcbiAgICogSWYgbm90IHNldCwgdGhlIGNpcmNsZSB0b2dnbGUgZ2V0cyBhbiBpbmNyZW1lbnRlZCB2YWx1ZSBieSBkZWZhdWx0LlxuICAgKi9cbiAgc2V0IGlkKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9pZCA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIHByaXZhdGUgX25hbWU6IHN0cmluZyA9IG51bGw7XG5cbiAgLyoqIE5hbWUgdGhhdCBpcyB1c2VkIGZvciBhY2Nlc3NpYmlsaXR5LiAqL1xuICBASW5wdXQoKVxuICBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cblxuICAvKipcbiAgICogQW4gZXZlbnQgdGhhdCBpcyBlbWl0dGVkIHdoZW4gdGhlIGNoZWNrZWQgc3RhdGUgZm8gdGhlIGNpcmNsZSB0b2dnbGUgY2hhbmdlcy5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBjaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gIC8qKlxuICAgKiBBbiBldmVudCB0aGF0IGlzIGVtaXR0ZWQgd2hlbiB0aGUgY2hlY2tlZCBzdGF0ZSBvZiB0aGUgY2lyY2xlIHRvZ2dsZSBjaGFuZ2VzLlxuICAgKiBUaGUgZXZlbnQgb2JqZWN0IGNvbnRhaW5zIHRoZSBjaXJjbGUgdG9nZ2xlIGl0c2VsZiBhbmQgaXRzIHZhbHVlIChzZWUgVG9nZ2xlQ2hhbmdlRXZlbnQpLlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIHNlbGVjdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8VG9nZ2xlQ2hhbmdlRXZlbnQ+KCk7XG5cbiAgX2NoZWNrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLyoqIFdoZXRoZXIgdGhlIGNpcmNsZSB0b2dnbGUgaXMgY2hlY2tlZC4gKi9cbiAgQElucHV0KClcbiAgc2V0IGNoZWNrZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgaWYgKHRoaXMuY2hlY2tlZCAhPT0gbmV3VmFsdWUpIHtcbiAgICAgIHRoaXMuX2NoZWNrZWQgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgY2hlY2tlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tlZDtcbiAgfVxuXG4gIHByaXZhdGUgX3ZhbHVlOiBzdHJpbmcgPSBudWxsO1xuXG4gIC8qKiBUaGUgdmFsdWUgdGhhdCBpcyB1c2VkIGluIHRoZSBtb2RlbC4gKi9cbiAgQElucHV0KClcbiAgc2V0IHZhbHVlKG5ld1ZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCB2YWx1ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2ljb25OYW1lOiBzdHJpbmcgPSBudWxsO1xuICAvKiogSWQgb2YgdGhlIGljb24gdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkLiAqL1xuICBASW5wdXQoJ2ljb24nKVxuICBzZXQgaWNvbk5hbWUobmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5faWNvbk5hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBpY29uTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pY29uTmFtZTtcbiAgfVxuXG4gIHByaXZhdGUgX3N2Zzogc3RyaW5nID0gbnVsbDtcblxuICAvKiogU1ZHIHRoYXQgaXMgZGlzcGxheWVkIGlmIHRoZSBjaXJjbGUgdG9nZ2xlIGlzIHVuY2hlY2tlZC4gKi9cbiAgQElucHV0KClcbiAgc2V0IHN2ZyhzcmM6IHN0cmluZykge1xuICAgIHRoaXMuX3N2ZyA9IHNyYztcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgc3ZnKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3N2ZztcbiAgfVxuXG4gIHByaXZhdGUgX3N2Z0NoZWNrZWQ6IHN0cmluZyA9IG51bGw7XG5cbiAgLyoqIFNWRyB0aGF0IGlzIGRpc3BsYXllZCBpZiB0aGUgY2lyY2xlIHRvZ2dsZSBpcyBjaGVja2VkLiAqL1xuICBASW5wdXQoKVxuICBzZXQgc3ZnQ2hlY2tlZChzcmM6IHN0cmluZykge1xuICAgIHRoaXMuX3N2Z0NoZWNrZWQgPSBzcmM7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHN2Z0NoZWNrZWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fc3ZnQ2hlY2tlZDtcbiAgfVxuXG4gIHByaXZhdGUgX2xhYmVsOiBzdHJpbmcgPSBudWxsO1xuXG4gIC8qKiBMYWJlbCBkaXNwbGF5ZWQgYmVsb3cgdGhlIGNpcmNsZS4gKi9cbiAgQElucHV0KClcbiAgc2V0IGxhYmVsKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9sYWJlbCA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBsYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbDtcbiAgfVxuXG4gIHByaXZhdGUgX2hpbnQ6IHN0cmluZyA9IG51bGw7XG5cbiAgLyoqIEFkZGl0aW9uYWwgaGludCBkaXNwbGF5ZWQgYmVsb3cgdGhlIGxhYmVsLiAqL1xuICBASW5wdXQoKVxuICBzZXQgaGludCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5faGludCA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBoaW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2hpbnQ7XG4gIH1cblxuICBwcml2YXRlIF9uZWdhdGl2ZTtcblxuICAvKiogV2hldGhlciB0aGUgY2lyY2xlIHRvZ2dsZSB1c2VzIHRoZSBuZWdhdGl2ZSBzZXQgb2Ygc3R5bGluZy4gKi9cbiAgQElucHV0KClcbiAgc2V0IG5lZ2F0aXZlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgdGhpcy5fbmVnYXRpdmUgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBuZWdhdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmVnYXRpdmU7XG4gIH1cblxuICBwcml2YXRlIF9yZXNwb25zaXZlO1xuXG4gIC8qKiBXaGV0aGVyIHRoZSBjaXJjbGUgdG9nZ2xlIGhhcyBhIHJlc3BvbnNpdmUgYmVoYXZpb3IuICovXG4gIEBJbnB1dCgpXG4gIHNldCByZXNwb25zaXZlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgIGlmICh0aGlzLnJlc3BvbnNpdmUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICB0aGlzLl9yZXNwb25zaXZlID0gbmV3VmFsdWU7XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcmVzcG9uc2l2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2l2ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuO1xuXG4gIC8qKiBXaGV0aGVyIHRoZSBjaXJjbGUgdG9nZ2xlIGlzIGRpc2FibGVkLiAqL1xuICBASW5wdXQoKVxuICBzZXQgZGlzYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgIT09IG5ld1ZhbHVlKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlZCA9IG5ld1ZhbHVlO1xuICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIEBWaWV3Q2hpbGQoTnhNb2JpbGVUb2dnbGVCdXR0b25Db21wb25lbnQpXG4gIHRvZ2dsZUJ1dHRvbjogTnhNb2JpbGVUb2dnbGVCdXR0b25Db21wb25lbnQ7XG5cbiAgcHJpdmF0ZSBfaG92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKiogdG91Y2hlZCBpcyBzZXQgdG8gdHJ1ZSBvbiB0b3VjaCBkZXZpY2VzLiAqL1xuICBfdG91Y2hlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNlZW50ZXInKSBvbk1vdXNlRW50ZXIoKSB7XG4gICAgaWYgKCF0aGlzLl90b3VjaGVkKSB7XG4gICAgICB0aGlzLl9ob3ZlciA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgQEhvc3RMaXN0ZW5lcignbW91c2VsZWF2ZScpIG9uTW91c2VMZWF2ZSgpIHtcbiAgICBpZiAoIXRoaXMuX3RvdWNoZWQpIHtcbiAgICAgIHRoaXMuX2hvdmVyID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgQEhvc3RMaXN0ZW5lcigndG91Y2hzdGFydCcpIG9uVG91Y2hTdGFydCgpIHtcbiAgICB0aGlzLl90b3VjaGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9yZW1vdmVVbmlxdWVTZWxlY3Rpb25MaXN0ZW5lcjogKCkgPT4gdm9pZCA9ICgpID0+IHsgfTtcblxuICBwcml2YXRlIG9uQ2hhbmdlQ2FsbGJhY2sgPSAoY2hlY2tlZDogYm9vbGVhbikgPT4geyB9O1xuICBwcml2YXRlIG9uVG91Y2hlZENhbGxiYWNrID0gKCkgPT4geyB9O1xuXG4gIGNvbnN0cnVjdG9yKC8qKiBAZG9jcy1wcml2YXRlICovIEBPcHRpb25hbCgpIHB1YmxpYyB0b2dnbGVHcm91cDogTnhDaXJjbGVUb2dnbGVHcm91cENvbXBvbmVudCxcbiAgICBwcml2YXRlIF9jaGVja2VkRGlzcGF0Y2hlcjogVW5pcXVlU2VsZWN0aW9uRGlzcGF0Y2hlciwgcHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmICh0aGlzLnRvZ2dsZUdyb3VwKSB7XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnRvZ2dsZUdyb3VwLm5hbWU7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMudG9nZ2xlR3JvdXApIHtcbiAgICAgIHRoaXMuYXR0YWNoTGlzdGVuZXJGb3JHcm91cCgpO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBpZiAodGhpcy50b2dnbGVHcm91cCkge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuaW5Hcm91cCA9IHRydWU7XG4gICAgICAgIHRoaXMubmVnYXRpdmUgPSB0aGlzLnRvZ2dsZUdyb3VwLm5lZ2F0aXZlO1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gdGhpcy50b2dnbGVHcm91cC5kaXNhYmxlZDtcbiAgICAgICAgdGhpcy5yZXNwb25zaXZlID0gdGhpcy50b2dnbGVHcm91cC5yZXNwb25zaXZlO1xuICAgICAgICB0aGlzLmlkID0gdGhpcy50b2dnbGVHcm91cC5pZCArIGAtYnV0dG9uLSR7bmV4dElkKyt9YDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIC8vIGZ1bmN0aW9uIHJldHVybmVkIGJ5IHRoZSBsaXN0ZW5lclxuICAgIHRoaXMuX3JlbW92ZVVuaXF1ZVNlbGVjdGlvbkxpc3RlbmVyKCk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBhdHRhY2hMaXN0ZW5lckZvckdyb3VwKCkge1xuICAgIHRoaXMuX3JlbW92ZVVuaXF1ZVNlbGVjdGlvbkxpc3RlbmVyID1cbiAgICAgIHRoaXMuX2NoZWNrZWREaXNwYXRjaGVyLmxpc3RlbigoZ3JvdXBJZDogc3RyaW5nLCBidXR0b25JZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlkICE9PSBidXR0b25JZCAmJiBncm91cElkID09PSB0aGlzLnRvZ2dsZUdyb3VwLmlkKSB7XG4gICAgICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgd3JpdGVWYWx1ZShuZXdWYWx1ZSk6IHZvaWQge1xuICAgIHRoaXMuY2hlY2tlZCA9IG5ld1ZhbHVlO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xuICB9XG5cbiAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgdG9nZ2xlKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGlmICgodGhpcy50b2dnbGVHcm91cCAmJiB0aGlzLmNoZWNrZWQpIHx8IHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcbiAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLmNoZWNrZWQpO1xuICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlLmVtaXQodGhpcy5jaGVja2VkKTtcbiAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlLmVtaXQobmV3IFRvZ2dsZUNoYW5nZUV2ZW50KHRoaXMsIHRoaXMudmFsdWUpKTtcbiAgICAgIGlmICh0aGlzLnRvZ2dsZUdyb3VwKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrZWREaXNwYXRjaGVyLm5vdGlmeSh0aGlzLnRvZ2dsZUdyb3VwLmlkLCB0aGlzLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRvY3MtcHJpdmF0ZVxuICAgKlxuICAgKiBtZXRob2QgY2FsbGVkIGJ5IHRoZSBncm91cCBpZiB0aGUgaW50ZXJuYWwgdmFsdWUgb2YgdGhlIGdyb3VwIGlzIGNoYW5nZWQgcHJvZ3JhbWF0aWNhbGx5LFxuICAgKiBkb2VzIG5vdCB0cmlnZ2VyIGNoYW5nZSBlbWlzc2lvblxuICAgKi9cbiAgc2V0R3JvdXBTZWxlY3Rpb24oKSB7XG4gICAgLy8gcHJvcGFnYXRlIGNoYW5nZXMgb25seSBpZiB0aGUgdmFsdWUgaW4gdGhlIGdyb3VwIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBidXR0b24gY2hlY2tlZCB2YWx1ZVxuICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG4gICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xuICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuY2hlY2tlZCk7XG4gICAgICB0aGlzLl9jaGVja2VkRGlzcGF0Y2hlci5ub3RpZnkodGhpcy50b2dnbGVHcm91cC5pZCwgdGhpcy5pZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZ2V0IHN2Z0J1dHRvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnN2ZyAmJiAhIXRoaXMuc3ZnQ2hlY2tlZDtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGdldCBzdmdVcmwoKTogc3RyaW5nIHtcbiAgICBsZXQgdXNlRmlsbGVkU3ZnID0gdGhpcy5jaGVja2VkIHx8ICghdGhpcy5kaXNhYmxlZCAmJiB0aGlzLl9ob3Zlcik7XG4gICAgaWYgKHRoaXMubmVnYXRpdmUpIHtcbiAgICAgIHVzZUZpbGxlZFN2ZyA9ICF1c2VGaWxsZWRTdmc7XG4gICAgfVxuICAgIHJldHVybiB1c2VGaWxsZWRTdmcgPyB0aGlzLnN2Z0NoZWNrZWQgOiB0aGlzLnN2ZztcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLnRvZ2dsZUdyb3VwID8gJ3JhZGlvJyA6ICdjaGVja2JveCc7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBoYW5kbGVFbnRlcktleShldmVudCkge1xuICAgIGlmICghdGhpcy50b2dnbGVHcm91cCkge1xuICAgICAgdGhpcy50b2dnbGUoZXZlbnQpO1xuICAgIH1cbiAgfVxufVxuIl19