/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { Component, EventEmitter, forwardRef, Input, Output, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
var NxTaglistComponent = /** @class */ (function () {
    function NxTaglistComponent(_changeDetectorRef) {
        this._changeDetectorRef = _changeDetectorRef;
        /**
         * An event is dispatched each time when the list of tags changed.
         */
        this.tagsChange = new EventEmitter();
        /**
         * An event is dispatched each time when a tag is clicked.
         */
        this.tagClickEvent = new EventEmitter();
        this._tags = [];
        this._allowTagDeletion = true;
        this._isKeywordList = false;
        this._labelProperty = 'nxTaglistLabel';
        this._valueFormatterFn = (/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value; });
        this._onChange = (/**
         * @return {?}
         */
        function () { });
        this._onTouched = (/**
         * @return {?}
         */
        function () { });
    }
    Object.defineProperty(NxTaglistComponent.prototype, "tags", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tags;
        },
        /** Sets the list of tags. */
        set: /**
         * Sets the list of tags.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tags = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "allowTagDeletion", {
        get: /**
         * @return {?}
         */
        function () {
            return this._allowTagDeletion;
        },
        /** Whether the tags can be removed from the list. */
        set: /**
         * Whether the tags can be removed from the list.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._allowTagDeletion = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "isKeywordList", {
        get: /**
         * @return {?}
         */
        function () {
            return this._isKeywordList;
        },
        /** Whether the tags can be styled as keywords. */
        set: /**
         * Whether the tags can be styled as keywords.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._isKeywordList = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "labelProp", {
        get: /**
         * @return {?}
         */
        function () {
            return this._labelProperty;
        },
        /** Sets the label property, in case tags represent objects. */
        set: /**
         * Sets the label property, in case tags represent objects.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._labelProperty !== value) {
                this._labelProperty = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "labelledby", {
        get: /**
         * @return {?}
         */
        function () {
            return this._ariaLabelledBy;
        },
        /** Sets the label property to improve accessibility. */
        set: /**
         * Sets the label property to improve accessibility.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._ariaLabelledBy !== value) {
                this._ariaLabelledBy = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "valueFormatter", {
        get: /**
         * @return {?}
         */
        function () {
            return this._valueFormatterFn;
        },
        /** Sets the customization function for tag value.  */
        set: /**
         * Sets the customization function for tag value.
         * @param {?} fn
         * @return {?}
         */
        function (fn) {
            this._valueFormatterFn = fn;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    /** Allows to delete a tag given index. Takes index of the tag to be deleted as a parameter */
    /**
     * Allows to delete a tag given index. Takes index of the tag to be deleted as a parameter
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    NxTaglistComponent.prototype.delete = /**
     * Allows to delete a tag given index. Takes index of the tag to be deleted as a parameter
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    function (index, value) {
        if (this.allowTagDeletion) {
            this.tags = tslib_1.__spread(this.tags.slice(0, index), this.tags.slice(index + 1));
            this._onChange(this.tags);
            this.tagsChange.emit(this.tags);
        }
    };
    /** Allows to add a tag. Takes tag object as an input */
    /**
     * Allows to add a tag. Takes tag object as an input
     * @param {?} tag
     * @return {?}
     */
    NxTaglistComponent.prototype.addTag = /**
     * Allows to add a tag. Takes tag object as an input
     * @param {?} tag
     * @return {?}
     */
    function (tag) {
        var _this = this;
        if (!tag) {
            return;
        }
        // make sure tag is either string or has the configured label prop and is not yet in the list
        if ((typeof tag === 'string' && this.tags.indexOf(tag) === -1) ||
            (tag[this.labelProp] && this.tags.filter((/**
             * @param {?} t
             * @return {?}
             */
            function (t) { return t[_this.labelProp] === tag[_this.labelProp]; })).length < 1)) {
            this.tags = tslib_1.__spread(this.tags, [tag]);
            this._onChange(this.tags);
            this.tagsChange.emit(this.tags);
        }
    };
    /** Allows to clear the tag list. */
    /**
     * Allows to clear the tag list.
     * @return {?}
     */
    NxTaglistComponent.prototype.clearTags = /**
     * Allows to clear the tag list.
     * @return {?}
     */
    function () {
        this.tags = [];
        this._onChange(this.tags);
        this.tagsChange.emit(this.tags);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} tags
     * @return {?}
     */
    NxTaglistComponent.prototype.writeValue = /**
     * \@docs-private
     * @param {?} tags
     * @return {?}
     */
    function (tags) {
        this.tags = tags;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxTaglistComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxTaglistComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onTouched = fn;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} tag
     * @return {?}
     */
    NxTaglistComponent.prototype.renderTag = /**
     * \@docs-private
     * @param {?} tag
     * @return {?}
     */
    function (tag) {
        /** @type {?} */
        var tagStr = typeof tag === 'string' ? tag : tag[this.labelProp];
        return this.valueFormatter(tagStr);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    NxTaglistComponent.prototype.tagClick = /**
     * \@docs-private
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    function (index, value) {
        this.tagClickEvent.emit(this.tags[index]);
    };
    NxTaglistComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-taglist',
                    template: "  <ul class=\"nx-taglist\" *ngIf=\"tags.length > 0\">\n    <li class=\"nx-taglist__list-item\" tabindex=\"-1\" *ngFor=\"let tag of tags; let i = index\">\n      <nx-tag [value]=\"renderTag(tag)\" [removable]=\"allowTagDeletion\" (clicked)=\"tagClick(i, $event)\" (removed)=\"delete(i, $event)\"></nx-tag>\n  </li>\n  </ul>\n  <ng-content *ngIf=\"tags.length < 1\"></ng-content>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NxTaglistComponent; })),
                            multi: true
                        }
                    ],
                    host: {
                        '[class.nx-taglist--keyword]': 'isKeywordList',
                        '[attr.aria-labelledby]': 'labelledby || null'
                    },
                    styles: [":host{position:relative;min-height:32px;margin-bottom:32px;display:flex;justify-content:space-between}.nx-taglist{display:flex;flex-wrap:wrap}.nx-taglist__list-item{list-style:none;margin-right:12px;margin-bottom:12px;flex-wrap:wrap;display:flex}@media (max-width:703px){.nx-taglist--keyword{justify-content:center}}"]
                }] }
    ];
    /** @nocollapse */
    NxTaglistComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    NxTaglistComponent.propDecorators = {
        tagsChange: [{ type: Output, args: ['nxTagsChange',] }],
        tagClickEvent: [{ type: Output, args: ['nxTagClick',] }],
        tags: [{ type: Input, args: ['nxTags',] }],
        allowTagDeletion: [{ type: Input, args: ['nxAllowTagDeletion',] }],
        isKeywordList: [{ type: Input, args: ['nxIsKeywordList',] }],
        labelProp: [{ type: Input, args: ['nxLabelProperty',] }],
        labelledby: [{ type: Input, args: ['aria-labelledby',] }],
        valueFormatter: [{ type: Input, args: ['nxValueFormatter',] }]
    };
    return NxTaglistComponent;
}());
export { NxTaglistComponent };
if (false) {
    /**
     * An event is dispatched each time when the list of tags changed.
     * @type {?}
     */
    NxTaglistComponent.prototype.tagsChange;
    /**
     * An event is dispatched each time when a tag is clicked.
     * @type {?}
     */
    NxTaglistComponent.prototype.tagClickEvent;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._tags;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._allowTagDeletion;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._isKeywordList;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._labelProperty;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._ariaLabelledBy;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._valueFormatterFn;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._onChange;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._onTouched;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFnbGlzdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuei9uZ3gtbmRieC8iLCJzb3VyY2VzIjpbInRhZ2xpc3QvdGFnbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvSCxPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFekU7SUFtR0UsNEJBQW9CLGtCQUFxQztRQUFyQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1COzs7O1FBOUVqQyxlQUFVLEdBQXdCLElBQUksWUFBWSxFQUFTLENBQUM7Ozs7UUFHOUQsa0JBQWEsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUV6RSxVQUFLLEdBQWUsRUFBRSxDQUFDO1FBV3ZCLHNCQUFpQixHQUFZLElBQUksQ0FBQztRQVdsQyxtQkFBYyxHQUFZLEtBQUssQ0FBQztRQVdoQyxtQkFBYyxHQUFXLGdCQUFnQixDQUFDO1FBMEIxQyxzQkFBaUI7Ozs7UUFBMkIsVUFBQyxLQUFLLElBQUssT0FBQSxLQUFLLEVBQUwsQ0FBSyxFQUFDO1FBVzdELGNBQVM7OztRQUF5QixjQUFPLENBQUMsRUFBQztRQUMzQyxlQUFVOzs7UUFBYyxjQUFPLENBQUMsRUFBQztJQUVtQixDQUFDO0lBdkU3RCxzQkFDSSxvQ0FBSTs7OztRQUlSO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7UUFSRCw2QkFBNkI7Ozs7OztRQUM3QixVQUNTLEtBQWlCO1lBQ3hCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ25CLElBQUksQ0FBQyxrQkFBa0Is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V3hDLDRDQUFrRDs7Ozs7SUFhbEQsNkNBQWdDOzs7OztJQWFoQywrQ0FBcUU7Ozs7O0lBV3JFLHVDQUFtRDs7Ozs7SUFDbkQsd0NBQXlDOzs7OztJQUU3QixnREFBNkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYsIElucHV0LCBPdXRwdXQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdueC10YWdsaXN0JyxcbiAgdGVtcGxhdGVVcmw6ICd0YWdsaXN0LmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0eWxlVXJsczogWyAnLi90YWdsaXN0LmNvbXBvbmVudC5zY3NzJyBdLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE54VGFnbGlzdENvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MubngtdGFnbGlzdC0ta2V5d29yZF0nOiAnaXNLZXl3b3JkTGlzdCcsXG4gICAgJ1thdHRyLmFyaWEtbGFiZWxsZWRieV0nOiAnbGFiZWxsZWRieSB8fCBudWxsJ1xuICB9XG59KVxuXG5leHBvcnQgY2xhc3MgTnhUYWdsaXN0Q29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuXG4gIC8qKiBBbiBldmVudCBpcyBkaXNwYXRjaGVkIGVhY2ggdGltZSB3aGVuIHRoZSBsaXN0IG9mIHRhZ3MgY2hhbmdlZC4gKi9cbiAgQE91dHB1dCgnbnhUYWdzQ2hhbmdlJykgdGFnc0NoYW5nZTogRXZlbnRFbWl0dGVyPGFueVtdPiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55W10+KCk7XG5cbiAgLyoqIEFuIGV2ZW50IGlzIGRpc3BhdGNoZWQgZWFjaCB0aW1lIHdoZW4gYSB0YWcgaXMgY2xpY2tlZC4gKi9cbiAgQE91dHB1dCgnbnhUYWdDbGljaycpIHRhZ0NsaWNrRXZlbnQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgcHJpdmF0ZSBfdGFnczogQXJyYXk8YW55PiA9IFtdO1xuICAvKiogU2V0cyB0aGUgbGlzdCBvZiB0YWdzLiAqL1xuICBASW5wdXQoJ254VGFncycpXG4gIHNldCB0YWdzKHZhbHVlOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5fdGFncyA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCB0YWdzKCk6IEFycmF5PGFueT4ge1xuICAgIHJldHVybiB0aGlzLl90YWdzO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWxsb3dUYWdEZWxldGlvbjogYm9vbGVhbiA9IHRydWU7XG4gIC8qKiBXaGV0aGVyIHRoZSB0YWdzIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIGxpc3QuICovXG4gIEBJbnB1dCgnbnhBbGxvd1RhZ0RlbGV0aW9uJylcbiAgc2V0IGFsbG93VGFnRGVsZXRpb24odmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hbGxvd1RhZ0RlbGV0aW9uID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgYWxsb3dUYWdEZWxldGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fYWxsb3dUYWdEZWxldGlvbjtcbiAgfVxuXG4gIHByaXZhdGUgX2lzS2V5d29yZExpc3Q6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLyoqIFdoZXRoZXIgdGhlIHRhZ3MgY2FuIGJlIHN0eWxlZCBhcyBrZXl3b3Jkcy4gKi9cbiAgQElucHV0KCdueElzS2V5d29yZExpc3QnKVxuICBzZXQgaXNLZXl3b3JkTGlzdCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2lzS2V5d29yZExpc3QgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBpc0tleXdvcmRMaXN0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc0tleXdvcmRMaXN0O1xuICB9XG5cbiAgcHJpdmF0ZSBfbGFiZWxQcm9wZXJ0eTogc3RyaW5nID0gJ254VGFnbGlzdExhYmVsJztcbiAgICAvKiogU2V0cyB0aGUgbGFiZWwgcHJvcGVydHksIGluIGNhc2UgdGFncyByZXByZXNlbnQgb2JqZWN0cy4gKi9cbiAgQElucHV0KCdueExhYmVsUHJvcGVydHknKVxuICBzZXQgbGFiZWxQcm9wKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fbGFiZWxQcm9wZXJ0eSAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX2xhYmVsUHJvcGVydHkgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgbGFiZWxQcm9wKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2xhYmVsUHJvcGVydHk7XG4gIH1cblxuICBwcml2YXRlIF9hcmlhTGFiZWxsZWRCeTogc3RyaW5nO1xuICAvKiogU2V0cyB0aGUgbGFiZWwgcHJvcGVydHkgdG8gaW1wcm92ZSBhY2Nlc3NpYmlsaXR5LiAqL1xuICBASW5wdXQoJ2FyaWEtbGFiZWxsZWRieScpXG4gIHNldCBsYWJlbGxlZGJ5KHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fYXJpYUxhYmVsbGVkQnkgIT09IHZhbHVlKSB7XG4gICAgICB0aGlzLl9hcmlhTGFiZWxsZWRCeSA9IHZhbHVlO1xuICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG4gIGdldCBsYWJlbGxlZGJ5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2FyaWFMYWJlbGxlZEJ5O1xuICB9XG5cbiAgcHJpdmF0ZSBfdmFsdWVGb3JtYXR0ZXJGbjogKHZhbHVlOiBhbnkpID0+IHN0cmluZyA9ICh2YWx1ZSkgPT4gdmFsdWU7XG4gIC8qKiBTZXRzIHRoZSBjdXN0b21pemF0aW9uIGZ1bmN0aW9uIGZvciB0YWcgdmFsdWUuICAqL1xuICBASW5wdXQoJ254VmFsdWVGb3JtYXR0ZXInKVxuICBzZXQgdmFsdWVGb3JtYXR0ZXIoZm46ICh2YWx1ZTogYW55KSA9PiBzdHJpbmcpIHtcbiAgICB0aGlzLl92YWx1ZUZvcm1hdHRlckZuID0gZm47XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHZhbHVlRm9ybWF0dGVyKCk6ICh2YWx1ZTogYW55KSA9PiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZUZvcm1hdHRlckZuO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25DaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkID0gKCkgPT4ge307XG4gIHByaXZhdGUgX29uVG91Y2hlZDogKCkgPT4gYW55ID0gKCkgPT4ge307XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7fVxuXG4gIC8qKiBBbGxvd3MgdG8gZGVsZXRlIGEgdGFnIGdpdmVuIGluZGV4LiBUYWtlcyBpbmRleCBvZiB0aGUgdGFnIHRvIGJlIGRlbGV0ZWQgYXMgYSBwYXJhbWV0ZXIgKi9cbiAgZGVsZXRlKGluZGV4OiBudW1iZXIsIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5hbGxvd1RhZ0RlbGV0aW9uKSB7XG4gICAgICB0aGlzLnRhZ3MgPSBbXG4gICAgICAgIC4uLnRoaXMudGFncy5zbGljZSgwLCBpbmRleCksXG4gICAgICAgIC4uLnRoaXMudGFncy5zbGljZShpbmRleCArIDEpXG4gICAgICBdO1xuICAgICAgdGhpcy5fb25DaGFuZ2UodGhpcy50YWdzKTtcbiAgICAgIHRoaXMudGFnc0NoYW5nZS5lbWl0KHRoaXMudGFncyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEFsbG93cyB0byBhZGQgYSB0YWcuIFRha2VzIHRhZyBvYmplY3QgYXMgYW4gaW5wdXQgKi9cbiAgYWRkVGFnKHRhZzogYW55KSB7XG4gICAgaWYgKCF0YWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBtYWtlIHN1cmUgdGFnIGlzIGVpdGhlciBzdHJpbmcgb3IgaGFzIHRoZSBjb25maWd1cmVkIGxhYmVsIHByb3AgYW5kIGlzIG5vdCB5ZXQgaW4gdGhlIGxpc3RcbiAgICBpZiAoKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnICYmIHRoaXMudGFncy5pbmRleE9mKHRhZykgPT09IC0xKSB8fFxuICAgICAgKHRhZ1sgdGhpcy5sYWJlbFByb3AgXSAmJiB0aGlzLnRhZ3MuZmlsdGVyKCh0KSA9PiB0WyB0aGlzLmxhYmVsUHJvcCBdID09PSB0YWdbIHRoaXMubGFiZWxQcm9wIF0pLmxlbmd0aCA8IDEpKSB7XG5cbiAgICAgIHRoaXMudGFncyA9IFsgLi4udGhpcy50YWdzLCB0YWcgXTtcbiAgICAgIHRoaXMuX29uQ2hhbmdlKHRoaXMudGFncyk7XG4gICAgICB0aGlzLnRhZ3NDaGFuZ2UuZW1pdCh0aGlzLnRhZ3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBBbGxvd3MgdG8gY2xlYXIgdGhlIHRhZyBsaXN0LiAqL1xuICBjbGVhclRhZ3MoKSB7XG4gICAgdGhpcy50YWdzID0gW107XG4gICAgdGhpcy5fb25DaGFuZ2UodGhpcy50YWdzKTtcbiAgICB0aGlzLnRhZ3NDaGFuZ2UuZW1pdCh0aGlzLnRhZ3MpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgd3JpdGVWYWx1ZSh0YWdzOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5fb25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHJlbmRlclRhZyh0YWc6IGFueSkge1xuICAgIGNvbnN0IHRhZ1N0cjogc3RyaW5nID0gdHlwZW9mIHRhZyA9PT0gJ3N0cmluZycgPyB0YWcgOiB0YWdbIHRoaXMubGFiZWxQcm9wIF07XG4gICAgcmV0dXJuIHRoaXMudmFsdWVGb3JtYXR0ZXIodGFnU3RyKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHRhZ0NsaWNrKGluZGV4LCB2YWx1ZTogYW55KSB7XG4gICAgdGhpcy50YWdDbGlja0V2ZW50LmVtaXQodGhpcy50YWdzW2luZGV4XSk7XG4gIH1cbn1cbiJdfQ==