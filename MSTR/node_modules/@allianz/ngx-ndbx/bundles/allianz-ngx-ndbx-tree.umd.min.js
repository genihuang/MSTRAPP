!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/core"),require("@angular/cdk/collections"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/tree")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/tree",["exports","@angular/common","@angular/cdk/bidi","@angular/cdk/coercion","@angular/core","@angular/cdk/collections","rxjs","rxjs/operators","@angular/cdk/tree"],t):t((e.allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"].tree={}),e.ng.common,e.ng.cdk.bidi,e.ng.cdk.coercion,e.ng.core,e.ng.cdk.collections,e.rxjs,e.rxjs.operators,e.ng.cdk.tree)}(this,function(e,t,n,o,r,i,a,s,d){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}var f=function(){function e(e){this.viewContainer=e}return e.decorators=[{type:r.Directive,args:[{selector:"[nxTreeNodeOutlet]"}]}],e.ctorParameters=function(){return[{type:r.ViewContainerRef}]},e}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.decorators=[{type:r.Component,args:[{selector:"nx-tree",exportAs:"nxTree",template:"<ng-container nxTreeNodeOutlet></ng-container>",host:{"class":"nx-tree",role:"tree"},encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush,providers:[{provide:d.CdkTree,useExisting:t}],styles:[":host.nx-tree{display:block}.nx-tree__node{display:block;overflow:hidden}"]}]}],t.propDecorators={_nodeOutlet:[{type:r.ViewChild,args:[f]}]},t}(d.CdkTree),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.decorators=[{type:r.Component,args:[{selector:"nx-tree-node",exportAs:"nxTreeNode",inputs:["disabled","tabIndex"],host:{"[attr.aria-expanded]":"isExpanded","[attr.aria-level]":'role === "treeitem" ? level : null',"[attr.role]":"role","class":"nx-tree__node","[class.is-expanded]":"isExpanded"},providers:[{provide:d.CdkTreeNode,useExisting:t}],template:'<div class="nx-tree__node-box">\n  <ng-content></ng-content>\n</div>\n'}]}],t}(d.CdkTreeNode),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.decorators=[{type:r.Directive,args:[{selector:"[nxTreeNodeDef]",inputs:["when: nxTreeNodeDefWhen"],providers:[{provide:d.CdkTreeNodeDef,useExisting:t}]}]}],t.propDecorators={data:[{type:r.Input,args:["nxTreeNode"]}]},t}(d.CdkTreeNodeDef),v=/([A-Za-z%]+)$/,x=function(){function e(e,t,n,r,o){var i=this;this._treeNode=e,this._tree=t,this._renderer=n,this._element=r,this._dir=o,this._destroyed=new a.Subject,this.indentUnits="px",this._offset=0,this._indent=24,this._setPadding(),this._dir&&this._dir.change.pipe(s.takeUntil(this._destroyed)).subscribe(function(){return i._setPadding()})}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=o.coerceNumberProperty(e),this._setPadding()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=o.coerceNumberProperty(e),this._setPadding()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(e){var t=e,n="px";if("string"==typeof e){var r=e.split(v);t=r[0],n=r[1]||n}this.indentUnits=n,this._indent=o.coerceNumberProperty(t),this._setPadding()},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype._paddingIndent=function(){var e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=this._level||e;return t?""+(t*this._indent+this._offset)+this.indentUnits:null},e.prototype._setPadding=function(){var e=this._paddingIndent(),t=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft";this._renderer.setStyle(this._element.nativeElement,t,e)},e.decorators=[{type:r.Directive,args:[{selector:"[nxTreeNodePadding]"}]}],e.ctorParameters=function(){return[{type:d.CdkTreeNode},{type:d.CdkTree},{type:r.Renderer2},{type:r.ElementRef},{type:n.Directionality,decorators:[{type:r.Optional}]}]},e.propDecorators={level:[{type:r.Input,args:["nxTreeNodePadding"]}],offset:[{type:r.Input,args:["nxTreeNodePaddingOffset"]}],indent:[{type:r.Input,args:["nxTreeNodePaddingIndent"]}]},e}(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.recursive=!1,e}return c(e,t),e.decorators=[{type:r.Directive,args:[{selector:"[nxTreeNodeToggle]",host:{"(click)":"_toggle($event)"},providers:[{provide:d.CdkTreeNodeToggle,useExisting:e}]}]}],e.propDecorators={recursive:[{type:r.Input,args:["nxTreeNodeToggleRecursive"]}]},e}(d.CdkTreeNodeToggle),b=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[d.CdkTreeModule,t.CommonModule],declarations:[h,g,y,x,_,f],exports:[h,g,y,x,_,f]}]}],e}(),m=function(){function e(){}return e.prototype.transformFunction=function(e,t){var n=e.children,r=function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(e,["children"]);return u({},r,{level:t,expandable:Array.isArray(n)&&0<n.length})},e.prototype.getLevel=function(e){return e.level},e.prototype.isExpandable=function(e){return e.expandable},e.prototype.getChildren=function(e){return e.children},e.prototype._flattenNode=function(e,t,n,r){var o=this,i=this.transformFunction(e,t);if(n.push(i),this.isExpandable(i)){var a=this.getChildren(e);Array.isArray(a)?this._flattenChildren(a,t,n,r):a.pipe(s.take(1)).subscribe(function(e){o._flattenChildren(e,t,n,r)})}return n},e.prototype._flattenChildren=function(r,o,i,a){var s=this;r.forEach(function(e,t){var n=a.slice();n.push(t!=r.length-1),s._flattenNode(e,o+1,i,n)})},e.prototype.flattenNodes=function(e){var t=this,n=[];return e.forEach(function(e){return t._flattenNode(e,0,n,[])}),n},e.prototype.expandFlattenedNodes=function(e,r){var o=this,i=[],a=[];return a[0]=!0,e.forEach(function(e){for(var t=!0,n=0;n<=o.getLevel(e);n++)t=t&&a[n];t&&i.push(e),o.isExpandable(e)&&(a[o.getLevel(e)+1]=r.isExpanded(e))}),i},e}(),N=function(r){function e(e,t){void 0===t&&(t=[]);var n=r.call(this)||this;return n.treeControl=e,n._flattenedData=new a.BehaviorSubject([]),n._expandedData=new a.BehaviorSubject([]),n._data=new a.BehaviorSubject([]),n._treeFlattener=new m,n.data=t,n}return c(e,r),Object.defineProperty(e.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this.treeControl.dataNodes=this._flattenedData.value},enumerable:!0,configurable:!0}),e.prototype.connect=function(e){var t=this,n=[e.viewChange,this.treeControl.expansionModel.onChange,this._flattenedData];return a.merge.apply(void 0,function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}(n)).pipe(s.map(function(){return t._expandedData.next(t._treeFlattener.expandFlattenedNodes(t._flattenedData.value,t.treeControl)),t._expandedData.value}))},e.prototype.disconnect=function(){},e}(i.DataSource),C=function(e){function t(){return e.call(this,function(e){return e.level},function(e){return e.expandable})||this}return c(t,e),t}(d.FlatTreeControl);e.NxTreeModule=b,e.NxTreeComponent=h,e.NxTreeFlatDataSource=N,e.NxFlatTreeControl=C,e.ɵb=g,e.ɵc=y,e.ɵa=f,e.ɵd=x,e.ɵe=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-tree.umd.min.js.map