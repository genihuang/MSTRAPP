!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("rxjs"),require("@angular/core"),require("@angular/forms"),require("@angular/cdk/keycodes")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/code-input",["exports","@angular/common","rxjs","@angular/core","@angular/forms","@angular/cdk/keycodes"],t):t((e.allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"]["code-input"]={}),e.ng.common,e.rxjs,e.ng.core,e.ng.forms,e.ng.cdk.keycodes)}(this,function(e,t,n,o,r,i){"use strict";var a=function(){function e(){this.changes=new n.Subject,this.inputFieldAriaLabel="Enter Key"}return e.decorators=[{type:o.Injectable}],e}(),c="INPUT",s=function(){function e(e,t,n,o){this._changeDetectorRef=e,this._el=t,this._control=n,this._intl=o,this._codeLength=6,this._type="text",this._tabindex=0,this._keyCode=new Array(6),this._focused=!1,this.propagateChange=function(e){},this.propagateTouch=function(e){},this._control&&(this._control.valueAccessor=this)}return Object.defineProperty(e.prototype,"codeLength",{get:function(){return this._codeLength},set:function(e){this._codeLength=e,this.setInputLength(),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return this._tabindex},set:function(e){this._tabindex=e,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convertTo",{get:function(){return this._convertTo},set:function(e){this._convertTo=e,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),e.prototype.setInputLength=function(){this.codeLength?this._keyCode=new Array(this.codeLength):this._keyCode=new Array(6)},e.prototype._convertLetterSize=function(e){return"ÃŸ"===e?e:"string"==typeof e?"upper"===this.convertTo?e.toUpperCase():"lower"===this.convertTo?e.toLowerCase():e:void 0},e.prototype._keydownAction=function(e){var t=e.target.previousElementSibling,n=e.target.nextElementSibling;switch(e.keyCode){case i.SPACE:return!1;case i.BACKSPACE:""===e.target.value&&t&&t.tagName===c&&(t.focus(),t.select());break;case i.LEFT_ARROW:t&&t.tagName===c&&(e.preventDefault(),t.focus(),t.select());break;case i.RIGHT_ARROW:n&&n.tagName===c&&(n.focus(),n.select()),e.preventDefault()}},e.prototype._selectText=function(e){e.target.select()},e.prototype._selectNextInput=function(e){if(e.target.value=this._convertLetterSize(e.target.value),this.propagateChange(this._keyCode.join("")),e.target.value){var t=e.target.nextSibling;null!==t&&t.tagName===c&&(t.focus(),""!==t.value&&t.select())}},e.prototype._pasteClipboard=function(e){var t="";t=e.clipboardData===undefined?window.clipboardData.getData("text").replace(/ /g,"").split(""):e.clipboardData.getData("text").replace(/ /g,"").split("");for(var n=0,o=0,r=0;r<this._el.nativeElement.children.length;r++)e.srcElement===this._el.nativeElement.children.item(r)&&(n=r);for(r=n;r<this.codeLength;r++)this._keyCode[r]=this._convertLetterSize(t[o]),o++;this.propagateChange(this._keyCode.join("")),n+t.length<this.codeLength?(this._el.nativeElement.children.item(n+t.length).focus(),e.preventDefault()):n+t.length>=this.codeLength&&e.preventDefault()},e.prototype._onBlur=function(){var e=this;this._focused=!1,setTimeout(function(){e._focused||e.propagateTouch(e._keyCode.join("")),e._changeDetectorRef.markForCheck()})},e.prototype._setFocusState=function(){this._focused=!0},e.prototype.writeValue=function(e){if(e)for(var t=e.split("").slice(0,this.codeLength),n=0;n<this.codeLength;n++)this._keyCode[n]=t[n];else this.setInputLength();this._changeDetectorRef.markForCheck()},e.prototype._trackByKeyCode=function(e,t){return e},e.prototype._inputGap=function(e){switch(this.codeLength){case 4:case 6:case 8:if(e===this.codeLength/2)return"nx-code-input--gap";break;default:return}},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.decorators=[{type:o.Component,args:[{selector:"nx-code-input",template:'<input type="text"\n       class="nx-code-input__field"\n       maxlength="1"\n       *ngFor="let key of _keyCode; index as i; trackBy: _trackByKeyCode;"\n       [(ngModel)]="_keyCode[i]"\n       [ngClass]="_inputGap(i)"\n       [attr.aria-label]="_intl.inputFieldAriaLabel"\n       [attr.type]="type"\n       (input)="_selectNextInput($event)"\n       (paste)="_pasteClipboard($event)"\n       (blur)="_onBlur()"\n       (focus)="_setFocusState()"\n       (click)="_selectText($event)"\n       (keydown)="_keydownAction($event)"\n       (ngModelChange)="_keyCode[i]=_convertLetterSize($event)"\n/>\n',host:{"[class.nx-code-input]":"true","[class.has-error]":"_control ? _control.invalid && _control.touched : false","[attr.tabindex]":"tabindex"},changeDetection:o.ChangeDetectionStrategy.OnPush,styles:[":host{display:block}.nx-code-input__field{margin:0 4px;text-align:center;font-weight:600;font-size:26px;line-height:32px;border:0;outline:0;caret-color:#006192;border-bottom:1px solid #414141;width:32px;color:#414141;border-radius:0;padding:0}.nx-code-input__field:focus{margin-bottom:-1px;color:#007ab3;border-bottom:2px solid currentColor}.nx-code-input--gap{margin-left:24px}:host.has-error .nx-code-input__field{margin-bottom:-1px;font-weight:700;color:#dc3149;border-bottom:2px solid #dc3149}"]}]}],e.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:o.ElementRef},{type:r.NgControl,decorators:[{type:o.Self},{type:o.Optional}]},{type:a}]},e.propDecorators={codeLength:[{type:o.Input,args:["length"]}],type:[{type:o.Input}],tabindex:[{type:o.Input}],convertTo:[{type:o.Input,args:["nxConvertTo"]}]},e}(),p=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,r.FormsModule,r.ReactiveFormsModule],declarations:[s],exports:[s],providers:[a]}]}],e}();e.NxCodeInputModule=p,e.NxCodeInputComponent=s,e.NxCodeInputIntl=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-code-input.umd.min.js.map