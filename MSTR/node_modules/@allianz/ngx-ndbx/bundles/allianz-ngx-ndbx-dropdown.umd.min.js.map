{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@allianz/ngx-ndbx/dropdown/dropdown-errors.ts","ng://@allianz/ngx-ndbx/dropdown/dropdown.control.ts","ng://@allianz/ngx-ndbx/dropdown/group/dropdown-group.ts","ng://@allianz/ngx-ndbx/dropdown/item/dropdown-item.ts","ng://@allianz/ngx-ndbx/dropdown/closed-label.directive.ts","ng://@allianz/ngx-ndbx/dropdown/dropdown.ts","ng://@allianz/ngx-ndbx/dropdown/dropdown.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","getNxDropdownNonFunctionValueError","Error","NxDropdownControl","_super","_this","apply","isMultiSelect","tslib_1.__extends","Input","args","NxFormfieldControl","NxDropdownGroupComponent","Component","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","NxDropdownItemChange","item","isUserInput","nextId","NxDropdownItemComponent","_dropdown","group","_changeDetectorRef","_elementRef","_hidden","_mostRecentViewValue","_id","_selected","_destroy","Subject","onSelectionChange","EventEmitter","_stateChanges","filterChanges","pipe","takeUntil","subscribe","_showOrHideByFilter","_closedStream","defineProperty","_active","ngAfterViewChecked","viewValue","ngOnDestroy","complete","_onClick","event","preventDefault","stopPropagation","_selectViaInteraction","multiselect","markForCheck","_emitSelectionChangeEvent","show","hide","search","constraint","filterFn","valueFormatter","nativeElement","textContent","trim","select","deselect","focus","emit","setActiveStyles","setInactiveStyles","getLabel","_isContentEmpty","element","children","_onLabelChange","detectChanges","host","[id]","role","[attr.aria-selected]","[class.nx-hidden]","[class.nx-dropdown-item--active]","[class.nx-selected]","[class.nx-multiselect]","(click)","decorators","type","Inject","Optional","ChangeDetectorRef","ElementRef","Output","ViewChild","NxDropdownClosedLabelDirective","templateRef","Directive","TemplateRef","NxDropdownSelectChange","source","NxDropdownComponent","_ngZone","tabIndex","formFieldComponent","ngControl","_parentForm","_parentFormGroup","readonly","_disabled","_focused","_panelOpen","errorState","_scrollTop","_overlayViewportMargin","stateChanges","_optionIds","_tabIndex","currentFilter","_ariaLabel","_style","_negative","showFilter","filterPlaceholder","openedChange","_openedStream","filter","map","valueChange","selectionChange","optionSelectionChanges","defer","options","merge","option","onStable","asObservable","take","switchMap","_positions","originX","originY","overlayX","overlayY","toString","_compareWith","o1","o2","_filterFn","itemValue","toLocaleLowerCase","indexOf","_onChange","_onTouched","valueAccessor","parseInt","disabled","_value","newValue","writeValue","match","_closedDropdownLabel","_selectionModel","selected","label","fn","_initializeSelection","panelOpen","ngDoCheck","updateErrorState","ngOnInit","SelectionModel","ngAfterContentInit","_customClosedDropdownLabel","_defaultClosedDropdownLabel","_initKeyManager","onChange","added","forEach","removed","changes","startWith","_resetOptions","isErrorState","control","form","invalid","touched","submitted","oldState","parent","newState","_keyManager","ActiveDescendantKeyManager","withTypeAhead","withWrap","withVerticalOrientation","withHorizontalOrientation","skipPredicate","tabOut","closePanel","change","panel","_scrollActiveOptionIntoView","activeItem","changedOrDestroyed","_onSelect","setTimeout","_setOptionIds","id","join","wasSelected","isSelected","setActiveItem","_sortValues","clear","_propagateChanges","Promise","resolve","then","_setSelectionByValue","isArray","getNxDropdownNonArrayValueError","currentValue","_selectValue","correspondingOption","find","isDevMode","console","warn","fallbackValue","valueToEmit","options_1","toArray","sort","a","openPanel","_triggerRect","trigger","getBoundingClientRect","_highlightCorrectOption","_calculateScrollTop","panelBody","scrollTop","empty","offset","_getItemOffset","panelHeight","offsetHeight","middleOfPanel","top","activeItemRect","containerElement","height","activeOptionIndex","activeItemIndex","itemRect","labelCount","_countGroupLabelsBeforeOption","groups","_getOptionScrollPosition","optionIndex","optionGroups","optionsArray","groupCounter","optionHeight","currentScrollPosition","optionOffset","querySelector","Math","max","setDescribedByIds","ids","ariaDescribedby","setAriaLabel","_getAriaLabel","isEmpty","hasValue","focused","registerOnChange","registerOnTouched","setDisabledState","isDisabled","_handleKeydown","_handleOpenKeydown","_handleClosedKeydown","keyCode","isArrowKey","DOWN_ARROW","UP_ARROW","LEFT_ARROW","RIGHT_ARROW","ENTER","SPACE","altKey","onKeydown","HOME","END","SHIFT","TAB","manager","allHidden","every","Boolean","setFirstItemActive","setLastItemActive","previouslyFocusedIndex","shiftKey","formatValue","_onFilter","target","_onAttached","overlayDir","positionChange","filterInput","_onFocus","_onBlur","_clearFilter","_getAriaActiveDescendant","providers","provide","useExisting","[class.nx-dropdown]","[class.is-filled]","[class.has-focus]","[class.nx-dropdown--negative]","[class.nx-dropdown--disabled]","[attr.aria-describedby]","[attr.aria-required]","[attr.aria-label]","[attr.aria-haspopup]","[attr.aria-expanded]","[attr.disabled]","[attr.tabindex]","(keydown)","(focus)","(blur)","NgZone","Attribute","NxFormfieldComponent","NgControl","Self","NgForm","FormGroupDirective","CdkConnectedOverlay","ContentChildren","descendants","ContentChild","NxDropdownModule","NgModule","imports","CommonModule","NxFormfieldModule","NxCheckboxModule","OverlayModule","A11yModule","NxIconModule","ObserversModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\n/**\n * Returns an exception to be thrown when attempting to change a select's `multiple` option\n * after initialization.\n * @docs-private\n */\nexport function getNxDropdownDynamicMultipleError(): Error {\n  return Error('Cannot change `multiselect` mode of select after initialization.');\n}\n\n/**\n * Returns an exception to be thrown when attempting to assign a non-array value to a select\n * in `multiselect` mode. Note that `undefined` and `null` are still valid values to allow for\n * resetting the value.\n * @docs-private\n */\nexport function getNxDropdownNonArrayValueError(): Error {\n  return Error('Value must be an array in multiselect mode.');\n}\n\n/**\n * Returns an exception to be thrown when assigning a non-function value to the comparator\n * used to determine if a value corresponds to an option. Note that whether the function\n * actually takes two values and returns a boolean is not checked.\n */\nexport function getNxDropdownNonFunctionValueError(): Error {\n  return Error('`compareWith` must be a function.');\n}\n","import { NxFormfieldControl } from '@allianz/ngx-ndbx/formfield';\nimport { Input } from '@angular/core';\n\nexport abstract class NxDropdownControl extends NxFormfieldControl<any> {\n  /**\n   * Whether the dropdown should allow multi selection and additional checkboxes are shown.\n   *\n   * Note: Please make sure the value you bind is an array. If not an error is thrown! */\n  @Input('nxIsMultiselect') isMultiSelect: boolean = false;\n\n  /** @docs-private */\n  abstract formatValue?(value): string;\n\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'nx-dropdown-group',\n  templateUrl: 'dropdown-group.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['dropdown-group.scss']\n})\nexport class NxDropdownGroupComponent {\n  /** Label displayed in the group. */\n  @Input('nxLabel') label: string;\n}\n","import { Highlightable } from '@angular/cdk/a11y';\nimport {\n  AfterViewChecked,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  Optional,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { NxDropdownComponent } from '../dropdown';\nimport { NxDropdownControl } from '../dropdown.control';\nimport { NxDropdownGroupComponent } from './../group/dropdown-group';\n\n\nexport class NxDropdownItemChange {\n\n  constructor(\n    /** Reference to the option that emitted the event. */\n    public item: NxDropdownItemComponent,\n    /** Whether the change in the option's value was a result of a user action. */\n    public isUserInput = false) { }\n}\n\n/** the unique id counter */\nlet nextId = 0;\n\n\n@Component({\n  selector: 'nx-dropdown-item',\n  templateUrl: 'dropdown-item.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: [\n    'dropdown-item.scss'\n  ],\n  host: {\n    '[id]': 'id',\n    'role': 'option',\n    '[attr.aria-selected]': 'selected.toString()',\n    '[class.nx-hidden]': '_hidden',\n    '[class.nx-dropdown-item--active]': 'active',\n    '[class.nx-selected]': 'selected',\n    '[class.nx-multiselect]': 'multiselect',\n    '(click)': '_onClick($event)'\n  }\n})\nexport class NxDropdownItemComponent implements Highlightable, OnDestroy, AfterViewChecked {\n  _hidden = false;\n\n  private _mostRecentViewValue = '';\n\n  private _id = `nx-dropdown-item-${nextId++}`;\n\n  /**\n   * The value of the dropdown item.\n   * You can't use undefined, null and '' (empty strings)\n   * as they are sentinel values signalling empty data.\n   */\n  @Input('nxValue') value;\n\n  /** The unique ID of the option. */\n  get id(): string { return this._id; }\n\n  private _selected: boolean = false;\n\n  /** Whether the item is selected. */\n  get selected(): boolean {\n    return this._selected;\n  }\n\n  private _active: boolean;\n\n  /** Whether the item is active. */\n  get active(): boolean {\n    return this._active;\n  }\n\n  /**\n   * @docs-private\n   * Whether the parent dropdown is in multiselect mode.\n   */\n  get multiselect(): boolean {\n    return this._dropdown && this._dropdown.isMultiSelect;\n  }\n\n  /** Emits whenever the component is destroyed. */\n  private readonly _destroy = new Subject<void>();\n\n  /** Event emitted when the option is selected or deselected. */\n  // tslint:disable-next-line:no-output-on-prefix\n  @Output() readonly onSelectionChange = new EventEmitter<NxDropdownItemChange>();\n\n  /** Emits when the state of the option changes and any parents have to be notified. */\n  readonly _stateChanges = new Subject<void>();\n\n  /**\n   * @docs-private\n   * The wrapping div in the template. Used by dropdown to use the container height for scrolling.\n   */\n  @ViewChild('container') containerElement;\n\n  constructor(\n    @Inject(NxDropdownControl) private _dropdown: NxDropdownControl,\n    /** @docs-private */\n    @Optional() readonly group: NxDropdownGroupComponent,\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _elementRef: ElementRef) {\n    (this._dropdown as NxDropdownComponent).filterChanges.pipe(takeUntil(this._destroy)).subscribe((value) => {\n      this._showOrHideByFilter(value);\n    });\n    // reset the hidden state when dropdown closes that on next open the user is seeing the full list again\n    (this._dropdown as NxDropdownComponent)._closedStream.pipe(takeUntil(this._destroy)).subscribe(() => {\n      this._hidden = false;\n    });\n  }\n\n  ngAfterViewChecked() {\n    // Since the parent dropdown component could be using the item's label to display the selected values\n    // and it doesn't have a way of knowing if the item's label has changed\n    // we have to check for changes in the DOM ourselves and dispatch an event. These checks are\n    // relatively cheap, however we still limit them only to selected options in order to avoid\n    // hitting the DOM too often.\n    if (this._selected) {\n      const viewValue = this.viewValue;\n\n      if (viewValue !== this._mostRecentViewValue) {\n        this._mostRecentViewValue = viewValue;\n        this._stateChanges.next();\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this._stateChanges.complete();\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  _onClick(event) {\n    /* preventDefault to stop triggering the event twice when you click on the checkbox or the label inside the item */\n    event.preventDefault();\n    event.stopPropagation();\n    this._selectViaInteraction();\n  }\n\n  /**\n  * `Selects the option while indicating the selection came from the user. Used to\n  * determine if the select's view -> model callback should be invoked.`\n  */\n  _selectViaInteraction(): void {\n    this._selected = this.multiselect ? !this._selected : true;\n    this._changeDetectorRef.markForCheck();\n    this._emitSelectionChangeEvent(true);\n  }\n\n  /** @docs-private */\n  show() {\n    this._hidden = false;\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /** @docs-private */\n  hide() {\n    this._hidden = true;\n    this._changeDetectorRef.markForCheck();\n  }\n\n  private _showOrHideByFilter(search) {\n    const constraint = (this._dropdown as NxDropdownComponent).filterFn(search, this.viewValue);\n    this._hidden = constraint ? false : true;\n    this._changeDetectorRef.markForCheck();\n  }\n\n  get _formattedValue() {\n    return (this._dropdown as NxDropdownComponent).valueFormatter(this.value);\n  }\n\n  /** @docs-private */\n  get viewValue() {\n    return (this._elementRef.nativeElement.textContent || '').trim();\n  }\n\n  /** @docs-private */\n  select() {\n    if (!this._selected) {\n      this._selected = true;\n      this._changeDetectorRef.markForCheck();\n      this._emitSelectionChangeEvent();\n    }\n  }\n\n  /** @docs-private */\n  deselect() {\n    if (this._selected) {\n      this._selected = false;\n      this._changeDetectorRef.markForCheck();\n      this._emitSelectionChangeEvent();\n    }\n  }\n\n  /** @docs-private */\n  focus(): void {\n    this._elementRef.nativeElement.focus();\n  }\n\n  private _emitSelectionChangeEvent(isUserInput: boolean = false) {\n    this.onSelectionChange.emit(new NxDropdownItemChange(this, isUserInput));\n  }\n\n  /** @docs-private */\n  setActiveStyles(): void {\n    this._active = true;\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /** @docs-private */\n  setInactiveStyles(): void {\n    this._active = false;\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /** @docs-private */\n  getLabel(): string {\n    return this.value;\n  }\n\n  _isContentEmpty(element) {\n    return element.children.length === 0 && !element.textContent.trim();\n  }\n\n  _onLabelChange() {\n    // trigger change detection when the label content changes for the case that ng-content was empty before.\n    // this is also important when the label comes in deferred, e.g. by a delayed observable,\n    // then first the default label derived from the value is shown\n    // and after the value from the async observable is ready we need to trigger change detection that the derived label\n    // gets hidden again.\n    // Notice(!): the event of (cdkObserveContent) is run outside of the ngZone\n    // We run detectChanges directly here as markForCheck wasn't enough to always trigger change detection correctly\n    this._changeDetectorRef.detectChanges();\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n// This Directive solely purpose is to mark given ng-template and project it into the required destination.\n@Directive({\n  selector: '[nxClosedLabel]'\n})\nexport class NxDropdownClosedLabelDirective {\n  constructor(public templateRef: TemplateRef<any>) {}\n}\n","import { NxFormfieldComponent, NxFormfieldControl } from '@allianz/ngx-ndbx/formfield';\nimport { ActiveDescendantKeyManager } from '@angular/cdk/a11y';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { DOWN_ARROW, END, ENTER, HOME, LEFT_ARROW, RIGHT_ARROW, SPACE, UP_ARROW, SHIFT, TAB } from '@angular/cdk/keycodes';\nimport { CdkConnectedOverlay } from '@angular/cdk/overlay';\nimport {\n  AfterContentInit,\n  Attribute,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChildren,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Input,\n  isDevMode,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  QueryList,\n  Self,\n  ViewChild,\n  TemplateRef,\n  ContentChild,\n} from '@angular/core';\nimport { ControlValueAccessor, FormControl, FormGroupDirective, NgControl, NgForm } from '@angular/forms';\nimport { defer, merge, Observable, Subject } from 'rxjs';\nimport { filter, map, startWith, switchMap, take, takeUntil } from 'rxjs/operators';\n\nimport { getNxDropdownNonArrayValueError, getNxDropdownNonFunctionValueError } from './dropdown-errors';\nimport { NxDropdownControl } from './dropdown.control';\nimport { NxDropdownGroupComponent } from './group/dropdown-group';\nimport { NxDropdownItemChange, NxDropdownItemComponent } from './item/dropdown-item';\nimport { NxDropdownClosedLabelDirective } from './closed-label.directive';\n\n\n/** Change event object that is emitted when the select value has changed. */\nexport class NxDropdownSelectChange<T = any> {\n  constructor(\n    /** Reference to the select that emitted the change event. */\n    public source: NxDropdownComponent,\n    /** Current value of the select that emitted the event. */\n    public value: T) { }\n}\n\n// used in calculation of scrolltop to correctly show some space to the top of the panel\nconst itemPadding = 16;\n\n// Max-height: 6 items x 44px + 16px padding before first item\nexport const SELECT_PANEL_MAX_HEIGHT = 280;\n\n@Component({\n  selector: 'nx-dropdown',\n  templateUrl: 'dropdown.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['dropdown.scss'],\n  providers: [\n    { provide: NxDropdownControl, useExisting: NxDropdownComponent },\n    { provide: NxFormfieldControl, useExisting: NxDropdownComponent },\n  ],\n  host: {\n    'role': 'button',\n    '[class.nx-dropdown]': 'true',\n    '[class.is-filled]': 'hasValue',\n    '[class.has-focus]': 'focused',\n    '[class.nx-dropdown--negative]': '_negative',\n    '[class.nx-dropdown--disabled]': 'disabled',\n    '[attr.aria-describedby]': 'ariaDescribedby || null',\n    '[attr.aria-required]': 'required',\n    '[attr.aria-label]': '_getAriaLabel()',\n    '[attr.aria-haspopup]': '\"listbox\"',\n    '[attr.aria-expanded]': 'panelOpen',\n    '[attr.disabled]': 'disabled || null',\n    '[attr.tabindex]': 'tabIndex',\n    '(keydown)': '_handleKeydown($event)',\n    '(focus)': '_onFocus()',\n    '(blur)': '_onBlur()',\n    '(click)': 'openPanel()'\n  }\n})\nexport class NxDropdownComponent extends NxDropdownControl implements ControlValueAccessor,\n  OnInit, AfterContentInit, OnDestroy, DoCheck {\n\n  // The dropdown currently doesn't support readonly of the NxFormfieldControl so we hardcode it here\n  readonly readonly: boolean = false;\n\n  private _selectionModel: SelectionModel<NxDropdownItemComponent>;\n\n  protected _disabled: boolean = false;\n\n  private _focused: boolean = false;\n\n  /** Whether or not the overlay panel is open. */\n  private _panelOpen = false;\n\n  /** @docs-private */\n  errorState: boolean = false;\n\n  /** Holds the value from nxValue. */\n  private _value: any;\n\n  /** The scroltop of the panelBody. */\n  private _scrollTop: number = 0;\n\n  /** The minimal space between the viewport and the overlay */\n  _overlayViewportMargin: number = 16;\n\n  /** The last measured value for the trigger's client bounding rect. */\n  _triggerRect: ClientRect;\n\n  /** Holds the panelWidth after panel was attached. */\n  _panelWidth: number;\n\n  /**\n   * @docs-private\n   * Emits when internal state changes to inform formfield about it.\n   */\n  readonly stateChanges = new Subject<any>();\n\n  /** The IDs of child options to be passed to the aria-owns attribute. */\n  _optionIds: string = '';\n\n  /** @docs-private */\n  ariaDescribedby: string;\n\n  private _tabIndex: number = 0;\n\n  /** @docs-private */\n  currentFilter: string = '';\n\n\n  @Input()\n  get tabIndex(): number { return this.disabled ? -1 : this._tabIndex; }\n  set tabIndex(value: number) {\n    // If the specified tabIndex value is null or undefined, fall back to the default value.\n    this._tabIndex = value != null ? value : 0;\n  }\n\n  /** Label to describe the component. */\n  @Input('nxAriaLabel') _ariaLabel: string = '';\n\n  /** Selected value */\n  @Input('nxValue')\n  get value(): any { return this._value; }\n  set value(newValue: any) {\n    if (newValue !== this._value) {\n      this.writeValue(newValue);\n      this._value = newValue;\n      this._onChange(newValue);\n    }\n  }\n\n  /** Whether the dropdown is disabled. */\n  @Input('nxDisabled')\n  get disabled() {\n    return this._disabled;\n  }\n  set disabled(value: boolean) {\n    this._disabled = value;\n  }\n\n  /** Whether the component is required. This adds an aria-required label to the component. */\n  @Input('nxRequired') required: boolean;\n\n  private _style: string = '';\n  /** Whether the dropdown should render in its negative style or not. */\n  _negative: boolean = false;\n\n  /** If set to 'negative', the component is displayed with the negative set of styles. */\n  @Input('nxStyle')\n  set styles(value: string) {\n\n    if (this._style === value) {\n      return;\n    }\n\n    this._style = value;\n    this._negative = !!this._style.match(/negative/);\n  }\n\n  /** Whether the dropdown should be shown with an additional filter input. */\n  @Input('nxShowFilter') showFilter: boolean = false;\n\n  /** Text displayed as placeholder for the filter. */\n  @Input('nxFilterPlaceholder') filterPlaceholder: string = '';\n\n  /** Event emitted when the select panel has been toggled. */\n  @Output() readonly openedChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  /** Event emitted when the select has been opened. */\n  @Output('opened') readonly _openedStream: Observable<void> =\n    this.openedChange.pipe(filter(o => o), map(() => { }));\n\n  /** Event emitted when the select has been closed. */\n  @Output('closed') readonly _closedStream: Observable<void> =\n    this.openedChange.pipe(filter(o => !o), map(() => { }));\n\n  /** Event emitted when the user types in the filter input. */\n  @Output('filterInput') readonly filterChanges: Subject<any> = new Subject<any>();\n\n  /**\n   * Event that emits whenever the raw value of the select changes. This is here primarily\n   * to facilitate the two-way binding for the `value` input.\n   * @docs-private\n   */\n  @Output('nxValueChange') readonly valueChange: EventEmitter<any> = new EventEmitter<any>();\n\n  /** Event emitted when the selected value has been changed. */\n  @Output() readonly selectionChange: EventEmitter<NxDropdownSelectChange> =\n    new EventEmitter<NxDropdownSelectChange>();\n\n  /** @docs-private */\n  readonly optionSelectionChanges: Observable<NxDropdownItemChange> = defer<Observable<NxDropdownItemChange>>(() => {\n    if (this.options) {\n      return merge(...this.options.map(option => option.onSelectionChange));\n    }\n\n    return this._ngZone.onStable\n      .asObservable()\n      .pipe(take(1), switchMap(() => this.optionSelectionChanges));\n  });\n\n  /**\n   * This position config ensures that the top \"start\" corner of the overlay\n   * is aligned with with the top \"start\" of the origin by default (overlapping\n   * the trigger completely). If the panel cannot fit below the trigger, it\n   * will fall back to a position above the trigger.\n   */\n  _positions = [{\n    originX: 'start',\n    originY: 'top',\n    overlayX: 'start',\n    overlayY: 'top'\n  }, {\n    originX: 'start',\n    originY: 'center',\n    overlayX: 'start',\n    overlayY: 'center'\n  }, {\n    originX: 'start',\n    originY: 'bottom',\n    overlayX: 'start',\n    overlayY: 'bottom'\n  }];\n\n\n  /**\n   * @docs-private\n   * Panel containing the select options.\n   */\n  @ViewChild('panel') panel: ElementRef;\n\n  /** @docs-private */\n  @ViewChild('panelBody') panelBody: ElementRef;\n\n  /** @docs-private */\n  @ViewChild('trigger') trigger: ElementRef;\n\n  /** @docs-private */\n  @ViewChild('filterInput') filterInput: ElementRef;\n\n  /**\n   * @docs-private\n   * Overlay pane containing the options.\n   */\n  @ViewChild(CdkConnectedOverlay) overlayDir: CdkConnectedOverlay;\n\n  /** @docs-private */\n  @ContentChildren(NxDropdownItemComponent, { descendants: true }) options;\n\n  /** @docs-private */\n  @ContentChildren(NxDropdownGroupComponent) groups;\n\n  @ContentChild(NxDropdownClosedLabelDirective)\n  _customClosedDropdownLabel: NxDropdownClosedLabelDirective;\n\n  @ViewChild('defaultClosedDropdownLabel')\n  private _defaultClosedDropdownLabel: TemplateRef<any>;\n\n  /** @docs-private */\n  get closedDropdownLabel(): TemplateRef<any> {\n    return this._closedDropdownLabel;\n  }\n  private _closedDropdownLabel: TemplateRef<any>;\n\n  /** Emits whenever the component is destroyed. */\n  private readonly _destroy = new Subject<void>();\n\n  /**\n   * @docs-private\n   * The currently selected option.\n   */\n  get selected(): NxDropdownItemComponent | NxDropdownItemComponent[] {\n    return this.isMultiSelect ? this._selectionModel.selected : this._selectionModel.selected[0];\n  }\n\n  private _keyManager: ActiveDescendantKeyManager<NxDropdownItemComponent>;\n\n  /** @docs-private */\n  get panelOpen(): boolean {\n    return this._panelOpen;\n  }\n  set panelOpen(value: boolean) {\n    this._panelOpen = value;\n  }\n\n  /**\n   * Function that transforms the value into a string.\n   * This function is used for displaying and filtering the content\n   * ( Default: (value) => value ? value.toString() : null; ).\n   */\n  @Input('nxValueFormatter') valueFormatter = (value) => {\n    return value == null ? '' : value.toString();\n  }\n\n  /** @docs-private */\n  get label(): string {\n    return this.formFieldComponent ? this.formFieldComponent.label : '';\n  }\n\n  /** Comparison function to specify which option is displayed. Defaults to object equality. */\n  private _compareWith = (o1: any, o2: any) => o1 === o2;\n\n  /**\n   * Function to compare the option values with the selected values. The first argument\n   * is a value from an option. The second is a value from the selection. A boolean\n   * should be returned.\n   */\n  @Input()\n  get compareWith() { return this._compareWith; }\n  set compareWith(fn: (o1: string, o2: string) => boolean) {\n    if (typeof fn !== 'function') {\n      throw getNxDropdownNonFunctionValueError();\n    }\n    this._compareWith = fn;\n    if (this._selectionModel) {\n      // A different comparator means the selection could change.\n      this._initializeSelection();\n    }\n  }\n\n  private _filterFn = (search: string, itemValue: string) => {\n    return itemValue.toLocaleLowerCase().indexOf(search.toLocaleLowerCase()) >= 0;\n  }\n\n  /**\n   * Function to be used when the user types into the search filter. The first argument is the user input,\n   * the second argument is the dropdown item value. The dropdown items will use this function to set their\n   * visibility state.\n   * A boolean should be returned.\n   */\n  @Input()\n  get filterFn() { return this._filterFn; }\n  set filterFn(fn: (search: string, itemValue: string) => boolean) {\n    if (typeof fn !== 'function') {\n      throw getNxDropdownNonFunctionValueError();\n    }\n    this._filterFn = fn;\n  }\n\n  /**\n   * @docs-private\n   * Whether the select is focused.\n   */\n  get focused(): boolean {\n    return this._focused || this.panelOpen;\n  }\n\n  /** `View -> model callback called when value changes` */\n  _onChange: (value: any) => void = () => { };\n\n  /** `View -> model callback called when select has been touched` */\n  _onTouched = () => { };\n\n  /** @docs-private */\n  get elementRef(): ElementRef {\n    return this._elementRef;\n  }\n\n  constructor(\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _elementRef: ElementRef,\n    private _ngZone: NgZone,\n    @Attribute('tabindex') tabIndex: string,\n    @Optional() private formFieldComponent: NxFormfieldComponent,\n    /** @docs-private */\n    @Self() @Optional() public ngControl: NgControl,\n    @Optional() private _parentForm: NgForm,\n    @Optional() private _parentFormGroup: FormGroupDirective) {\n    super();\n\n    if (this.ngControl) {\n      // Note: we provide the value accessor through here, instead of\n      // the `providers` to avoid running into a circular import.\n      this.ngControl.valueAccessor = this;\n    }\n\n    this.tabIndex = parseInt(tabIndex, 10) || 0;\n  }\n\n  ngDoCheck() {\n    if (this.ngControl) {\n      this.updateErrorState();\n    }\n  }\n\n  ngOnInit() {\n    this._selectionModel = new SelectionModel<NxDropdownItemComponent>(this.isMultiSelect);\n  }\n\n  ngAfterContentInit() {\n    this._closedDropdownLabel =\n      this._customClosedDropdownLabel && this._customClosedDropdownLabel.templateRef || this._defaultClosedDropdownLabel;\n    this._initKeyManager();\n\n    this._selectionModel.onChange.pipe(takeUntil(this._destroy)).subscribe(event => {\n      event.added.forEach(option => option.select());\n      event.removed.forEach(option => option.deselect());\n    });\n\n    this.options.changes.pipe(startWith(null), takeUntil(this._destroy)).subscribe(() => {\n      this._resetOptions();\n      this._initializeSelection();\n    });\n  }\n\n  ngOnDestroy() {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  /** @docs-private */\n  isErrorState(control: FormControl | null, form: FormGroupDirective | NgForm | null): boolean {\n    return !!(control && control.invalid && (control.touched || (form && form.submitted)));\n  }\n\n  /** @docs-private */\n  updateErrorState() {\n    const oldState = this.errorState;\n    const parent = this._parentFormGroup || this._parentForm;\n    const control = this.ngControl ? this.ngControl.control as FormControl : null;\n    const newState = this.isErrorState(control, parent);\n\n    if (newState !== oldState) {\n      this.errorState = newState;\n      this.stateChanges.next();\n    }\n  }\n\n  /** Sets up a key manager to listen to keyboard events on the overlay panel. */\n  private _initKeyManager() {\n    this._keyManager = new ActiveDescendantKeyManager<NxDropdownItemComponent>(this.options)\n      .withTypeAhead()\n      .withWrap()\n      .withVerticalOrientation()\n      .withHorizontalOrientation('ltr')\n      .skipPredicate(item => item._hidden);\n\n    this._keyManager.tabOut.pipe(takeUntil(this._destroy)).subscribe(() => {\n      // Restore focus to the trigger before closing. Ensures that the focus\n      // position won't be lost if the user got focus into the overlay.\n      this.closePanel();\n    });\n\n    this._keyManager.change.pipe(takeUntil(this._destroy)).subscribe(() => {\n      if (this._panelOpen && this.panel) {\n        // Delay the auto scrolling until all items have settled otherwise the item containers might\n        // not exist yet\n        this._ngZone.onStable\n          .asObservable()\n          .pipe(take(1)).subscribe(() => this._scrollActiveOptionIntoView());\n      } else if (!this._panelOpen && !this.isMultiSelect && this._keyManager.activeItem) {\n        this._keyManager.activeItem._selectViaInteraction();\n      }\n    });\n  }\n\n  private _resetOptions(): void {\n    const changedOrDestroyed = merge(this.options.changes, this._destroy);\n\n    this.optionSelectionChanges.pipe(takeUntil(changedOrDestroyed)).subscribe(event => {\n      this._onSelect(event.item, event.isUserInput);\n\n      if (event.isUserInput && !this.isMultiSelect && this._panelOpen) {\n        this.closePanel();\n      }\n    });\n\n    // Listen to changes in the internal state of the options and react accordingly.\n    // Handles cases like the labels of the selected options changing.\n    merge(...this.options.map(option => option._stateChanges))\n      .pipe(takeUntil(changedOrDestroyed))\n      .subscribe(() => {\n        // defer it for the next cycle to not run in changed after checked errors\n        // the combination of dropdown-item notifying parent and when the parent\n        // tries to fetch the triggerValue from the child throws these errors\n        setTimeout(() => {\n          this._changeDetectorRef.markForCheck();\n          this.stateChanges.next();\n        });\n      });\n\n    this._setOptionIds();\n  }\n\n  /** Records option IDs to pass to the aria-owns property. */\n  private _setOptionIds() {\n    this._optionIds = this.options.map(option => option.id).join(' ');\n  }\n\n  /** Invoked when an option is clicked. */\n  private _onSelect(option: NxDropdownItemComponent, isUserInput: boolean): void {\n    const wasSelected = this._selectionModel.isSelected(option);\n\n    if (option.value == null && !this.isMultiSelect) {\n      option.deselect();\n      this._selectionModel.clear();\n      this._propagateChanges(option.value);\n    } else {\n      option.selected ? this._selectionModel.select(option) : this._selectionModel.deselect(option);\n\n      if (isUserInput) {\n        this._keyManager.setActiveItem(option);\n      }\n\n      if (this.isMultiSelect) {\n        this._sortValues();\n\n        if (isUserInput) {\n          // In case the user selected the option with their mouse, we\n          // want to restore focus back to the trigger, in order to\n          // prevent the select keyboard controls from clashing with\n          // the ones from `mat-option`.\n          this.focus();\n        }\n      }\n    }\n\n    if (wasSelected !== this._selectionModel.isSelected(option)) {\n      this._propagateChanges();\n    }\n\n    this.stateChanges.next();\n  }\n\n  private _initializeSelection(): void {\n    // Defer setting the value in order to avoid the \"Expression\n    // has changed after it was checked\" errors from Angular.\n    Promise.resolve().then(() => {\n      this._setSelectionByValue(this.ngControl ? this.ngControl.value : this._value);\n    });\n  }\n\n  /**\n   * Sets the selected option based on a value. If no option can be\n   * found with the designated value, the select trigger is cleared.\n   */\n  private _setSelectionByValue(value: any | any[]): void {\n    if (this.isMultiSelect && value) {\n      if (!Array.isArray(value)) {\n        throw getNxDropdownNonArrayValueError();\n      }\n\n      this._selectionModel.clear();\n      value.forEach((currentValue: any) => this._selectValue(currentValue));\n      this._sortValues();\n    } else {\n      this._selectionModel.clear();\n      const correspondingOption = this._selectValue(value);\n      // Shift focus to the active item. Note that we shouldn't do this in multiple\n      // mode, because we don't know what option the user interacted with last.\n      if (correspondingOption) {\n        this._keyManager.setActiveItem(correspondingOption);\n      }\n    }\n\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /**\n   * Finds and selects and option based on its value.\n   * @returns Option that has the corresponding value.\n   */\n  private _selectValue(value: any): NxDropdownItemComponent | undefined {\n    const correspondingOption = this.options.find((option: NxDropdownItemComponent) => {\n      try {\n        // Treat null as a special reset value.\n        return option.value != null && this._compareWith(option.value, value);\n      } catch (error) {\n        if (isDevMode()) {\n          // Notify developers of errors in their comparator.\n          console.warn(error);\n        }\n        return false;\n      }\n    });\n\n    if (correspondingOption) {\n      this._selectionModel.select(correspondingOption);\n    }\n    return correspondingOption;\n  }\n\n  /** Emits change event to set the model value. */\n  private _propagateChanges(fallbackValue?: any): void {\n    let valueToEmit: any = null;\n\n    if (this.isMultiSelect) {\n      valueToEmit = (this.selected as NxDropdownItemComponent[]).map(option => option.value);\n    } else {\n      valueToEmit = this.selected ? (this.selected as NxDropdownItemComponent).value : fallbackValue;\n    }\n\n    this._value = valueToEmit;\n    this.valueChange.emit(valueToEmit);\n    this._onChange(valueToEmit);\n    this.selectionChange.emit(new NxDropdownSelectChange(this, valueToEmit));\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /** Sorts the selected values in the selected based on their order in the panel. */\n  private _sortValues() {\n    if (this.isMultiSelect) {\n      const options = this.options.toArray();\n      this._selectionModel.sort((a, b) => options.indexOf(a) - options.indexOf(b));\n      this.stateChanges.next();\n    }\n  }\n\n  /** Focuses the select element. */\n  focus(): void {\n    this._elementRef.nativeElement.focus();\n  }\n\n  /** Opens the panel of the dropdown. */\n  openPanel() {\n    if (this.disabled || !this.options || !this.options.length || this._panelOpen) {\n      return;\n    }\n    this._panelOpen = true;\n    this._triggerRect = this.trigger.nativeElement.getBoundingClientRect();\n    this._keyManager.withHorizontalOrientation(null);\n    this._highlightCorrectOption();\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /** Closes the panel of the dropdown. */\n  closePanel() {\n    if (this._panelOpen) {\n      this._panelOpen = false;\n      this._keyManager.withHorizontalOrientation('ltr');\n      this._changeDetectorRef.markForCheck();\n      this._onTouched();\n      this.openedChange.emit(false);\n      // defer the focus if the dropdown triggers actions that detach\n      // a template/view from the DOM to prevent changed after checked errors\n      setTimeout(() => this.focus());\n    }\n  }\n\n  // calculate inital scrollTop when the dropdown opens\n  // scrolls the selected item to the middle of the panel if possible\n  private _calculateScrollTop() {\n    // reset the scrolltop to make calculation easier\n    this.panelBody.nativeElement.scrollTop = 0;\n    this._scrollTop = 0;\n    if (!this.empty) {\n      const offset = this._getItemOffset(this._keyManager.activeItem);\n      const panelHeight = this.panelBody.nativeElement.offsetHeight;\n      const panelRect = this.panelBody.nativeElement.getBoundingClientRect();\n      const middleOfPanel = panelRect.top + panelHeight / 2;\n      const activeItemRect = this._keyManager.activeItem.containerElement.nativeElement.getBoundingClientRect();\n      if (offset > middleOfPanel) {\n        // because we reset the scrollTop to 0 at the top we can simply take the middleOfPanel which is our\n        // target position for the item and subtract it from the offset (which is now always relative to the viewport)\n        // to middle out the text a bit more add half of the height\n        // (this is still a few pixels off because the container is a bit larger than the font)\n        this._scrollTop = offset - middleOfPanel + (activeItemRect.height - itemPadding) / 2;\n        this.panelBody.nativeElement.scrollTop = this._scrollTop;\n      }\n    }\n  }\n\n  /** Scrolls the active option into view. */\n  private _scrollActiveOptionIntoView(): void {\n    if (!this.panelOpen || !this._keyManager.activeItem) {\n      return;\n    }\n    const activeOptionIndex = this._keyManager.activeItemIndex || 0;\n    const itemRect = this._keyManager.activeItem.containerElement.nativeElement.getBoundingClientRect();\n    const labelCount = this._countGroupLabelsBeforeOption(activeOptionIndex, this.options,\n      this.groups);\n\n    this.panelBody.nativeElement.scrollTop = this._getOptionScrollPosition(\n      activeOptionIndex + labelCount,\n      itemRect.height,\n      this.panelBody.nativeElement.scrollTop,\n      SELECT_PANEL_MAX_HEIGHT\n    );\n  }\n\n  private _countGroupLabelsBeforeOption(optionIndex: number, options: QueryList<NxDropdownItemComponent>,\n    optionGroups: QueryList<NxDropdownGroupComponent>): number {\n\n    if (optionGroups.length) {\n      const optionsArray = options.toArray();\n      const groups = optionGroups.toArray();\n      let groupCounter = 0;\n\n      for (let i = 0; i < optionIndex + 1; i++) {\n        if (optionsArray[i].group && optionsArray[i].group === groups[groupCounter]) {\n          groupCounter++;\n        }\n      }\n\n      return groupCounter;\n    }\n\n    return 0;\n  }\n\n  private _getOptionScrollPosition(optionIndex: number, optionHeight: number,\n    currentScrollPosition: number, panelHeight: number): number {\n    let optionOffset = optionIndex * optionHeight + itemPadding;\n\n    if (this.showFilter) {\n      const filterHeight = this.panel.nativeElement.querySelector('.nx-dropdown__filter').getBoundingClientRect().height;\n      optionOffset = optionIndex * optionHeight + filterHeight;\n    }\n\n    if (optionOffset < currentScrollPosition) {\n      return optionOffset;\n    }\n\n    if (optionOffset + optionHeight > currentScrollPosition + panelHeight) {\n      return Math.max(0, optionOffset - panelHeight + optionHeight);\n    }\n\n    return currentScrollPosition;\n  }\n\n  private _getItemOffset(item) {\n    const itemRect = item.containerElement.nativeElement.getBoundingClientRect();\n\n    return itemRect.top;\n  }\n\n  /**\n   * @docs-private\n   * Formfield Implementation\n   */\n  setDescribedByIds(ids: string[]): void {\n    this.ariaDescribedby = ids.join(' ');\n  }\n\n  /** @docs-private */\n  setAriaLabel(value: string) {\n    this._ariaLabel = value;\n  }\n\n  _getAriaLabel() {\n    return this._ariaLabel || (this.formFieldComponent ? this.formFieldComponent.label : null);\n  }\n\n  /**\n   * @docs-private\n   * Whether the select has a value.\n   */\n  get empty(): boolean {\n    return !this._selectionModel || this._selectionModel.isEmpty();\n  }\n\n  /** @docs-private */\n  get hasValue() {\n    return this._selectionModel.hasValue();\n  }\n\n  /** @docs-private */\n  get shouldLabelFloat(): boolean {\n    return this.focused || !this.empty;\n  }\n  /** End Formfield */\n\n  /** ControlValueAccessor */\n  /**\n   * Sets the select's value. Part of the ControlValueAccessor interface\n   * required to integrate with Angular's core forms API.\n   *\n   * @param value New value to be written to the model.\n   */\n  writeValue(value: any): void {\n    if (this.options) {\n      this._setSelectionByValue(value);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this._onTouched = fn;\n  }\n\n  /**\n   * Disables the select. Part of the ControlValueAccessor interface required\n   * to integrate with Angular's core forms API.\n   *\n   * @param isDisabled Sets whether the component is disabled.\n   */\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this._changeDetectorRef.markForCheck();\n    this.stateChanges.next();\n  }\n  /** End ControlValueAccessor */\n\n  _handleKeydown(event: KeyboardEvent) {\n    this.panelOpen ? this._handleOpenKeydown(event) : this._handleClosedKeydown(event);\n  }\n\n  private _handleClosedKeydown(event: KeyboardEvent) {\n    const keyCode = event.keyCode;\n    const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW ||\n      keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW;\n    const isOpenKey = keyCode === ENTER || keyCode === SPACE;\n\n    // Open the select on ALT + arrow key to match the native <select>\n    if (isOpenKey || ((this.isMultiSelect || event.altKey) && isArrowKey)) {\n      event.preventDefault(); // prevents the page from scrolling down when pressing space\n      this.openPanel();\n    } else if (!this.isMultiSelect && !this.disabled) {\n      this._keyManager.onKeydown(event);\n    }\n  }\n\n  private _handleOpenKeydown(event: KeyboardEvent) {\n    const keyCode = event.keyCode;\n    // all events other than the listed ones should be ignored or handled in _onFilter()\n    if (!([DOWN_ARROW, UP_ARROW, HOME, END, ENTER, LEFT_ARROW, RIGHT_ARROW, SHIFT, SPACE, TAB].indexOf(keyCode) >= 0)) {\n        return;\n    }\n\n    const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW;\n    const manager = this._keyManager;\n\n    const allHidden = this.options.map(option => option._hidden).every(option => Boolean(option));\n\n    if (keyCode === HOME || keyCode === END) {\n      event.preventDefault();\n      keyCode === HOME ? manager.setFirstItemActive() : manager.setLastItemActive();\n    } else if (isArrowKey && event.altKey) {\n      // Close the select on ALT + arrow key to match the native <select>\n      event.preventDefault();\n      this.closePanel();\n    } else if (keyCode === ENTER && manager.activeItem && !allHidden) {\n      event.preventDefault();\n\n      manager.activeItem._selectViaInteraction();\n    } else if (keyCode === ENTER && allHidden) {\n      event.preventDefault();\n\n      this.closePanel();\n    } else if (!this.showFilter && keyCode === SPACE && manager.activeItem) {\n      event.preventDefault();\n      manager.activeItem._selectViaInteraction();\n    } else if (keyCode === TAB) {\n      this.closePanel();\n    } else {\n      const previouslyFocusedIndex = manager.activeItemIndex;\n      manager.onKeydown(event);\n\n      if (this.isMultiSelect && isArrowKey && event.shiftKey && manager.activeItem &&\n        manager.activeItemIndex !== previouslyFocusedIndex) {\n        manager.activeItem._selectViaInteraction();\n      }\n    }\n  }\n\n  /** @docs-private */\n  formatValue(value): string {\n    return this.valueFormatter(value);\n  }\n\n  /** Called when the user types in the filter input */\n  _onFilter(event) {\n    event.preventDefault();\n    this.currentFilter = event.target.value;\n    this.filterChanges.next(event.target.value);\n    const allHidden = this.options.map(option => option._hidden).every(option => Boolean(option));\n    if (allHidden) {\n      this._keyManager.setActiveItem(null);\n    } else {\n      this._keyManager.setFirstItemActive();\n    }\n  }\n\n  /**\n   * @docs-private\n   * The value displayed in the trigger.\n   */\n  get triggerValue(): string {\n\n    if (this.empty) {\n      return '';\n    }\n\n    if (this.isMultiSelect) {\n      const selectedOptions = this._selectionModel.selected.map(option => option.viewValue);\n\n      return selectedOptions.join(', ');\n    }\n    return this._selectionModel.selected[0].viewValue;\n  }\n\n  /**\n   * Highlights the selected item. If no option is selected, it will highlight\n   * the first item instead.\n   */\n  private _highlightCorrectOption(): void {\n    if (this._keyManager) {\n      if (this.empty) {\n        this._keyManager.setFirstItemActive();\n      } else {\n        this._keyManager.setActiveItem(this._selectionModel.selected[0]);\n      }\n    }\n  }\n\n  /**\n   * Callback that is invoked when the overlay panel has been attached.\n   */\n  _onAttached(): void {\n    this._changeDetectorRef.markForCheck();\n    this.overlayDir.positionChange.pipe(take(1)).subscribe(() => {\n      this.panelBody.nativeElement.focus();\n      if (this._keyManager.activeItem) {\n        this._calculateScrollTop();\n      }\n      this._changeDetectorRef.markForCheck();\n      this.openedChange.emit(true);\n      if (this.showFilter) {\n        this.filterInput.nativeElement.focus();\n      }\n    });\n  }\n\n  _onFocus() {\n    if (!this.disabled) {\n      this._focused = true;\n      this.stateChanges.next();\n    }\n  }\n\n  /**\n   * Calls the touched callback only if the panel is closed. Otherwise, the trigger will\n   * \"blur\" to the panel when it opens, causing a false positive.\n   */\n  _onBlur() {\n    this._focused = false;\n\n    if (this.filterInput && this.showFilter) {\n      this._clearFilter();\n    }\n\n    if (!this.disabled && !this.panelOpen) {\n      this._onTouched();\n      this._changeDetectorRef.markForCheck();\n      this.stateChanges.next();\n    }\n  }\n\n  /** @docs-private */\n  get isFilterEmpty() {\n    return this.currentFilter.length === 0;\n  }\n\n  /** @docs-private */\n  _clearFilter() {\n    this.filterInput.nativeElement.value = '';\n    this.currentFilter = '';\n    this.filterChanges.next('');\n  }\n\n  /** @docs-private determines the `aria-activedescendant` to be set on the host. */\n  _getAriaActiveDescendant(): string | null {\n    if (this.panelOpen && this._keyManager && this._keyManager.activeItem) {\n      return this._keyManager.activeItem.id;\n    }\n\n    return null;\n  }\n}\n","import { NxFormfieldModule } from '@allianz/ngx-ndbx/formfield';\nimport { NxIconModule } from '@allianz/ngx-ndbx/icon';\nimport { A11yModule } from '@angular/cdk/a11y';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NxCheckboxModule } from '@allianz/ngx-ndbx/checkbox';\nimport { NxDropdownComponent } from './dropdown';\nimport { NxDropdownGroupComponent } from './group/dropdown-group';\nimport { NxDropdownItemComponent } from './item/dropdown-item';\nimport { ObserversModule } from '@angular/cdk/observers';\nimport { NxDropdownClosedLabelDirective } from './closed-label.directive';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NxFormfieldModule,\n    NxCheckboxModule,\n    OverlayModule,\n    A11yModule,\n    NxIconModule,\n    ObserversModule\n  ],\n  declarations: [\n    NxDropdownComponent,\n    NxDropdownItemComponent,\n    NxDropdownGroupComponent,\n    NxDropdownClosedLabelDirective\n  ],\n  exports: [\n    NxDropdownComponent,\n    NxDropdownItemComponent,\n    NxDropdownGroupComponent,\n    NxDropdownClosedLabelDirective\n  ]\n})\nexport class NxDropdownModule {\n\n}\n"]}