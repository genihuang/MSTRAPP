!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@allianz/ngx-ndbx/grid"),require("@angular/common"),require("@allianz/ngx-ndbx/utils"),require("@angular/cdk/coercion"),require("@angular/cdk/keycodes"),require("@angular/core"),require("@angular/forms"),require("decimal.js"),require("rxjs")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/slider",["exports","@allianz/ngx-ndbx/grid","@angular/common","@allianz/ngx-ndbx/utils","@angular/cdk/coercion","@angular/cdk/keycodes","@angular/core","@angular/forms","decimal.js","rxjs"],t):t((e.allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"].slider={}),e.allianz["ngx-ndbx"].grid,e.ng.common,e.allianz["ngx-ndbx"].utils,e.ng.cdk.coercion,e.ng.cdk.keycodes,e.ng.core,e.ng.forms,e.decimal_js,e.rxjs)}(this,function(e,t,n,r,i,a,o,s,l,d){"use strict";var u={TOUCH:0,MOUSE:1};u[u.TOUCH]="TOUCH",u[u.MOUSE]="MOUSE";var c=0,h=function(){function e(e,t){this.elementRef=e,this._changeDetectorRef=t,this._id="nx-slider-"+c++,this._tabIndex=0,this._min=0,this._max=100,this._disabled=!1,this._inverted=!1,this._thumbLabel=!0,this._negative=!1,this.valueChange=new o.EventEmitter,this.isActive=!1,this.dragSubscriptions=[],this.position=null,this._value=0,this._step=1,this._onChange=function(){},this._onTouched=function(){},this.valueFormatter=function(e){return e},this.labelMinFormatter=function(e){return e},this.labelMaxFormatter=function(e){return e}}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id!==e&&(this._id=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return this._tabIndex},set:function(e){this._tabIndex=i.coerceNumberProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this._min=i.coerceNumberProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this._max=i.coerceNumberProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=i.coerceNumberProperty(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label!==e&&(this._label=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=i.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverted",{get:function(){return this._inverted},set:function(e){this._inverted=i.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLabel",{get:function(){return this._thumbLabel},set:function(e){this._thumbLabel=i.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negative",{get:function(){return this._negative},set:function(e){this._negative=i.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this.writeValue(Number(e))},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.reset()},e.prototype.writeValue=function(e){e!==this._value&&(this._value=e,this.valueChange.emit(e),this._changeDetectorRef.markForCheck())},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.isMinimum=function(){return this._value===this.min},e.prototype.isValidStep=function(){var e=new l.Decimal(this._value).minus(this.min).mod(this.step);return this.isMinimum()||0===e.cmp(0)},e.prototype.changeValue=function(e){var t=new l.Decimal(this._value);if(this.isValidStep())t=t.plus(e);else{var n=new l.Decimal(this._value).minus(this.min);t=(t=e<0?n.toNearest(this.step,l.Decimal.ROUND_DOWN):n.toNearest(this.step,l.Decimal.ROUND_UP)).plus(this.min)}var i=t.toNumber();i=r.clamp(i,this.min,this.max),this._onChange(i),this.value=i},Object.defineProperty(e.prototype,"percentageValue",{get:function(){var e=((this.value||0)-this.min)/(this.max-this.min)*100;return this.inverted&&(e=100-e),r.clamp(e,0,100)},enumerable:!0,configurable:!0}),e.prototype.sliderClick=function(e){var t=this;this.disabled||(this._focusHandleElement(),e.stopPropagation(),this.position=this.getPositionFromEvent(e),this.frameId=requestAnimationFrame(function(){t.valueByPosition()}))},e.prototype.focus=function(){this.disabled||this._focusHandleElement()},e.prototype.blur=function(){this.disabled},e.prototype.handleKeypress=function(e){if(!this.disabled&&!(e.which<a.LEFT_ARROW||e.which>a.DOWN_ARROW))switch(e.preventDefault(),e.stopPropagation(),e.which){case this.inverted?a.RIGHT_ARROW:a.LEFT_ARROW:case a.DOWN_ARROW:return this.changeValue(-this.step);case a.UP_ARROW:case this.inverted?a.LEFT_ARROW:a.RIGHT_ARROW:return this.changeValue(this.step)}},e.prototype.dragStart=function(e){if(!this.disabled){e.preventDefault(),e.stopPropagation(),this.isActive=!0;var t=this.detectEventType(e)===u.TOUCH;this.dragSubscriptions=t?[d.fromEvent(document,"touchmove").subscribe(this.handleDragMove.bind(this)),d.fromEvent(document,"touchend").subscribe(this.handleDragStop.bind(this)),d.fromEvent(document,"touchcancel").subscribe(this.handleDragStop.bind(this))]:[d.fromEvent(document,"mousemove").subscribe(this.handleDragMove.bind(this)),d.fromEvent(document,"mouseup").subscribe(this.handleDragStop.bind(this))],this.position=this.getPositionFromEvent(e),this.runChangeObserver()}},e.prototype.formatValue=function(e){return this.valueFormatter(e)},e.prototype.formatLabelLeft=function(){return this.inverted?this.formatLabelMax():this.formatLabelMin()},e.prototype.formatLabelRight=function(){return this.inverted?this.formatLabelMin():this.formatLabelMax()},e.prototype.valueByPosition=function(){var e=this.elementRef.nativeElement.getBoundingClientRect(),t=(Math.max(e.left,Math.min(e.right,this.position.x))-e.left)/e.width;this.inverted&&(t=1-t);var n,i=this.min+t*(this.max-this.min);n=1===t?this.max:0===t?this.min:Math.round((i-this.min)/this.step)*this.step+this.min,this._roundToDecimal&&(n=this.roundToDecimal(n)),n=r.clamp(n,this.min,this.max),this._onChange(n),this.value=n},e.prototype.roundToDecimal=function(e){return parseFloat(e.toFixed(this._roundToDecimal))},e.prototype.formatLabelMin=function(){return this.labelMinFormatter(this.min)},e.prototype.formatLabelMax=function(){return this.labelMaxFormatter(this.max)},e.prototype.handleDragMove=function(e){e.preventDefault(),e.stopPropagation(),this.position=this.getPositionFromEvent(e)},e.prototype.handleDragStop=function(e){e.preventDefault(),e.stopPropagation(),this.reset(),this.valueByPosition()},e.prototype.runChangeObserver=function(){var e=this;this.frameId=requestAnimationFrame(function(){e.valueByPosition(),e.isActive&&e.runChangeObserver()})},e.prototype.reset=function(){var e,t;this.isActive=!1;try{for(var n=function r(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(this.dragSubscriptions),i=n.next();!i.done;i=n.next()){i.value.unsubscribe()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}this.dragSubscriptions=[],cancelAnimationFrame(this.frameId)},e.prototype.detectEventType=function(e){return e.type.includes("touch")?u.TOUCH:u.MOUSE},e.prototype.getPositionFromEvent=function(e){var t=this.detectEventType(e)===u.TOUCH?e.touches.item(0):e;return{x:t.clientX,y:t.clientY}},e.prototype._focusHandleElement=function(){this.handleElement.nativeElement.focus()},e.decorators=[{type:o.Component,args:[{selector:"nx-slider",template:'<label class="nx-slider__label" [id]="id + \'-label\'" [attr.for]="id + \'-handle\'" (click)="_focusHandleElement()">{{label}}</label>\n\n<div\n  class="nx-slider__wrapper"\n  (click)="sliderClick($event)"\n>\n\n  <span class="nx-slider__background">\n    <span class="nx-slider__filler" [style.width.%]="percentageValue"></span>\n\n    <a class="nx-slider__handle"\n        [id]="id + \'-handle\'"\n        [attr.tabindex]="tabindex"\n        [attr.aria-labelledby]="id + \'-label\'"\n        role="slider"\n        [attr.aria-valuemin]="formatLabelMin()"\n        [attr.aria-valuemax]="formatLabelMax()"\n        [attr.aria-valuetext]="formatValue(value)"\n        [attr.aria-valuenow]="formatValue(value)"\n        (mousedown)="dragStart($event)"\n        (touchstart)="dragStart($event)"\n        #handle\n      >\n\n      <span *ngIf="thumbLabel" class="nx-slider__value">{{formatValue(value)}}\n        <div class="nx-slider__arrow">\n        </div>\n      </span>\n    </a>\n\n  </span>\n</div>\n\n<div class="nx-slider__label-container">\n    <span class="nx-slider__value-label">{{formatLabelLeft()}}</span>\n    <span class="nx-slider__value-label">{{formatLabelRight()}}</span>\n</div>\n',changeDetection:o.ChangeDetectionStrategy.OnPush,providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0}],host:{"[attr.aria-disabled]":"disabled ? true : null","(keydown)":"handleKeypress($event)","[class.nx-slider--disabled]":"disabled","[class.nx-slider--negative]":"negative"},styles:[":host{display:block}.nx-slider__label{font-size:20px;line-height:24px;letter-spacing:.2px;color:#414141;font-weight:300}.nx-slider__wrapper{width:100%;padding:66px 0 26px}.nx-slider__background{position:relative;background-color:#d9d9d9;display:block;height:4px;border-radius:2px;white-space:nowrap;cursor:pointer}.nx-slider__filler{display:inline-block;height:4px;border-radius:2px;background-color:#007ab3;float:left}.nx-slider__handle{display:inline-block;position:relative;width:24px;height:24px;background-color:#fff;border-radius:50%;box-shadow:0 2px 4px rgba(65,65,65,.5);border:1px solid #f5f5f5;box-sizing:border-box;margin-left:-12px;top:-10px;z-index:2;cursor:-webkit-grab;cursor:grab}.nx-slider__handle:focus{outline:0}:host-context([data-whatinput=keyboard]) .nx-slider__handle:focus{border-color:#7fbcd9;box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6}.nx-slider__value{background-color:#fff;border:1px solid #f5f5f5;border-radius:4px;box-shadow:0 2px 4px rgba(65,65,65,.5);color:#006192;cursor:-webkit-grab;cursor:grab;line-height:16px;height:24px;width:48px;text-align:center;right:8px;font-weight:600;font-size:12px;letter-spacing:.5px;padding:3px 8px;position:relative;top:-40px;display:table;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.nx-slider__arrow{width:6px;height:6px;background:#fff;border-right:1px solid #f5f5f5;border-bottom:1px solid #f5f5f5;left:50%;-webkit-transform:translate(-50%,1px) rotate(45deg);transform:translate(-50%,1px) rotate(45deg);position:absolute;box-shadow:-2px -2px 1px 1px #fff,2px 2px 4px rgba(65,65,65,.5)}@media screen and (-ms-high-contrast:active){.nx-slider__handle:focus{box-shadow:0 2px 4px,inset 0 0 0 4px}}.nx-slider__label-container{display:flex;width:100%;justify-content:space-between;color:#414141;font-size:14px;line-height:16px;letter-spacing:.2px}.nx-slider__max-value-label{text-align:right}:host(.nx-slider--disabled){cursor:not-allowed}:host(.nx-slider--disabled) .nx-slider__background,:host(.nx-slider--disabled) .nx-slider__filler,:host(.nx-slider--disabled) .nx-slider__handle,:host(.nx-slider--disabled) .nx-slider__value,:host(.nx-slider--disabled) .nx-slider__value-label{pointer-events:none;cursor:not-allowed}:host(.nx-slider--disabled) .nx-slider__filler{background-color:#7fbcd9}:host(.nx-slider--disabled) .nx-slider__value{color:#7fbcd9}:host(.nx-slider--disabled) .nx-slider__label-container{color:#d9d9d9}:host(.nx-slider--negative) .nx-slider__label,:host(.nx-slider--negative) .nx-slider__value-label{color:#fff}:host(.nx-slider--negative) .nx-slider__filler{background-color:#fff}:host(.nx-slider--negative) .nx-slider__background{background-color:rgba(255,255,255,.35)}:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__label,:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__value-label{color:#d9d9d9}:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__filler{background-color:#d9d9d9}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.ChangeDetectorRef}]},e.propDecorators={handleElement:[{type:o.ViewChild,args:["handle"]}],id:[{type:o.Input,args:["id"]}],tabindex:[{type:o.Input}],min:[{type:o.Input,args:["nxMin"]}],max:[{type:o.Input,args:["nxMax"]}],step:[{type:o.Input,args:["nxStep"]}],label:[{type:o.Input,args:["nxLabel"]}],disabled:[{type:o.Input}],inverted:[{type:o.Input,args:["nxInverted"]}],thumbLabel:[{type:o.Input}],negative:[{type:o.Input,args:["negative"]}],valueChange:[{type:o.Output,args:["nxValueChange"]}],valueFormatter:[{type:o.Input,args:["nxValueFormatter"]}],labelMinFormatter:[{type:o.Input,args:["nxLabelMinFormatter"]}],labelMaxFormatter:[{type:o.Input,args:["nxLabelMaxFormatter"]}],value:[{type:o.Input,args:["nxValue"]}]},e}(),p=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[n.CommonModule,t.NxGridModule],declarations:[h],exports:[h]}]}],e}();e.NxSliderModule=p,e.NxSliderComponent=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-slider.umd.min.js.map