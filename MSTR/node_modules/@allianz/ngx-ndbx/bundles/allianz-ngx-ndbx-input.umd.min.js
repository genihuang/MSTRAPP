!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/cdk/coercion"),require("@angular/cdk/platform"),require("@angular/forms"),require("rxjs"),require("@allianz/ngx-ndbx/formfield"),require("@allianz/ngx-ndbx/utils"),require("@angular/core"),require("@angular/cdk/keycodes"),require("@allianz/ngx-ndbx/icon")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/input",["exports","@angular/common","@angular/cdk/coercion","@angular/cdk/platform","@angular/forms","rxjs","@allianz/ngx-ndbx/formfield","@allianz/ngx-ndbx/utils","@angular/core","@angular/cdk/keycodes","@allianz/ngx-ndbx/icon"],t):t((e.allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"].input={}),e.ng.common,e.ng.cdk.coercion,e.ng.cdk.platform,e.ng.forms,e.rxjs,e.allianz["ngx-ndbx"].formfield,e.allianz["ngx-ndbx"].utils,e.ng.core,e.ng.cdk.keycodes,e.allianz["ngx-ndbx"].icon)}(this,function(e,t,n,r,o,a,i,s,u,l,p){"use strict";var c=new u.InjectionToken("NX_INPUT_VALUE_ACCESSOR"),d=["button","checkbox","file","hidden","image","radio","range","reset","submit"],h=["date","datetime","datetime-local","month","time","week"].filter(function(e){return r.getSupportedInputTypes().has(e)}),f=0,y=function(){function e(e,t,n,r,o,i){this._elementRef=e,this.ngControl=t,this._parentForm=n,this._parentFormGroup=r,this._errorStateMatcher=o,this._type="text",this._uid="nx-input-"+f++,this._disabled=!1,this._required=!1,this._readonly=!1,this.errorState=!1,this.stateChanges=new a.Subject,this.focused=!1,this.id=this.id,this._inputValueAccessor=i||this._elementRef.nativeElement,this._previousNativeValue=this.value}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(e){e!==this.value&&(this._inputValueAccessor.value=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=n.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=n.coerceBooleanProperty(e),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=n.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e||"text",this._validateType(),!this._isTextarea()&&r.getSupportedInputTypes().has(this._type)&&(this._elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementRef",{get:function(){return this._elementRef},enumerable:!0,configurable:!0}),e.prototype._onInput=function(){},e.prototype._focusChanged=function(e){e===this.focused||this.readonly||(this.focused=e,this.stateChanges.next())},e.prototype.ngOnChanges=function(){this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.ngDoCheck=function(){this.ngControl?this.updateErrorState():this._dirtyCheckNativeValue()},e.prototype.updateErrorState=function(){var e=this.errorState,t=this._parentFormGroup||this._parentForm,n=this.ngControl?this.ngControl.control:null,r=this._errorStateMatcher.isErrorState(n,t);r!==e&&(this.errorState=r,this.stateChanges.next())},e.prototype.setDescribedByIds=function(e){this._ariaDescribedby=e.join(" ")},e.prototype.setAriaLabel=function(e){this._ariaLabel=e},e.prototype._isBadInput=function(){var e=this._elementRef.nativeElement.validity;return e&&e.badInput},Object.defineProperty(e.prototype,"empty",{get:function(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()},enumerable:!0,configurable:!0}),e.prototype._isNeverEmpty=function(){return-1<h.indexOf(this._type)},e.prototype._isTextarea=function(){var e=this._elementRef.nativeElement;return!!e.nodeName&&"textarea"===e.nodeName.toLowerCase()},e.prototype._validateType=function(){if(-1<d.indexOf(this._type))throw new Error("Input of type '"+this._type+"' is not supported")},Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype._dirtyCheckNativeValue=function(){var e=this.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())},e.decorators=[{type:u.Directive,args:[{selector:"input[nxInput], textarea[nxInput], select[nxInput]",host:{"[class.c-input]":"true","[attr.id]":"id","[class.is-filled]":"empty === false","[class.is-disabled]":"disabled","[class.has-error]":"errorState","[class.is-focused]":"focused","[attr.aria-label]":"_ariaLabel || null","[attr.aria-describedby]":"_ariaDescribedby || null","[attr.aria-invalid]":"errorState","[attr.aria-required]":"required.toString()","(blur)":"_focusChanged(false)","(focus)":"_focusChanged(true)","(input)":"_onInput()"},providers:[{provide:i.NxFormfieldControl,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:u.ElementRef},{type:o.NgControl,decorators:[{type:u.Optional},{type:u.Self}]},{type:o.NgForm,decorators:[{type:u.Optional}]},{type:o.FormGroupDirective,decorators:[{type:u.Optional}]},{type:s.ErrorStateMatcher},{type:undefined,decorators:[{type:u.Optional},{type:u.Self},{type:u.Inject,args:[c]}]}]},e.propDecorators={_ariaLabel:[{type:u.Input,args:["nxAriaLabel"]}],id:[{type:u.Input}],value:[{type:u.Input}],readonly:[{type:u.Input}],disabled:[{type:u.Input}],required:[{type:u.Input}],type:[{type:u.Input}]},e}(),g="password-show-o",b="password-hide-o",_=function(){function e(e){this._changeDetectorRef=e,this._currentIcon=g,this._pressed=!1,this._ariaLabel="Show password"}return Object.defineProperty(e.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){e!==this._ariaLabel&&(this._ariaLabel=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.control?this._currentIcon="password"===this.control.type?g:b:console.warn("You need to pass an input as a control to the password toggle.")},e.prototype.toggleInputType=function(){this.control&&(this.control.type="password"===this.control.type?"text":"password",this._pressed=!this._pressed,this.toggleIcon(),this._changeDetectorRef.markForCheck())},e.prototype.toggleIcon=function(){this._currentIcon=this._currentIcon===g?b:g},e.prototype._onKeydown=function(e){!e||e.keyCode!==l.ENTER&&e.keyCode!==l.SPACE||this.toggleInputType()},Object.defineProperty(e.prototype,"tabindex",{get:function(){return this.control?this.control.disabled?-1:0:null},enumerable:!0,configurable:!0}),e.decorators=[{type:u.Component,args:[{selector:"nx-password-toggle",template:'<nx-icon\n      aria-hidden="true"\n      [name]="_currentIcon">\n    </nx-icon>',host:{"[attr.aria-label]":"ariaLabel","[attr.tabindex]":"tabindex","[attr.aria-pressed]":"_pressed",role:"button","(click)":"toggleInputType()","(keydown)":"_onKeydown($event)"},changeDetection:u.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;display:inline-block;height:24px;width:24px;cursor:pointer}:host:focus{outline:0}:host-context([data-whatinput=keyboard]):focus ::ng-deep nx-icon{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;border-radius:4px}:host-context(.is-disabled){pointer-events:none}"]}]}],e.ctorParameters=function(){return[{type:u.ChangeDetectorRef}]},e.propDecorators={control:[{type:u.Input}],ariaLabel:[{type:u.Input}]},e}(),x=function(){function e(){}return e.decorators=[{type:u.NgModule,args:[{imports:[t.CommonModule,i.NxFormfieldModule,p.NxIconModule],declarations:[y,_],exports:[i.NxFormfieldModule,y,_]}]}],e}();e.NxInputModule=x,e.NX_INPUT_VALUE_ACCESSOR=c,e.NxInputDirective=y,e.NxPasswordToggleComponent=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-input.umd.min.js.map