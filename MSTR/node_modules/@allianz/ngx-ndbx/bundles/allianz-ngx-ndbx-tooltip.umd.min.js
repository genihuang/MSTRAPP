!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/animations"),require("@angular/cdk/a11y"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/platform"),require("@angular/cdk/portal"),require("@angular/cdk/scrolling"),require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/tooltip",["exports","@angular/common","@angular/animations","@angular/cdk/a11y","@angular/cdk/bidi","@angular/cdk/coercion","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/platform","@angular/cdk/portal","@angular/cdk/scrolling","@angular/core","rxjs","rxjs/operators"],e):e((t.allianz=t.allianz||{},t.allianz["ngx-ndbx"]=t.allianz["ngx-ndbx"]||{},t.allianz["ngx-ndbx"].tooltip={}),t.ng.common,t.ng.animations,t.ng.cdk.a11y,t.ng.cdk.bidi,t.ng.cdk.coercion,t.ng.cdk.keycodes,t.ng.cdk.overlay,t.ng.cdk.platform,t.ng.cdk.portal,t.ng.cdk.scrolling,t.ng.core,t.rxjs,t.rxjs.operators)}(this,function(t,e,i,o,n,r,s,a,l,c,h,p,d,u){"use strict";var _={tooltipState:i.trigger("state",[i.state("initial, void, hidden",i.style({opacity:0})),i.state("visible",i.style({opacity:1})),i.transition("* => visible",i.animate("70ms cubic-bezier(0, 0, 0.2, 1)",i.style({opacity:1}))),i.transition("* => hidden",i.animate("70ms cubic-bezier(0, 0, 0.2, 1)",i.style({opacity:0})))])},y=function(){function t(t,e){this._changeDetectorRef=t,this.elementRef=e,this._showTimeoutId=null,this._hideTimeoutId=null,this._visibility="initial",this._position="bottom",this._arrowStyle={},this._closeOnInteraction=!1,this._onHide=new d.Subject}return Object.defineProperty(t.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrowStyle",{get:function(){return this._arrowStyle},set:function(t){this._arrowStyle=t,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrowClass",{get:function(){return"nx-tooltip__arrow--"+this.position},enumerable:!0,configurable:!0}),t.prototype.show=function(t){var e=this;this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=window.setTimeout(function(){e._visibility="visible",e._showTimeoutId=null,e._changeDetectorRef.markForCheck()},t)},t.prototype.hide=function(t){var e=this;this._hideTimeoutId||(this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=window.setTimeout(function(){e._visibility="hidden",e._hideTimeoutId=null,e._changeDetectorRef.markForCheck()},t))},t.prototype.afterHidden=function(){return this._onHide.asObservable()},t.prototype.isVisible=function(){return"visible"===this.visibility},t.prototype.isDelayed=function(){return null!==this._showTimeoutId||null!==this._hideTimeoutId},t.prototype.ngOnDestroy=function(){this._onHide.complete()},t.prototype._animationStart=function(){this._closeOnInteraction=!1},t.prototype._animationDone=function(t){var e=t.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)},t.prototype._handleBodyInteraction=function(){this._closeOnInteraction&&this.hide(0)},t.decorators=[{type:p.Component,args:[{selector:"nx-tooltip-component",template:'<div class="nx-tooltip"\n    [@state]="visibility"\n    (@state.start)="_animationStart()"\n    (@state.done)="_animationDone($event)">\n  <div [ngClass]="arrowClass" class="nx-tooltip__arrow" [ngStyle]="arrowStyle"></div>\n  {{ message }}\n</div>\n',changeDetection:p.ChangeDetectionStrategy.OnPush,animations:[_.tooltipState],host:{"[style.zoom]":'visibility === "visible" ? 1 : null',"(body:click)":"this._handleBodyInteraction()","aria-hidden":"true"},styles:["::ng-deep .nx-tooltip-panel{pointer-events:none!important}:host{padding:16px}.nx-tooltip{color:#fff;border-radius:4px;font-size:14px;line-height:20px;max-width:408px;padding:8px 16px;background-color:#414141}@media screen and (-ms-high-contrast:active){.nx-tooltip{outline:windowText solid 1px}}.nx-tooltip__arrow{position:absolute;width:12px;height:12px;background-color:inherit;z-index:-1}.nx-tooltip__arrow--top{-webkit-transform:translate(-50%,0) rotate(45deg);transform:translate(-50%,0) rotate(45deg);bottom:10px}.nx-tooltip__arrow--right{-webkit-transform:translate(0,-50%) rotate(45deg);transform:translate(0,-50%) rotate(45deg);left:10px}.nx-tooltip__arrow--bottom{-webkit-transform:translate(-50%,0) rotate(45deg);transform:translate(-50%,0) rotate(45deg);top:10px}.nx-tooltip__arrow--left{-webkit-transform:translate(0,-50%) rotate(45deg);transform:translate(0,-50%) rotate(45deg);right:10px}"]}]}],t.ctorParameters=function(){return[{type:p.ChangeDetectorRef},{type:p.ElementRef}]},t}(),f=function(){return(f=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function g(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return s}var m="nx-tooltip-panel";function v(t){return Error('Tooltip position "'+t+'" is invalid.')}var b=new p.InjectionToken("nx-tooltip-default-options",{providedIn:"root",factory:w});function w(){return{showDelay:200,hideDelay:200,touchendHideDelay:1500}}var x=[{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"},{originX:"end",originY:"center",overlayX:"start",overlayY:"center"},{originX:"start",originY:"center",overlayX:"end",overlayY:"center"},{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"}],I=function(){function t(t,e,i,o,n,r,s,a,l,c){var h=this;this._overlay=t,this._elementRef=e,this._scrollDispatcher=i,this._viewContainerRef=o,this._ngZone=n,this._ariaDescriber=s,this._focusMonitor=a,this._dir=l,this._defaultOptions=c,this._position="bottom",this._disabled=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this._message="",this._manualListeners=new Map,this._destroyed=new d.Subject,this._scrollStrategy=this._overlay.scrollStrategies.reposition;var p=e.nativeElement;r.IOS||r.ANDROID?this._manualListeners.set("touchstart",function(){return h.show()}):this._manualListeners.set("mouseenter",function(){return h.show()}).set("mouseleave",function(){return h.hide()}),this._manualListeners.forEach(function(t,e){return p.addEventListener(e,t)}),a.monitor(e).pipe(u.takeUntil(this._destroyed)).subscribe(function(t){t?"keyboard"===t&&n.run(function(){return h.show()}):n.run(function(){return h.hide(0)})}),c&&c.position&&(this.position=c.position)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&(this._tooltipInstance.position=this._position,this._tooltipInstance.show(0)),this._overlayRef.updatePosition()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=r.coerceBooleanProperty(t),this._disabled&&this.hide(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._message},set:function(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=t?(""+t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ariaDescriber.describe(this._elementRef.nativeElement,this.message))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this._elementRef.nativeElement,e=t.style,i="INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?"":"none";e.webkitUserSelect=e.userSelect=e.msUserSelect=i},t.prototype.ngOnDestroy=function(){var i=this;this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._manualListeners.forEach(function(t,e){i._elementRef.nativeElement.removeEventListener(e,t)}),this._manualListeners.clear(),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.message),this._focusMonitor.stopMonitoring(this._elementRef)},t.prototype.show=function(t){var e=this;if(void 0===t&&(t=this.showDelay),!this.disabled&&this.message&&(!this._isTooltipVisible()||this._tooltipInstance.isDelayed())){var i=this._createOverlay();this._detach(),this._portal=this._portal||new c.ComponentPortal(y,this._viewContainerRef),this._embeddedViewRef=i.attach(this._portal),this._tooltipInstance=this._embeddedViewRef.instance,this._tooltipInstance.afterHidden().pipe(u.takeUntil(this._destroyed)).subscribe(function(){return e._detach()}),this._updateTooltipMessage(),this._tooltipInstance.show(t)}},t.prototype.hide=function(t){void 0===t&&(t=this.hideDelay),this._tooltipInstance&&this._tooltipInstance.hide(t)},t.prototype.toggle=function(){this._isTooltipVisible()?this.hide():this.show()},t.prototype._isTooltipVisible=function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()},t.prototype._handleKeydown=function(t){this._isTooltipVisible()&&t.keyCode===s.ESCAPE&&(t.stopPropagation(),this.hide(0))},t.prototype._handleTouchend=function(){this.hide(this._defaultOptions.touchendHideDelay)},t.prototype._createOverlay=function(){var i=this;if(this._overlayRef)return this._overlayRef;var t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),e=this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition(!0).withFlexibleDimensions(!1).withPush(!0);return e.withScrollableContainers(t),e.positionChanges.pipe(u.takeUntil(this._destroyed)).subscribe(function(t){if(i._tooltipInstance){var e=t.connectionPair;i._ngZone.run(function(){return i._positionArrow(e)}),t.scrollableViewProperties.isOverlayClipped&&i._tooltipInstance.isVisible()&&i._ngZone.run(function(){return i.hide(0)})}}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:e,panelClass:m,scrollStrategy:this._scrollStrategy(),disposeOnNavigation:!0}),this._updatePosition(),this._overlayRef.detachments().pipe(u.takeUntil(this._destroyed)).subscribe(function(){return i._detach()}),this._overlayRef},t.prototype._detach=function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null},t.prototype._updatePosition=function(){var t=this._overlayRef.getConfig().positionStrategy,e=this._getOrigin(),i=this._getOverlayPosition();t.withPositions(function o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}([f({},e,i)],x))},t.prototype._getOrigin=function(){var t,e=!this._dir||"ltr"===this._dir.value,i=this.position;if("top"===i||"bottom"===i)t={originX:"center",originY:i};else if("left"===i&&e||"right"===i&&!e)t={originX:"start",originY:"center"};else{if(!("right"===i&&e||"left"===i&&!e))throw v(i);t={originX:"end",originY:"center"}}return t},t.prototype._getOverlayPosition=function(){var t,e=!this._dir||"ltr"===this._dir.value,i=this.position;if("top"===i)t={overlayX:"center",overlayY:"bottom"};else if("bottom"===i)t={overlayX:"center",overlayY:"top"};else if("left"===i&&e||"right"===i&&!e)t={overlayX:"end",overlayY:"center"};else{if(!("right"===i&&e||"left"===i&&!e))throw v(i);t={overlayX:"start",overlayY:"center"}}return t},t.prototype._updateTooltipMessage=function(){var t=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._ngZone.onMicrotaskEmpty.asObservable().pipe(u.take(1),u.takeUntil(this._destroyed)).subscribe(function(){t._tooltipInstance&&t._overlayRef.updatePosition()}))},t.prototype._positionArrow=function(t){var e=this._elementRef.nativeElement.getBoundingClientRect().left+this._elementRef.nativeElement.getBoundingClientRect().width/2-this._overlayRef.overlayElement.getBoundingClientRect().left;if(t.originX===t.overlayX){var i={};i.left=e+"px",this._tooltipInstance.arrowStyle=i}"end"===t.originX&&"start"===t.overlayX?(this._tooltipInstance.arrowStyle={top:"50%"},this._tooltipInstance.position="right"):"bottom"===t.originY&&"top"===t.overlayY?(this._tooltipInstance.arrowStyle={left:e+"px"},this._tooltipInstance.position="bottom"):"start"===t.originX&&"end"===t.overlayX?(this._tooltipInstance.arrowStyle={top:"50%"},this._tooltipInstance.position="left"):"top"===t.originY&&"bottom"===t.overlayY&&(this._tooltipInstance.arrowStyle={left:e+"px"},this._tooltipInstance.position="top")},t.decorators=[{type:p.Directive,args:[{selector:"[nxTooltip]",exportAs:"nxTooltip",host:{"(keydown)":"_handleKeydown($event)","(touchend)":"_handleTouchend()"}}]}],t.ctorParameters=function(){return[{type:a.Overlay},{type:p.ElementRef},{type:h.ScrollDispatcher},{type:p.ViewContainerRef},{type:p.NgZone},{type:l.Platform},{type:o.AriaDescriber},{type:o.FocusMonitor},{type:n.Directionality,decorators:[{type:p.Optional}]},{type:undefined,decorators:[{type:p.Optional},{type:p.Inject,args:[b]}]}]},t.propDecorators={position:[{type:p.Input,args:["nxTooltipPosition"]}],disabled:[{type:p.Input,args:["nxTooltipDisabled"]}],showDelay:[{type:p.Input,args:["nxTooltipShowDelay"]}],hideDelay:[{type:p.Input,args:["nxTooltipHideDelay"]}],message:[{type:p.Input,args:["nxTooltip"]}]},t}(),k=function(){function t(){}return t.decorators=[{type:p.NgModule,args:[{imports:[o.A11yModule,e.CommonModule,a.OverlayModule],exports:[I,y],declarations:[I,y],entryComponents:[y]}]}],t}();t.NxTooltipModule=k,t.getNxTooltipInvalidPositionError=v,t.NX_TOOLTIP_DEFAULT_OPTIONS_FACTORY=w,t.NX_TOOLTIP_PANEL_CLASS=m,t.NX_TOOLTIP_DEFAULT_OPTIONS=b,t.NxTooltipDirective=I,t.ɵb=_,t.ɵa=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-tooltip.umd.min.js.map